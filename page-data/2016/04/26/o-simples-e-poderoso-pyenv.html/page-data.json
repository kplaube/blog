{"componentChunkName":"component---src-templates-blog-post-js","path":"/2016/04/26/o-simples-e-poderoso-pyenv.html","result":{"data":{"markdownRemark":{"html":"<p>Num certo dia, eu resolvi deixar a preguiça de lado e atualizar\na versão do <em>Mac OS X</em> para o <em>El Capitan</em>. Na cara e coragem,\ne dotado de uma ingenuidade ímpar, simplesmente apertei o botão\n<em>Update</em> e deixei com que os deuses resolvessem qual seria o\ndestino do meu <em>workspace</em> após essa fatídica operação.</p>\n<p>Obviamente, <a href=\"https://ohthehugemanatee.org/blog/2015/10/01/how-i-got-el-capitain-working-with-my-developer-tools/\" title=\"Veja o que fazer com se o update do El Capitan quebrar o seu ambiente de desenvolvimento\">algumas ferramentas deixaram de funcionar</a>,\nincluindo a minha instalação \"system wide\" do <a href=\"/tag/pip.html\" title=\"Leia mais sobre pip\"><em>pip</em></a>\ne o meu <a href=\"/tag/virtualenvwrapper.html%7D\" title=\"Leia mais sobre Virtualenv\"><em>virtualenvwrapper</em></a>.</p>\n<p>Após algum tempo \"googlando\" eu encontrei o <a href=\"https://github.com/yyuu/pyenv\" title=\"Conheça o Pyenv\"><em>Pyenv</em></a>,\ne vou compartilhar com você a razão pela qual ele é uma excelente ideia.</p>\n<h2>Múltiplas versões de Python, sem dor de cabeça</h2>\n<p>O <em>Pyenv</em> é uma ferramenta que te permite selecionar qual a versão\ndo <a href=\"/tag/python.html\" title=\"Leia mais sobre Python\"><em>Python</em></a> você está utilizando,\nde maneira muito fácil e prática.</p>\n<p>Antes de conhecer o <em>Pyenv</em>, eu geralmente baixava o código fonte e\ncompilava as versões \"adicionais\" do <em>Python</em> (2.6, 3.3, 3.4, etc)\nno <code class=\"language-text\">/opt/</code> da minha máquina, utilizando a versão do sistema (2.7.x)\npara a maioria dos projetos que desenvolvia. Aí no momento de criação\ndo meu <code class=\"language-text\">virtualenv</code>, apontava o executável da linguagem para a versão\nespecífica.</p>\n<p>Com essa ferramenta eu deixo uma versão do sistema intacta, e utilizo\nde forma completamente isolada a determinada versão do <em>Python</em> do\nqual necessito, com alguns atalhos que me auxiliam na transição de\numa versão para a outra.</p>\n<h2>Instalando</h2>\n<p>Instalar o <em>Pyenv</em> é tão trivial quanto dar um <code class=\"language-text\">pip install</code>. Por ele não\ndepender do <em>Python</em> (e ser em <em>shell</em> puro) podemos utilizar o seu\n<a href=\"https://github.com/yyuu/pyenv-installer\" title=\"Veja no Github\">instalador de linha de comando</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ curl -L https://raw.githubusercontent.com/yyuu/pyenv-installer/master/bin/pyenv-installer | bash\n$ pyenv update</code></pre></div>\n<p>Com o comando <code class=\"language-text\">pyenv install -l</code> somos apresentados a uma lista de possíveis versões\na serem instaladas através do utilitário (indo de <em>Python 2.1</em> até <em>PyPy</em>).</p>\n<p>Suponha que você queira instalar a versão 3.5.1 da linguagem:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ pyenv install 3.5.1</code></pre></div>\n<p>Genial, não?</p>\n<h2>Transitando entre versões</h2>\n<p>Para utilizar a versão instalada no terminal que está aberto, usamos o parâmetro <code class=\"language-text\">shell</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ pyenv shell 3.5.1\n$ python -V\nPython 3.5.1</code></pre></div>\n<p>Talvez seja necessário executar o comando <code class=\"language-text\">pyenv rehash</code>, caso você não esteja\nobtendo o resultado esperado.</p>\n<p>Com o comando <code class=\"language-text\">versions</code> obtemos as versões disponíveis no computador:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ pyenv versions\nsystem\n* 3.5.1 (set by PYENV_VERSION environment variable)</code></pre></div>\n<p>O asterisco indica a versão em uso atualmente.</p>\n<p>Com o comando <code class=\"language-text\">local</code>, setamos uma determinada versão do <em>Python</em> para um\ndeterminado <em>path</em>. Exemplo:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ cd ~/Workspace/blog\n$ pyenv local 3.5.1\n$ pyenv version\n3.5.1 (set by /Users/klaus/Workspace/blog/.python-version)</code></pre></div>\n<p>O <em>Pyenv</em> criará um arquivo <code class=\"language-text\">.python-version</code> no diretório, e\ntodo o momento que você acessá-lo trocará a versão corrente do\ninterpretador, automaticamente.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 610px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bb8b2bc62fb619c6c39a441e15387da6/073a0/sparrow.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.91666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAABQAEBv/EABUBAQEAAAAAAAAAAAAAAAAAAAIB/9oADAMBAAIQAxAAAAE9bm3zdEVIf//EAB0QAAEDBQEAAAAAAAAAAAAAAAMCBBIAAQUjMTT/2gAIAQEAAQUCQrY3PMRDNZWrH9f+r//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABURAQEAAAAAAAAAAAAAAAAAABAx/9oACAECAQE/AYf/xAAeEAEAAQIHAAAAAAAAAAAAAAABAAIRECEiMWFxof/aAAgBAQAGPwJustU7Pk1ZvGD0Rn//xAAcEAACAgIDAAAAAAAAAAAAAAABEQAhMUEQUbH/2gAIAQEAAT8hG/IsuABtZJ1Brp3AZhxKiaoeT//aAAwDAQACAAMAAAAQo9//xAAXEQEBAQEAAAAAAAAAAAAAAAABEQBR/9oACAEDAQE/EFpNTm//xAAVEQEBAAAAAAAAAAAAAAAAAAAREP/aAAgBAgEBPxATP//EAB0QAQACAgIDAAAAAAAAAAAAAAEAIRExQYFhceH/2gAIAQEAAT8Q5KBEebvdwxSDggGxe8HcdpiW0PZuAyrhgCs+jGlWGs9J/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"&quot;Minha cara após o update do El Capitan (thewrap.com)&quot;\"\n        title=\"Minha cara após o update do El Capitan (thewrap.com)\"\n        src=\"/static/bb8b2bc62fb619c6c39a441e15387da6/073a0/sparrow.jpg\"\n        srcset=\"/static/bb8b2bc62fb619c6c39a441e15387da6/7809d/sparrow.jpg 192w,\n/static/bb8b2bc62fb619c6c39a441e15387da6/4ecad/sparrow.jpg 384w,\n/static/bb8b2bc62fb619c6c39a441e15387da6/073a0/sparrow.jpg 610w\"\n        sizes=\"(max-width: 610px) 100vw, 610px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Minha cara após o update do El Capitan (thewrap.com)</figcaption>\n  </figure></p>\n<p>Um <em>workaround</em> para fazer o meu ambiente de trabalho funcionar,\nno <em>El Capitan</em>, foi baixar uma versão 2.7.x do <em>Python</em> e torná-la\n<code class=\"language-text\">global</code>. Exemplo:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ pyenv install 2.7.10\n$ pyenv rehash\n$ pyenv global 2.7.10\nsystem\n* 2.7.10 (set by /usr/local/opt/pyenv/version)\n3.5.1</code></pre></div>\n<p>Com isso, o comando <code class=\"language-text\">pip</code> voltou a funcionar \"system wide\", bem como\nas minhas integrações do <code class=\"language-text\">zsh</code> com o <code class=\"language-text\">virtualenvwrapper</code>.</p>\n<h2>Bônus: virtualenvwrapper</h2>\n<p>E assim a minha vida continuou pacata e serena... até o momento que eu\ntiver que criar um <code class=\"language-text\">virtualenv</code> para uma versão diferente da minha\nversão <code class=\"language-text\">global</code>.</p>\n<p>O <em>Pyenv</em> com <em>virtualenvwrapper</em> não se entendem muito bem.\nPara facilitar a nossa vida, temos o <a href=\"https://github.com/yyuu/pyenv-virtualenvwrapper\" title=\"Veja o repositório no GitHub\"><em>pyenv-virtualenvwrapper</em></a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ pip install virtualenvwrapper\n$ brew install pyenv-virtualenvwrapper</code></pre></div>\n<p>É necessário ativá-lo em seu <em>shell</em>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ pyenv virtualenvwrapper</code></pre></div>\n<p>E agora sim, criar o seu ambiente virtual:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ pyenv shell 3.5.1\n$ mkvirtualenv test\nUsing base prefix &#39;/usr/local/opt/pyenv/versions/3.5.1&#39;\nNew python executable in /Users/klaus/.virtualenvs/test/bin/python3.5\nAlso creating executable in /Users/klaus/.virtualenvs/test/bin/python\nInstalling setuptools, pip, wheel...done.\nvirtualenvwrapper.user_scripts creating /Users/klaus/.virtualenvs/test/bin/predeactivate\nvirtualenvwrapper.user_scripts creating /Users/klaus/.virtualenvs/test/bin/postdeactivate\nvirtualenvwrapper.user_scripts creating /Users/klaus/.virtualenvs/test/bin/preactivate\nvirtualenvwrapper.user_scripts creating /Users/klaus/.virtualenvs/test/bin/postactivate\nvirtualenvwrapper.user_scripts creating /Users/klaus/.virtualenvs/test/bin/get_env_details</code></pre></div>\n<p>E \"esquecer\" do comando <code class=\"language-text\">pyenv</code> a partir do momento que você tem os seus <em>virtualenvs</em> criados:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ workon meu_projeto_em_py_27\n$ python -V\nPython 2.7.10\n\n$ workon test\n$ python -V\nPython 3.5.1</code></pre></div>\n<h2>Considerações finais</h2>\n<p>O <em>Pyenv</em> é, assim como o <em>virtualenv</em>, aquele tipo de ferramenta que te mantém são e salvo\nquando a sua necessidade é trabalhar com versões completamente diferentes do <em>Python</em>.</p>\n<p>Infelizmente, o seu uso com o <em>virtualenvwrapper</em> não é lá tão <em>smooth</em> (mas está longe de\nser complicado). Para facilitar a vida, talvez adicionar o comando <code class=\"language-text\">pyenv virtualenvwrapper</code>\nao seu <code class=\"language-text\">.bash_profile</code> ou <code class=\"language-text\">.zshrc</code> seja uma dica interessante.</p>\n<p>Ou ainda, você pode utilizar o <em>virtualenvwrapper</em> para os\nprojetos <em>Python</em> 2.7.x, e o <a href=\"https://docs.python.org/3/library/venv.html\" title=\"Creation of virtual environments in Python 3\"><em>pyvenv</em></a>\npara projetos > 3.2.</p>\n<p>Até a próxima.</p>\n<h2>Referências</h2>\n<ul>\n<li><a href=\"https://github.com/yyuu/pyenv\"><em>Pyenv - Simple Python version management</em></a></li>\n<li><a href=\"https://github.com/yyuu/pyenv-virtualenvwrapper\"><em>Pyenv-virtualenvwrapper - An alternative approach to manage virtualenvs from pyenv</em></a></li>\n<li><a href=\"https://blog.shichao.io/2014/10/01/setup_virtualenvwrapper_with_pyenv_using_pyenv_virtualenvwrapper.html\"><em>Schichao's Blog - Setting up virtualenvwrapper with pyenv using pyenv-virtualenvwrapper</em></a></li>\n<li><a href=\"http://taoofmac.com/space/blog/2015/10/03/1245\"><em>The Tao of Mac - Using Pyenv with El Capitan</em></a></li>\n</ul>","excerpt":"Num certo dia, eu resolvi deixar a preguiça de lado e atualizar\na versão do Mac OS X para o El Capitan. Na cara e coragem,\ne dotado de uma…","frontmatter":{"date":"2016-04-26T09:53:00.000Z","title":"O simples e poderoso Pyenv","tags":["python","pyenv","virtualenv","virtualenvwrapper","macosx"],"thumbnail":{"childImageSharp":{"fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGQABAQEAAwAAAAAAAAAAAAAAAAIBAwQF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAfdnhmO4lW4FA//EABsQAQACAgMAAAAAAAAAAAAAAAECEQAQAxIx/9oACAEBAAEFAlwdTZ9l5Lj5WUa//8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFhEAAwAAAAAAAAAAAAAAAAAAAREg/9oACAECAQE/AWI//8QAHBAAAQMFAAAAAAAAAAAAAAAAAAIQIREgMVGx/9oACAEBAAY/AieNROCN2//EAB8QAQACAgAHAAAAAAAAAAAAAAEAESExEFFhcZGxwf/aAAgBAQABPyGjFPiKOz24NW5Fr6iK1DZ+RLnzZS9TpQK1P//aAAwDAQACAAMAAAAQqw8A/8QAFREBAQAAAAAAAAAAAAAAAAAAICH/2gAIAQMBAT8Qo//EABYRAQEBAAAAAAAAAAAAAAAAAAEgMf/aAAgBAgEBPxBDWP/EAB4QAQACAQQDAAAAAAAAAAAAAAEAESExQVHBcZGh/9oACAEBAAE/EBeSps2JDh5SDYOc8xuACAv07hkQ5Be/TeWDXR9YqlCusAujlt8wBQotZ//Z","width":180,"height":180,"src":"/static/de5b2b09a11b88e9a65fbe5cb6a5a6a7/a8ad2/pyenv.jpg","srcSet":"/static/de5b2b09a11b88e9a65fbe5cb6a5a6a7/a8ad2/pyenv.jpg 1x"}},"publicURL":"/static/de5b2b09a11b88e9a65fbe5cb6a5a6a7/pyenv.jpg"}},"fields":{"readingTime":{"minutes":4.265},"slug":"/2016/04/26/o-simples-e-poderoso-pyenv.html"}},"site":{"siteMetadata":{"author":{"name":"Klaus Peter Laube","gravatar":"https://en.gravatar.com/userimage/12163112/d3ae0c6239980b01ff1f1730b65c2ebe.jpg"},"siteUrl":"https://klauslaube.com.br"}}},"pageContext":{"slug":"/2016/04/26/o-simples-e-poderoso-pyenv.html"}}}