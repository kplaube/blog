{"componentChunkName":"component---src-templates-blog-post-js","path":"/2016/02/22/vivendo-sem-o-grunt.html","result":{"data":{"markdownRemark":{"html":"<p>No meu primeiro contato com o <em>Grunt</em>, ele não me convenceu. Qual era a\nnecessidade de um <em>task runner</em> se eu já tinha o <code class=\"language-text\">Makefile</code>? O mesmo valia\npara o <em>build</em> de estáticos... <em>Frameworks</em> como o <em>Django</em> já possuíam um\n<em>pipeline</em> de concatenação e minificação, não sendo necessário que um processo\nexterno interferisse em algo que (até então) funcionava muito bem.</p>\n<p>Foi ao trabalhar com <em>Single Page Applications</em> que o <em>Grunt</em> me conquistou.\nCoisas que iam da otimização de imagens a deploy para ambientes passaram a\nser responsabilidade da ferramenta, e a partir desse momento eu a carreguei\npara todo projeto que participei.</p>\n<p>Mas o <em>Grunt</em> não é \"bala de prata\". Se para determinados problemas ele funciona\nmuito bem, para outros ele representa um \"peso\" questionável na sua <em>stack</em>. Aumentando\ntempo de desenvolvimento (alguém aí já sofreu com o <code class=\"language-text\">grunt-contrib-watch</code>?),\n<em>build</em> e <em>setup</em> do seu ambiente.</p>\n<p>É baseado nesse contexto que <a href=\"https://www.google.com.br/search?q=stop%20using%20grunt&#x26;oq=stop%20using%20grunt&#x26;aqs=chrome..69i57j0l5.1498j0j7&#x26;sourceid=chrome&#x26;es_sm=91&#x26;ie=UTF-8\" title=\"Stop using Grunt\">faço coro com alguns <em>developers</em> espalhados por aí</a>:\nTalvez o seu projeto não precise do <em>Grunt</em>.</p>\n<h2>O que há de errado com o ele?</h2>\n<p><strong>Nada!</strong></p>\n<p><em>Grunt</em>, <em>Gulp</em>, <em>Brocolli</em>, <em>Brunch</em>, etc. são ferramentas super bacanas que\ncumprem com louvor o seu objetivo. Só que assim como o <em>jQuery</em>, para\ndeterminados casos elas podem ser \"too much\".</p>\n<p>Assim como há uma frente defendendo o <a href=\"http://www.codemag.com/article/1501101\" title=\"Why Micro JavaScript Library Should Be Used in Your Next Application\">uso de <em>microlibs</em></a>\nao invés de <em>fat frameworks</em>, há uma frente defendendo o uso do <a href=\"http://www.sitepoint.com/guide-to-npm-as-a-build-tool/\" title=\"Give Grunt the Boot! A Guide to Using npm as a Build Tool\"><em>NPM</em> como ferramenta de <em>build</em></a>.\nE por mais que possa parecer \"<a href=\"https://www.youtube.com/watch?v=tSUtPkJhvOU\" title=\"Chora mais\">mimimi</a>\",\nalguns argumentos fazem certo sentido. Como por exemplo, o do\n<em>Keith Cirkel</em> no \"<a href=\"http://blog.keithcirkel.co.uk/why-we-should-stop-using-grunt/\" title=\"Você deveria parar de usar Grunt\">Why we should stop using Grunt &#x26; Gulp</a>\":</p>\n<blockquote>\n<p>None of these build tools work without plugins. Just found an awesome new\ntool which will revolutionise your build process? Great! Now just wait for\nsomeone to write a wrapper for Grunt/Gulp/Brocolli, or write it yourself.\nRather than just learning the command line for the tool you want to use,\nyou now have to learn its programatic API, plus the API for your build tool.</p>\n</blockquote>\n<p><em>Flamewars</em> e \"discursos de ódio\" à parte, a pergunta que fica é: Será que é tão difícil assim\nmontar um <em>pipeline</em> de <em>build</em> sem o uso de <em>Grunt</em> e <em>Gulp</em>?</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 610px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8652d59b005c92b42347b9272cb2622d/073a0/king-baratheon.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.1875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAMBAgQF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAQD/2gAMAwEAAhADEAAAAdXGUoZLEf/EABsQAAICAwEAAAAAAAAAAAAAAAECAyEAERIx/9oACAEBAAEFAutLI4dTeNIxDUB5/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGRABAAIDAAAAAAAAAAAAAAAAAQAQAlFh/9oACAEBAAY/AnLRO0C3/8QAGxABAAIDAQEAAAAAAAAAAAAAAQARITFhQVH/2gAIAQEAAT8hy42MCP3b2IpwqN0qeAmvBP/aAAwDAQACAAMAAAAQuw//xAAWEQADAAAAAAAAAAAAAAAAAAABEDH/2gAIAQMBAT8QEX//xAAVEQEBAAAAAAAAAAAAAAAAAAAQMf/aAAgBAgEBPxCn/8QAGxABAAMBAQEBAAAAAAAAAAAAAQARITFxQeH/2gAIAQEAAT8QDaBU+ENjdy3uD9mxXDiKBX5ffYwABdWMUWa+z//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"&quot;Nem todo mundo gosta de Javalis (br.ign.com)&quot;\"\n        title=\"Nem todo mundo gosta de Javalis (br.ign.com)\"\n        src=\"/static/8652d59b005c92b42347b9272cb2622d/073a0/king-baratheon.jpg\"\n        srcset=\"/static/8652d59b005c92b42347b9272cb2622d/7809d/king-baratheon.jpg 192w,\n/static/8652d59b005c92b42347b9272cb2622d/4ecad/king-baratheon.jpg 384w,\n/static/8652d59b005c92b42347b9272cb2622d/073a0/king-baratheon.jpg 610w\"\n        sizes=\"(max-width: 610px) 100vw, 610px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Nem todo mundo gosta de Javalis (br.ign.com)</figcaption>\n  </figure></p>\n<p>Ter uma ferramenta a menos na <em>stack</em> do projeto pode tornar-ser um diferencial\nao reduzir atrito e curva de aprendizado. Mas tirar o <em>Grunt</em> da jogada não\nsignifica necessariamente ter menos complexidade no seu projeto...\nApenas significa fazer a mesma coisa com uma dependência a menos.</p>\n<h2>NPM como ferramenta de build</h2>\n<p>O <em><a href=\"https://www.npmjs.com/package/livereload\" title=\"LiveReload server\">Livereload</a></em>\né uma biblioteca escrita em <em>Node</em> que levanta um servidor que monitora alterações\nno seu projeto e promove um <em>refresh</em> no navegador <em>web</em>.</p>\n<p>Podemos executá-lo através da linha de comando:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ livereload meuprojeto/static/css</code></pre></div>\n<p>É possível usar o <code class=\"language-text\">package.json</code> como um \"centralizador\" de operações, assim\ncomo fazemos com o nosso <code class=\"language-text\">Makefile</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ npm run livereload</code></pre></div>\n<p>Para tanto, no arquivo <code class=\"language-text\">package.json</code>, precisamos adicionar a chave <code class=\"language-text\">scripts</code>\ncom as instruções de execução para o comando <code class=\"language-text\">livereload</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// package.json</span>\n\n<span class=\"token operator\">...</span>\n<span class=\"token string\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"livereload\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"livereload meuprojeto/static/css\"</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">...</span></code></pre></div>\n<p>Talvez haja a necessidade da execução de um comando mais complexo. Para isso,\npodemos utilizar um <em>script</em> <em>Node</em> como ajuda:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// build/livereload.js</span>\n\n<span class=\"token keyword\">var</span> livereload <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"livereload\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> <span class=\"token constant\">PATH_CSS</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"meuprojeto/build/static/css\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> <span class=\"token constant\">PATH_JS</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"meuprojeto/build/static/js\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> server <span class=\"token operator\">=</span> livereload<span class=\"token punctuation\">.</span><span class=\"token function\">createServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nserver<span class=\"token punctuation\">.</span><span class=\"token function\">watch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token constant\">PATH_CSS</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">PATH_JS</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>E o nosso arquivo de configuração ficaria assim:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// package.json</span>\n\n<span class=\"token operator\">...</span>\n<span class=\"token string\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"livereload\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"node buid/livereload\"</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">...</span></code></pre></div>\n<p>Vale lembrar que o <code class=\"language-text\">npm</code> já possui alguns comandos padrões, que não necessitam\nda instrução <code class=\"language-text\">run</code>. Por exemplo, temos a execução de testes através do comando <code class=\"language-text\">npm test</code>.</p>\n<h3>Um exemplo mais complexo</h3>\n<p>O exemplo acima é simples e questionável. Vamos partir de uma necessidade\nmais palpável e complexa: Quero compilar componentes escritos em <em>React</em> e <em>ES6</em>.</p>\n<p>Para ilustrar, usaremos as bibliotecas <em><a href=\"https://facebook.github.io/react/\" title=\"A Javascript library for building UI\">React</a></em>,\n<em><a href=\"https://github.com/babel/babelify\" title=\"Browserify transform for Babel\">Babelify</a></em> e\n<em><a href=\"https://github.com/mishoo/UglifyJS2\" title=\"JavaScript parser / mangler / compressor / beautifier toolkit\">UglifyJS</a></em>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ npm install react --save\n$ npm install babelify babel-preset-react babel-preset-es2015 uglify-js --save-dev</code></pre></div>\n<p>Podemos criar dois comandos diferentes na nossa chave <code class=\"language-text\">scripts</code>, um para\n<em>transpiling</em> de <em>Javascript</em> e outro para minificação:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// package.json</span>\n\n<span class=\"token string\">\"compile-js\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"browserify meuprojeto/js/script.js -o meuprojeto/build/static/js/bundle.js -t [ babelify --presets [ es2015 react ] ]\"</span><span class=\"token punctuation\">,</span>\n\n<span class=\"token string\">\"minify-js\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"uglifyjs meuprojeto/build/static/js/bundle.js -o meuprojeto/build/static/js/bundle.min.js\"</span></code></pre></div>\n<p>Grande demais? É possível isolar esses comandos em <em>scripts</em>, como no exemplo do <em>livereload</em>:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// package.json</span>\n\n<span class=\"token string\">\"compile-js\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"node build/compile-js\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token string\">\"minify-js\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"node build/minify-js\"</span></code></pre></div>\n<p>Para tornar mais simples a execução, vamos criar uma <em>task</em> genérica de <em>build</em>:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// package.json</span>\n\n<span class=\"token string\">\"compile-js\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"node build/compile-js\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token string\">\"minify-js\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"node build/minify-js\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token string\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run compile-js &amp;&amp; npm run minify-js\"</span></code></pre></div>\n<p>Com uma ajudinha da <em>lib</em> <em><a href=\"https://www.npmjs.com/package/watch\" title=\"Utilities for watching file trees\">Watch</a></em>,\npodemos incrementar ainda mais o nosso processo:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// package.json</span>\n\n<span class=\"token operator\">...</span>\n<span class=\"token string\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"compile-js\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"node build/compile-js\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"minify-js\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"node build/minify-js\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run compile-js &amp;&amp; npm run minify-js\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"watch\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"watch 'npm run build' meuprojeto/static/js\"</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">...</span></code></pre></div>\n<p>Pronto! Agora temos os comandos <code class=\"language-text\">npm run build</code> e <code class=\"language-text\">npm run watch</code> que nos ajudarão na demanda\nde \"transpilar\" e minificar componentes escritos em <em>React</em>.</p>\n<p>Não foi tããããão difícil assim... Certo? Bastou abrir a documentação de\ncada ferramenta e perder alguns minutinhos lendo.</p>\n<p>\"Mas você teve que escrever mais linhas que escreveria utilizando um <em>plugin</em>\ndo <em>Grunt</em>.\"</p>\n<p>Possivelmente. Bem como é possível que eu nunca mais vá mexer nessas linhas escritas,\numa vez que o processo já esteja montado e operacional.</p>\n<h2>Considerações finais</h2>\n<p>O mérito dos exemplos acima não está necessariamente na utilização do <code class=\"language-text\">npm</code>\ncomo ferramenta de <em>build</em>, mas sim nos incríveis pacotes que a comunidade\n<em>Javascript</em> tem construído para agilizar a construção de aplicações.</p>\n<p>Ferramentas como o <em>Grunt</em>, em seu tempo, fizeram uma revolução no que tange o\ndesenvolvimento de aplicações <em>web</em> (e não há dúvida que ainda o fazem).\nMas com o advento do <em>webpack</em>, <em>Browserify</em> e <em>PostCSS</em>,\no seu uso passou de essencial para opcional.</p>\n<p>Até a próxima.</p>\n<h2>Referências</h2>\n<ul>\n<li><a href=\"https://addyosmani.com/blog/prosconsmicroframeworks/\">Addy Osmani: The Pros And Cons Of JavaScript Micro-Frameworks</a></li>\n<li><a href=\"http://engineering.hobsons.com/2015/06/26/build-tools-vs-npm-scripts-why-not-both/\">Hobsons Engineering: Build Tools vs npm Scripts: Why Not Both?</a></li>\n<li><a href=\"https://medium.com/@dabit3/introduction-to-using-npm-as-a-build-tool-b41076f488b0#.hc5o17p1p\">Nader Dabit: Introduction to Using NPM as a Build Tool</a></li>\n<li><a href=\"https://medium.com/@nickheiner/maybe-you-should-stop-using-grunt-40ac57fd6ad9#.cpc7pdvwr\">Nick Heiner: Maybe you should stop using Grunt</a></li>\n<li><a href=\"http://blog.keithcirkel.co.uk/why-we-should-stop-using-grunt/\">Keith Cirkel: Why we should stop using Grunt &#x26; Gulp</a></li>\n<li><a href=\"http://lucasmreis.github.io/blog/npm-is-an-amazing-build-tool/\">Lucas M Reis: NPM is an amazing build tool (And solves 90% of the build issues)</a></li>\n<li><a href=\"http://www.sitepoint.com/guide-to-npm-as-a-build-tool/\">Sitepoint: Give Grunt the Boot! A Guide to Using npm as a Build Tool</a></li>\n<li><a href=\"http://stackoverflow.com/questions/28503800/grunt-is-extremely-slow-100-cpu\">Stackoverflow: Grunt is extremely slow - 100% CPU</a></li>\n<li><a href=\"http://stackoverflow.com/questions/29244671/less-compiling-slow-with-grunt\">Stackoverflow: Less compiling slow with Grunt</a></li>\n</ul>","excerpt":"No meu primeiro contato com o Grunt, ele não me convenceu. Qual era a\nnecessidade de um task runner se eu já tinha o ? O mesmo valia\npara o…","frontmatter":{"date":"2016-02-22T12:35:00.000Z","title":"Vivendo sem o Grunt","tags":["desenvolvimento-web","javascript","node","npm","grunt"],"thumbnail":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC6klEQVQ4y41Ua0hTYRg2gpDEWzo5uxCEGBT9Kco/XX7FSIp+JFhUUD8sCyqSvLRp4XA2b83mWl7QvMw5Xdt0SdgMKjPyjzWyNGSzy5ipJHlPc+ecp3OcW1O3uQfe853vPd/3nPf73ocnBF6gadozut83mnvnWYT4WkSRJEjnEiiKXM5RFOXKMyMb7DeSJH2Shqyu0P0IHkFV2N3ZitYKMWyDHzAzM4PqsnwU5lyDw/4d9uEv0FXl4kVbPVNtgAq9CTv0akhPhkKRugPiq8lI3h+KlMStuH3lFMrSdqPgxCboG1Weq9iQ8H1PBwrPJ0CcxEG/LBqLLTwsaHmwlsXgznEOpCnb8c6s8dyTX0IW0/Mk1KJE/FGHYVAhwIBcABgIwEhgSMHHx/t8LGmj0HQrHhOTc4GbwnaPRftjKV6JQjFYwoNTw8FoFQ+OCh5IbRyGSgm8yQmDUZXuIqNIPxWu3MfIzzEYcg/haVYcpHfzoMvex5DFMqRxMGbvQqEkHy3pApjEe2Gz2jxyWkfoTtqsVtRdjseUKgp95UKUX9oL+6NYjNdwoEzdg94HSZiqiIEmjY9+S9/KXtL3kd2kw19/oEUkxN+acNBaApSOCycTtJaJ+gjosw/i0+eBddX57DJFOpfnzxuKYS8Nx5RGgLkmAovNXPxW8zFWHonOShHYVTSzlg4kGxaLC/NQlUqguHEUtnthsBQzXW5jumziwlLCx7eicFTfPIISSRbmZ6cD65DF5MQ4GirleNuphfL6YZgyo9EvJ2BhutuVsw3ytAPoeaZG7cMi/BobCU7Y5nYNDE900MhOo+hsBF5KeOiVcVF8LhLqvGMw6g3oaK117QtsDrTHHPQNSqQLt6DxYgRm6whGjwSaU6OQIdyMemV+cOawdkFvdxd0sgswZ+6EOSMB+oIzeG02eZFRG9nXf1KPBzLhYMTuGBnF0so+ao3B+iVc9TdmJFkJ0d46c+X8ubVPQl8Wzx7NFb6r8sY/0EZ3yoH3mwIAAAAASUVORK5CYII=","width":180,"height":180,"src":"/static/4ef409197b3ff711554d24176775dbe4/d8216/grunt-logo.png","srcSet":"/static/4ef409197b3ff711554d24176775dbe4/d8216/grunt-logo.png 1x"}},"publicURL":"/static/4ef409197b3ff711554d24176775dbe4/grunt-logo.png"}},"fields":{"readingTime":{"minutes":5.63},"slug":"/2016/02/22/vivendo-sem-o-grunt.html"}},"site":{"siteMetadata":{"author":{"name":"Klaus Peter Laube","gravatar":"https://en.gravatar.com/userimage/12163112/d3ae0c6239980b01ff1f1730b65c2ebe.jpg"},"siteUrl":"https://klauslaube.com.br"}}},"pageContext":{"slug":"/2016/02/22/vivendo-sem-o-grunt.html"}}}