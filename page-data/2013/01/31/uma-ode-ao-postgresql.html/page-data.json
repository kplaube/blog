{"componentChunkName":"component---src-templates-blog-post-js","path":"/2013/01/31/uma-ode-ao-postgresql.html","result":{"data":{"markdownRemark":{"html":"<p>O <a href=\"http://www.mysql.com/\" title=\"Leia mais sobre o MySQL na página oficial do projeto\"><em>MySQL</em></a> é um dos meus mais leais companheiros de\nprojetos, desde os meus tempos de <a href=\"/tag/php.html\" title=\"Leia mais sobre PHP\"><em>PHP</em></a> até projetos mais recentes\ncom o <a href=\"/tag/python.html\" title=\"Leia mais sobre Python\"><em>Python</em></a>. A sua agilidade e facilidade são indiscutivelmente\nboas, tanto que renderam ao projeto um “domínio global” no ramo.</p>\n<p>Hoje, sob “cuidados” da <a href=\"http://www.oracle.com/\" title=\"Página oficial da Oracle\"><em>Oracle</em></a>, o projeto tem causado <a href=\"http://www.infoq.com/br/news/2012/08/oracle-mysql-preocupa#.UDfedu0QkJA.twitter\" title=\"MySQL será fechado?\">certas desconfianças</a>.\nA criação de <a href=\"https://mariadb.org/pt-br/\" title=\"Conheça o MariaDB\">um <em>fork</em></a> pelo autor original não\najudou, e isso <a href=\"http://br-linux.org/2013/mais-um-opensuse-confirma-que-vai-abandonar-mysql-e-adotar-mariadb/\" title=\"OpenSUSE deixa o MySQL\">abriu margem</a> para um velho, confiável e simpático\nbanco de dados: o <a href=\"http://www.postgresql.org/\" title=\"Página oficial do projeto\"><em>Postgres</em></a>.</p>\n<p>Qual o motivo de começar um <em>post</em> sobre o <em>Postgres</em> falando do\n<em>MySQL</em>? Eu sempre me apoiei na “facilidade de uso” na hora de escolher\nentre os dois, e só recentemente me “obriguei” a experimentar o\n<em>Postgres</em> em alguns projetos. O resultado foi a total satisfação com a\nexperiência, e a (surpreendente) conclusão que ele é tão fácil de mexer\nquanto o seu concorrente.</p>\n<h2>O que há de especial no Postgres?</h2>\n<p>O <em>Postgres</em> está sob a licença <a href=\"http://www.postgresql.org/about/licence/\" title=\"Leia mais sobre a licença PostgreSQL\"><em>PostgreSQL License</em></a>, muito similar\na <em>BSD</em> e <em>MIT</em>, que nos permite o livre uso, cópia, modificação e\ndistribuição. Assumidamente o “banco de dados <em>open source</em> mais\navançado do mundo”, ele é conhecido pela sua estabilidade, servindo\n<a href=\"http://www.postgresql.org/about/users/\" title=\"Conheça alguns projetos relevantes que utilizam o Postgres\">projetos de larga escala em todo o mundo</a>. Embora eu nunca pude por à\nprova a sua confiabilidade e escalabilidade, o fato de ele ser usado\ncomo <a href=\"https://postgres.heroku.com/postgres\" title=\"Why Postres\">banco relacional pelo <em>Heroku</em></a> apresenta credenciais o\nsuficiente.</p>\n<p>Entre as <a href=\"http://www.postgresql.org/about/featurematrix/\" title=\"Feature Matrix\">diversas funcionalidades do <em>Postgres</em></a>, o suporte a\noperações assíncronas, o <a href=\"http://www.postgresql.org/docs/9.2/static/textsearch.html\" title=\"Leia mais sobre na documentação do Postgres\"><em>Full Text Search</em></a> e o <a href=\"http://postgis.refractions.net/\" title=\"Leia mais sobre PostGIS\"><em>PostGIS</em></a> se\nmostraram um bom diferencial para mim. Este último na verdade trata-se\nde uma extensão do <em>Postgres</em> (comprovando outra característica valiosa\ndo banco, a extensibilidade), e tive a oportunidade de utilizá-lo em um\nprojeto recente com <a href=\"/tag/python.html\" title=\"Leia mais sobre Python\"><em>Python</em></a> e <a href=\"/tag/django.html\" title=\"Leia mais sobre Django\"><em>Django</em></a>. Embora a sua\nimplantação não tenha sido tão trivial quanto o esperado, o resultado\natendeu completamente as expectativas.</p>\n<p>Outro ponto que acho muito bacana no projeto, é o seu <a href=\"http://www.postgresql.org/docs/9.2/static/features.html\" title=\"SQL Conformance\">compromisso em seguir o padrão <em>SQL</em></a>.\nAtualmente (versão 9.2), o <em>Postgres</em> se\ncompromete em atender o padrão <em>ANSI-SQL: 2008</em>. Acho muito bacana esse\ncompromisso, principalmente se formos levar em consideração a\n<a href=\"http://en.wikibooks.org/wiki/SQL_dialects_reference\" title=\"SQL dialects\">quantidade de dialetos <em>SQL</em></a> que temos hoje em dia.</p>\n<p>Junte isso tudo a facilidade de uso, e temos uma excelente ferramenta à\nnossa disposição. Ainda não está satisfeito? Então vamos falar um pouco\nsobre uma das características mais marcantes (e discutidas) do\n<em>Postgres</em>: O modelo objeto-relacional.</p>\n<h2>Objeto-Relacional?</h2>\n<p>A definição de banco de dados objeto-relacional da <a href=\"http://pt.wikipedia.org/wiki/Banco_de_dados_objeto-relacional\" title=\"Leia mas sobre Objeto-Relacional na Wikipedia\"><em>Wikipedia</em></a> é a\nseguinte:</p>\n<blockquote>\n<p>(...) é um sistema de gerenciamento de banco de dados\n(SGBD) semelhante a um banco de dados\nrelacional, porém com um modelo de banco de dados orientado a objetos:\nobjetos, classes e herança são suportados diretamente nos esquemas do\nbanco de dados e na linguagem de consulta. Além disso, ele suporta\nextensão do modelo de dados com a personalização de tipos de dados e\nmétodos.</p>\n</blockquote>\n<p>Basicamente, um banco de dados objeto-relacional armazena os seus dados\nde forma “relacional”, mas é capaz de abstrair o seu acesso através de\nobjetos, possibilitando assim a construção de operações mais complexas\nque podem envolver conceitos da orientação a objetos. No <em>Postgres</em>,\ntabelas, relacionamentos, restrições e <em>triggers</em> são considerados\nobjetos.</p>\n<p>Mas não são os “objetos” que vemos nas linguagens de programação. O\ntermo “objeto” aqui é um pouco diferente (e eu diria até limitado),\nembora podemos encontrar <a href=\"http://www.postgresql.org/docs/9.2/static/ddl-inherit.html\" title=\"Leia mais sobre herança de tabelas no Postgres\">heranças</a>, <a href=\"http://www.postgresql.org/docs/9.2/static/extend-type-system.html#EXTEND-TYPES-POLYMORPHIC\" title=\"Leia mais sobre tipos polimórficos no Postgres\">polimorfismo</a> e <a href=\"http://stackoverflow.com/questions/5625585/sql-postgres-oids-what-are-they-and-why-are-they-useful\" title=\"Saiba mais sobre os OIDs\">object ids</a>.\nNo caso do <em>Postgres</em>, o “objeto” de “objeto-relacional” está\nligado a todos os aspectos citados anteriormente, mais a organização dos\n“recursos”, como na utilização de <a href=\"http://www.postgresql.org/docs/9.2/static/ddl-schemas.html\" title=\"Leia mais sobre Schemas no Postgres\"><em>schemas</em></a>, e na criação de tipos e\nmanipulação de dados complexos.</p>\n<p>Ou seja, você não verá uma notação como essa em uma <em>query</em>:</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token function\">NOW</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to_char<span class=\"token punctuation\">(</span><span class=\"token string\">'HH12:MI:SS'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>E sim, a notação utilizando funções:</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> to_char<span class=\"token punctuation\">(</span><span class=\"token function\">NOW</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'HH12:MI:SS'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Mas em compensação, você verá que <strong>to_char</strong> é uma <a href=\"http://www.postgresql.org/docs/8.3/static/xfunc-sql.html#AEN40446\" title=\"Leia mais sobre funções polimórficas no Postgres\">função polimórfica</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> to_char<span class=\"token punctuation\">(</span><span class=\"token number\">10.3333333</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'99.99'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Se você não está satisfeito, e não se sente confortável com o termo\n“objeto” usado pelo <em>Postgres</em>, fique tranquilo… <a href=\"http://www.postgresql.org/message-id/1335420139.28653.59.camel@jdavis\" title=\"Devemos parar de usar o termo objeto no Postgres?\">mais pessoas carregam esta angústia</a>.\n<em>Michael Stonebraker</em> criou <a href=\"http://www.service-architecture.com/object-oriented-databases/articles/stonebrakers_dbms_matrix.html\" title=\"Stonebraker&#x27;s DBMS Matrix\">um esquema para identificar um <em>ORDBMS</em></a>,\ne partindo dele sou obrigado a concordar que\no <em>Postgres</em> é de fato um banco objeto-relacional quando me deparo com o\nseguinte cenário:</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TYPE</span> inventory_item <span class=\"token keyword\">AS</span> <span class=\"token punctuation\">(</span>\n    name            <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n    supplier_id     <span class=\"token keyword\">integer</span><span class=\"token punctuation\">,</span>\n    price             <span class=\"token keyword\">numeric</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> on_hand <span class=\"token punctuation\">(</span>\n    item      inventory_item<span class=\"token punctuation\">,</span>\n    count     <span class=\"token keyword\">integer</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">INTO</span> on_hand <span class=\"token keyword\">VALUES</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">ROW</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fuzzy dice'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">42</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.99</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">INTO</span> on_hand <span class=\"token keyword\">VALUES</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">ROW</span><span class=\"token punctuation\">(</span><span class=\"token string\">'cards'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">42</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6.99</span><span class=\"token punctuation\">)</span>::inventory_item<span class=\"token punctuation\">,</span> <span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Uma manipulação complexa, com tipos criados pelo próprio usuário,\nutilizando <em>queries</em>.</p>\n<h2>Considerações finais</h2>\n<p>O <em>Postgres</em> é poderoso! Disso eu não tinha dúvidas. Mas ficar mais\npróximo do banco me fez perceber o quanto ele pode agregar ao projeto.\nSe em um próximo projeto você estiver em dúvida, e achar que a\nutilização dele pode ser complicada, eu recomendo que experimente.</p>\n<p>Até a próxima…</p>\n<h2>Referências</h2>\n<ul>\n<li><a href=\"http://ledgersmbdev.blogspot.com.br/2012/08/intro-to-postgresql-as-object.html\" title=\"Leia mais sobre o modelo objeto-relacional do Postgres\"><em>Perspectives on LedgerSMB – O/R Modelling Part 1: Intro to PostgreSQL as Object-Relational Database Management System</em></a></li>\n<li><a href=\"http://ledgersmbdev.blogspot.com.br/2012/10/three-approaches-to-object-relational.html\" title=\"Leia o comparativo do approach de Postgres e Oracle em relação ao termo Object-Relational\"><em>Perspectives on LedgerSMB – Three Approaches to Object-Relational Databases: PostgreSQL, Oracle, and Informix</em></a></li>\n<li><a href=\"http://www.postgresql.org/about/\" title=\"Leia tudo sobre o Postgres\"><em>PostgreSQL – About</em></a></li>\n<li><a href=\"http://www.service-architecture.com/object-oriented-databases/articles/stonebrakers_dbms_matrix.html\" title=\"Conheça a linha tênue que separa um ORDBMS de um ODBMS\"><em>Web Services and Service-Oriented Architectures – Stonebraker’s DBMS Matrix</em></a></li>\n<li><a href=\"http://www.wikivs.com/wiki/MySQL_vs_PostgreSQL\" title=\"Veja um comparativo entre MySQL e PostgreSQL\"><em>WikiVS – MySQL vs. PostgreSQL</em></a></li>\n</ul>","excerpt":"O MySQL é um dos meus mais leais companheiros de\nprojetos, desde os meus tempos de PHP até projetos mais recentes\ncom o Python. A sua…","frontmatter":{"date":"2013-01-31T20:39:21.000Z","title":"Uma ode ao PostgreSQL","tags":["banco-de-dados","ambiente-de-desenvolvimento","postgres","objeto-relacional"],"thumbnail":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAD30lEQVQ4y4WV+09TZxzG+3cs2y9L5tAhc3NbzDIXF5ZlyxLZRbN4Q5Gp0xhuLgqyYiktvdGe9rRlUNrSUsCKBQFlIuIyxlCgTLf9YMaGIiNxijLCTxBun73nbIVCnHuSnp6+7znP+32+l6eapaUlFCjfi4uLrMUST8fCwgLJHJrETQJ/TU4yNnqXB3/eZ2F+nkWxN/7HGHd+H2ZUrA/F48T7+/jpZpyJiYmVg//l0CRuZmdniYRrqXBImCQvVsmNS5apqvRgtrsotcrInkoijVFOGD2U2CoxW21EGyLqocsRJmT6fVUU2Xx8qo/y3qla3vkygPdCL+ZIJ++erCX9ZJCMknrszTewxq6zJaeaXeVNFFu94lDvaslj90YxWh1k6KK8sNfMS1kVbMv7moqmHlIO2Ek7aGfT5w5Sxfrzu8sp8LZzpraTZ3bo2WGMoTOYuXtn5B/JyuXW0CBaIeHNXB+vf+EiJdNGrruNY84WQSSx6ZDE5iMusSfz6mGnuu/vGOATbYit+T70FifDv95eIVQSrLV6eCvfz2bxwouZVgyRbhq7bxLr+YWyum5SRZSvCOL0E9U0iPWu+DBH7DHeLwphslh5+PDBCuE9UT2jTeKD02FeFtJS9tvQ110l0xTlw8IAwW8G2ZZfJdJh4ZjUwqnqDvI8bew1nSOzLIzb6Vidw5mZGSSHg92GRjaKSDYcqEAb7GSnLsJznxlFvq7w0Vch1onIM4pDnPZf5nDFeY55OsjVu7jY2rzckxrloiASCpJjC5N2SFaTX95wTUTnZ90+C1Ksl/SCaiHZKQpmpzR8FWP9NeTWfrRn9ExOPl6JMEHY9/13ah7fLgiwXkSiSCuqFaTFdap8JQ1vHJVFSiS25njpH75PTbgRU7mBBIdKmGjs6elpzGYTB20xnt1ZxnZtPe6aMM2XughcHhJVdqoVfk10gaKgqfc21cE6LHYnWq2WkZGktkmc0BJrotDoZI+tHV/0IrLLSXmwjQs3fiPb2sR6EWVatoOPS+qIdg1QWtNKVSRGqU4nZE+ujF4iSmWE3LILvcFIXs5xHJU15OvsuD1esqzn1WKlihzuMpzFZrPhcUmci55V1anvi6nTJDtFAuPj48yI2R6KDzJw/Qe8bpk9hga1FzdmS+w31uNxu1a5TmKEV7lNcrTJuNTeyj5DvSp5Q5aDo5YIoYBP3Zubm3uyfa0lVT7zwr4UfNt9hUK5kS25fraLeVecpq+3Z5UfLtvXfxlnsuE+fvQIk9mCUQ5gdrhpEnlLfi5ZleZ/DHmZdGpqip9v/aia7VpTTcZTCZerv+avQfn9pGIq+Bt3SgdLbxPLLwAAAABJRU5ErkJggg==","width":180,"height":180,"src":"/static/55073cc41af37f71b1ce99606ef21fb1/d8216/postgresql-logo.png","srcSet":"/static/55073cc41af37f71b1ce99606ef21fb1/d8216/postgresql-logo.png 1x"}},"publicURL":"/static/55073cc41af37f71b1ce99606ef21fb1/postgresql-logo.png"}},"fields":{"readingTime":{"minutes":5.82},"slug":"/2013/01/31/uma-ode-ao-postgresql.html"}},"site":{"siteMetadata":{"author":{"name":"Klaus Peter Laube","gravatar":"https://en.gravatar.com/userimage/12163112/d3ae0c6239980b01ff1f1730b65c2ebe.jpg"},"siteUrl":"https://klauslaube.com.br"}}},"pageContext":{"slug":"/2013/01/31/uma-ode-ao-postgresql.html"}},"staticQueryHashes":["2831923220","4114525740"]}