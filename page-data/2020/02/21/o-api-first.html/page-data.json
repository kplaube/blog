{"componentChunkName":"component---src-templates-blog-post-js","path":"/2020/02/21/o-api-first.html","result":{"data":{"markdownRemark":{"html":"<p>Tratar <em>APIs</em> como \"first-class citizens\" pode ser um desafio e tanto, principalmente quando estamos em um contexto\nde entrega rápida ou de prova de conceito. Como desenvolvedor, admito que priorizo resolver a lógica de negócio\nescrevendo código, do que discutindo contratos ou requisitos não funcionais.</p>\n<h2>Code-First</h2>\n<p>O modelo de trabalho ilustrado acima pode ser conhecido por \"bottom up\", \"code first\", ou apenas por \"aquela forma que a gente\ngeralmente utiliza em nossos projetos\". Onde focamos primeiro no código, e\ndeixamos para depois questões relacionadas à integração dos componentes.</p>\n<p><em>Kirsten Hunter</em> <a href=\"https://www.programmableweb.com/news/introduction-to-api-first-design/analysis/2016/10/31\" title=\"Introduction to API-First Design\">ilustra bem os efeitos colaterais de tal prática</a>:</p>\n<blockquote>\n<p>APIs are created as an afterthought once the product has already been created as a tightly coupled system, with the frontend website and backend system entwined together in a highly codependent way and the REST API having to be ‘shoe-horned’ into this system as a separate entity.</p>\n</blockquote>\n<p>Não há nada fundamentalmente errado com essa dinâmica (inclusive, <a href=\"https://www.youtube.com/watch?v=Tb823aqgX_0\" title=\"Bottom Up vs Top Down Design in Clojure\">há opiniões a favor desse conceito</a>), mas com o mundo\ncada vez mais \"microservices-driven\", pensar primeiramente na interface e em quem irá usá-la pode antecipar problemas, diminuir riscos e definir contratos mais sólidos.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a9fdd4fffa4ffc01e8b677b38f1016e1/c08c5/captain-ux.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAwAF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAABx2BwJY//xAAbEAEAAQUBAAAAAAAAAAAAAAABAwACECExMv/aAAgBAQABBQINyCYkq/wc/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGRAAAQUAAAAAAAAAAAAAAAAAEAABAhEx/9oACAEBAAY/Ak16Yj//xAAdEAACAQQDAAAAAAAAAAAAAAAAAREQQWFxMYHB/9oACAEBAAE/IZINxsYNi6VLtnNx4KrD/9oADAMBAAIAAwAAABCDD//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAEDAQE/EIj/xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAgEBPxCq/8QAGxABAQACAwEAAAAAAAAAAAAAAREAITFBYYH/2gAIAQEAAT8QAhX3oGECjIGE0HH3GLnIesBqbgvkY6kLezP/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Capitão América levantando o martelo do Thor\"\n        title=\"Não faça o dev ser merecedor para utilizar a sua API (comicbookmovie.com)\"\n        src=\"/static/a9fdd4fffa4ffc01e8b677b38f1016e1/c08c5/captain-ux.jpg\"\n        srcset=\"/static/a9fdd4fffa4ffc01e8b677b38f1016e1/7809d/captain-ux.jpg 192w,\n/static/a9fdd4fffa4ffc01e8b677b38f1016e1/4ecad/captain-ux.jpg 384w,\n/static/a9fdd4fffa4ffc01e8b677b38f1016e1/c08c5/captain-ux.jpg 640w\"\n        sizes=\"(max-width: 640px) 100vw, 640px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Não faça o dev ser merecedor para utilizar a sua API (comicbookmovie.com)</figcaption>\n  </figure></p>\n<p>Não é raro escutarmos em pleno 2020 histórias sobre times distintos trabalhando em uma grande solução, que quando\ncolocaram seus serviços para funcionar juntos, descobriram uma série de problemas de integração (ou até mesmo que eles\nsimplesmente não resolviam o problema).</p>\n<h2>O que é API-First?</h2>\n<p><em>API-First</em> pode ser grosseiramente resumido em \"trate APIs como first-class citizens\".</p>\n<p>Em outras palavras, a proposta é que <em>APIs</em> sejam consideradas partes fundamentais\ndo ecossistema de um produto, devem ser parte de sua estratégia e construção,\ne não apenas um \"extra\" ou um \"side product\".</p>\n<p>O <em>DZone</em> define <em>API-First</em> da <a href=\"https://dzone.com/articles/an-api-first-development-approach-1\" title=\"An API-First Development Approach\">seguinte forma</a>:</p>\n<blockquote>\n<p>(...) is a strategy in which the first order of business is to develop an API that puts your target developer’s interests first and then build the product on top of it (be it a website, mobile application, or a SaaS software). By building on top of APIs with developers in mind, you and your developers are saving a lot of work while laying down the foundations for others to build on.</p>\n</blockquote>\n<p>Elas devem ser tão cruciais quanto usuários são em estratégias <em>user-centric</em> e a experiência\n<em>mobile</em> é em um <em>approach</em> <em>mobile-first</em>. Utilizar uma abordagem <em>api-centric</em>\nfará com que o <em>design</em> funcione de uma ótica diferente (possibilitando maior cuidado em relação\na consistência e reuso), e que o negócio gire em torno do contrato que está sendo definido (ocasionando\nmaior interação com outros <em>stakeholders</em> de forma antecipada, dentro do tempo de vida de desenvolvimento).</p>\n<h3>API-centric == Developer Experience</h3>\n<p>E se pararmos para analisar friamente o que essa ideia significa, ser <em>api-centric</em> é no fim das contas ser <em>user-centric</em> (ou <em>customer-centric</em>).</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 740px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6618483d0a44ba07fd0bef3b4e2e25c5/50383/thor-ux.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABpElEQVQY0x3QXW/TMBQG4LSxY8dJbMcfcdzYSdN26UbTdSsDNHWb2LhglZBACAlxAUjsikuEuGA/ZL+XFB3pvXt0znsCDFEMcRRGGGJB2efd5unnp8t+iZnS1mvX+roZxp2s2/VpYQrrGz+b04wqSgJCKAgjEAIYwhTF786PHj/cXK6OIKExoZzJ22fTX/uLRdukhVe6lKXj0iCAeBIH29OVsyWCB48jfFaX367Wu3VHhU5oXkrx8Wzx+/5F19aE62Y6b6YzEqdwDH3BAz+xzlqEyCgAw+WV4D/utn1TGVeXttJSr616c+KVLJKEuspJqRGIwBhOtAgWTnRebObKcDIaAYrjfuYKxkSa6YySKJ4KNpecxmkp8krnGSHDgw5YsuDLbf1wXz/sl6831VAjDIC3pS+NFuqi747rimPSGp0B3AjWOT6sHXA0jnhCgj9fb/5+v75+fty6gdg0LzNhUqZwkr/c9vvdOR5Da7RizBCiMwLDCIUHH0MUrLrZarl4e7UtpEq1Y8ZnucmYRIS1Tf3+7pVTYlbpvpUTjmNwkOh/kgj9Aw24L1AZyg+IAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Thor preocupado com o martelo\"\n        title=\"Não duvide da vontade do seu usuário. Ele vai descobrir um jeito de levantar o martelo (ibtimes.com)\"\n        src=\"/static/6618483d0a44ba07fd0bef3b4e2e25c5/50383/thor-ux.png\"\n        srcset=\"/static/6618483d0a44ba07fd0bef3b4e2e25c5/8514f/thor-ux.png 192w,\n/static/6618483d0a44ba07fd0bef3b4e2e25c5/804b2/thor-ux.png 384w,\n/static/6618483d0a44ba07fd0bef3b4e2e25c5/50383/thor-ux.png 740w\"\n        sizes=\"(max-width: 740px) 100vw, 740px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Não duvide da vontade do seu usuário. Ele vai descobrir um jeito de levantar o martelo (ibtimes.com)</figcaption>\n  </figure></p>\n<p>O usuário nesse caso passa a ser outro desenvolvedor (do mesmo time, da mesma empresa, ou de terceiros), portanto,\n<em>Developer eXperience</em> também é parte fundamental dessa estratégia, e vem embutida em sua prática, como ilustra o <a href=\"https://swagger.io/resources/articles/adopting-an-api-first-approach/\" title=\"Leia mais no Swagger.io\">\"Understanding the API-First Approach to Building Products\"</a>:</p>\n<blockquote>\n<p>Consumers of APIs are most often developers, and developer experience (DX) can make or break the success of an API. API first ensures that developers have positive experiences using your APIs. Well-designed, well-documented, consistent APIs provide positive developer experiences because it’s easier to reuse code and onboard developers, and it reduces the learning curve.</p>\n</blockquote>\n<h2>Os 3 princípios</h2>\n<p><em>Lars Trieloff</em>, no <a href=\"https://medium.com/adobetech\" title=\"Leia o blog de tecnologia da Adobe\"><em>Adobe Tech Blog</em></a>, escreve sobre\n<a href=\"https://medium.com/adobetech/three-principles-of-api-first-design-fa6666d9f694\" title=\"Veja mais no Adobe Tech Blog\">três princípios fundamentais para o sucesso da prática</a>,\nque acredito serem essenciais para compreender a real motivação por trás da ideia.</p>\n<h3>1. Your API is the first user interface of your application</h3>\n<p>Vale estressar esse ponto: Pessoas utilizando a sua <em>API</em> são os seus usuários, e a sua <em>API</em> precisa ser projetada com\nesses usuários em mente.</p>\n<p>Partindo do princípio que a <em>API</em> é o caminho mais importante de interação com o seu produto, isso significa que ela\ndeve ter um investimento de tempo equivalente (ou superior) ao tempo investido no desenvolvimento de (por exemplo) interfaces\ngráficas.</p>\n<h3>2. Your API comes first, then the implementation</h3>\n<blockquote>\n<p>Your implementation will change frequently, your API should not.</p>\n</blockquote>\n<p>Sua <em>API</em> se torna um contrato que servirá como especificação para a implementação, portanto, o ideal é pensarmos como\nduas coisas separadas. Conforme a sua aplicação for evoluindo é muito provável que a sua implementação mude, mas o\ncontrato deve (dentro do possível) manter-se o mesmo.</p>\n<h3>3. Your API is described (and maybe even self-descriptive)</h3>\n<p>Sua <em>API</em> precisa ser compreendida por pessoas que não estavam envolvidas em seu desenvolvimento. E aqui é difícil\nescaparmos da necessidade de documentação.</p>\n<p>E por documentação, é impossível deixar de questionar todo o esforço envolvido em ter uma documentação válida, atualizada,\ne que deveras é usável. Ferramentas estão disponíveis, e existem diferentes formas de automatizar esse processo. Tais\nferramentas servem não somente para a criação de documentação, mas também da especificação em si (que pode ser\ntambém consumida por uma máquina). Por exemplo, <a href=\"/tag/raml.html\" title=\"Leia mais sobre RAML\"><em>RAML</em></a> e\n<a href=\"/tag/swagger.html\" title=\"Leia mais sobre Swagger\"><em>Swagger</em></a>, já abordados no <em>blog</em>, são excelentes iniciativas para\nresolver essa questão.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 597px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6d899d82e151f549bbd384bd3b7ba1de/7aa7d/thor-ux-2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIDAQX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB42pSJCFf/8QAGRAAAwADAAAAAAAAAAAAAAAAAAERAhAh/9oACAEBAAEFApyzFjHr/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGRAAAgMBAAAAAAAAAAAAAAAAEBEAASFx/9oACAEBAAY/AtiRrg//xAAZEAACAwEAAAAAAAAAAAAAAAAAARARMWH/2gAIAQEAAT8hboOmuxjEd6f/2gAMAwEAAgADAAAAEBjP/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAEDAQE/EJWP/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAECAQE/EK1//8QAHBABAAMAAgMAAAAAAAAAAAAAAQARITFBYXHw/9oACAEBAAE/EKcErTTj6pRVQAKU9wRCtrdmrOsA6L8/c5J//9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Thor aliviado com o martelo\"\n        title=\"Se o Thor tivesse uma documentação bacanuda para como funciona o martelo, Caps teria usado antes (cinemablend.com)\"\n        src=\"/static/6d899d82e151f549bbd384bd3b7ba1de/7aa7d/thor-ux-2.jpg\"\n        srcset=\"/static/6d899d82e151f549bbd384bd3b7ba1de/7809d/thor-ux-2.jpg 192w,\n/static/6d899d82e151f549bbd384bd3b7ba1de/4ecad/thor-ux-2.jpg 384w,\n/static/6d899d82e151f549bbd384bd3b7ba1de/7aa7d/thor-ux-2.jpg 597w\"\n        sizes=\"(max-width: 597px) 100vw, 597px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Se o Thor tivesse uma documentação bacanuda para como funciona o martelo, Caps teria usado antes (cinemablend.com)</figcaption>\n  </figure></p>\n<p>Mas além disso, seguir padrões é outro esforço que trará resultados na usabilidade da <em>API</em>:</p>\n<blockquote>\n<p>When it comes to documentation for APIs, structured documentation beats unstructured documentation. Following a standard pattern for URLs, resource types, request methods, headers, request parameters, and response formats will make it easier to explore and understand functionality, and reduces surprises when your API grows.</p>\n</blockquote>\n<p><em>Hypermedia</em> parece outra excelente ideia, uma vez que serve como documentação e oferece meios para\nhumanos e máquinas compreenderem melhor a sua funcionalidade.</p>\n<h2>Camadas: API-First Development x API-First Design</h2>\n<p><em>API-First</em> é sobre fazer a <em>API</em> antes da interface <a href=\"/tag/desenvolvimento-web.html\" title=\"Leia mais sobre web\"><em>web</em></a> e <em>mobile</em>? Ou\nseria sobre primeiro fazer o <em>design</em> da <em>API</em> e a partir daí passar para a implementação?</p>\n<p>Uma ótica interessante sobre esse debate pode ser lida no <a href=\"https://apievangelist.com/2014/08/11/what-is-an-api-first-strategy-adding-some-dimensions-to-this-new-question/\" title=\"Leia mais no API Evangelist\">\"What Is An API First Strategy? Adding Some Dimensions To This New Question\"</a>, do <em>apievangelist.com</em>.</p>\n<p>Durante a pesquisa para a escrita desse <em>post</em>, fui exposto a diferentes perspectivas, e é muito provável que eu\ntenha apresentado elas de forma \"misturada\" até aqui:</p>\n<ul>\n<li>Do ponto de vista de negócio, é sobre ter uma <em>API</em> primeiro e torná-la um produto <em>per se</em>;</li>\n<li>Do ponto de vista de tecnologia, é sobre ter uma plataforma primeiro;</li>\n<li>Do ponto de vista de arquitetura, é sobre ter um <em>design</em> coeso, reusável, e construído através da colaboração de diferentes <em>stakeholders</em>;</li>\n<li>Do ponto de vista de <em>UX</em>, é sobre ter uma <em>API</em> bem estruturada e documentada;</li>\n<li>Do ponto de vista do desenvolvedor, é sobre ter uma especificação antes de partir para a implementação.</li>\n</ul>\n<p>Qual visão você pretende adotar depende muito do contexto. Haverá casos em que o produto já existe,\nsoluções já estão no ar, e você fará o movimento para um consumo baseado em <em>APIs</em>. Ou, com sorte, você fundará\numa <em>startup</em> e terá controle o suficiente para primeiramente produzir uma <em>API</em> e depois as interfaces gráficas.</p>\n<p>Assim como há diferentes \"níveis de <em>REST</em>\" que podemos usar no cotidiano, <em>API-First</em> pode ser adotado em diferentes níveis\ne maneiras.</p>\n<p>No meu caso, que atualmente trabalho em um ambiente <em>enterprise</em> e tenho pouca influência sobre o negócio, é basicamente\nsobre <a href=\"https://en.wikipedia.org/wiki/Design_by_contract\" title=\"Design by contract\">discutir o contrato primeiro</a>, e ter uma especificação que sirva como documentação e que guie o meu desenvolvimento.</p>\n<h2>Os passos</h2>\n<p>Na primeira vez que ouvi falar sobre esse conceito, me perguntei como que de forma prática é possível exercitá-lo. De\nlá para cá já me deparei com diferentes formas e processos para adoção.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 740px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/314f16d88e407ea33e7288faad41c6c0/07f3a/captain-ux-2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAQFAgP/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABS2n1LpEJf//EABwQAAMAAQUAAAAAAAAAAAAAAAECAxIABBEhQv/aAAgBAQABBQIYnU8Xou3lx5ioYv0f/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAECAQE/AYx//8QAGhAAAgIDAAAAAAAAAAAAAAAAAAEQIRESkf/aAAgBAQAGPwK1w1dS8lH/xAAbEAACAwADAAAAAAAAAAAAAAAAAREhMUFhkf/aAAgBAQABPyF1WX4HzqdNSX3KI3zI4lkqKlH/2gAMAwEAAgADAAAAEB/v/8QAGBEBAAMBAAAAAAAAAAAAAAAAAQARITH/2gAIAQMBAT8QeWxxqf/EABgRAAMBAQAAAAAAAAAAAAAAAAABESFR/9oACAECAQE/ENOIrp//xAAcEAEAAwADAQEAAAAAAAAAAAABABEhQWFxMaH/2gAIAQEAAT8QEBBVel+cxaY1A/PY9VUUwX+wHOBaPUs0LdtJZwjVD2z/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Capitão América com o martelo do Thor\"\n        title=\"Ver outro dev usando sua API é tão sensacional quanto o Caps usando o martelo (youtube.com)\"\n        src=\"/static/314f16d88e407ea33e7288faad41c6c0/07f3a/captain-ux-2.jpg\"\n        srcset=\"/static/314f16d88e407ea33e7288faad41c6c0/7809d/captain-ux-2.jpg 192w,\n/static/314f16d88e407ea33e7288faad41c6c0/4ecad/captain-ux-2.jpg 384w,\n/static/314f16d88e407ea33e7288faad41c6c0/07f3a/captain-ux-2.jpg 740w\"\n        sizes=\"(max-width: 740px) 100vw, 740px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Ver outro dev usando sua API é tão sensacional quanto o Caps usando o martelo (youtube.com)</figcaption>\n  </figure></p>\n<p>Inclusive, durante meu período na <a href=\"https://loadsmart.com/#/\" title=\"Book a truck in seconds\"><em>Loadsmart</em></a>, cheguei a\nfalar exatamente sobre isso em um\n<a href=\"https://www.slideshare.net/kplaube/api-first-design\" title=\"Veja os slides da apresentação API First Design: Insights from the real-life usage\"><em>lightning talk</em> na <em>Python Sul</em></a>, e sobre como estávamos montando esse processo.</p>\n<p>O contexto pode variar de acordo com o público alvo de sua <em>API</em>. Por exemplo, no artigo <a href=\"https://swagger.io/resources/articles/adopting-an-api-first-approach/\">\"Understanding the API-First Approach to Building Products\"</a> do <em>swagger.io</em>, há uma boa descrição do que <strong>não</strong> pode faltar quando o assunto é prover <em>APIs</em> dentro de uma organização:</p>\n<ul>\n<li><strong>Brainstorm:</strong> Primeiro identifique os serviços chave do negócio e suas <em>capabilities</em>. Descubra quais tipos de <em>APIs</em>\ndeveriam ser oferecidas, descreva os casos de uso para tais <em>APIs</em>, e aponte potenciais <em>endpoints</em> baseados nesses casos\nde uso.</li>\n<li><strong>Identifique os stakeholders:</strong> Quem são os potenciais usuários dentro da sua organização? Tente construir uma visão\nclara e compartilhada com os demais times da sua empresa. Permita que <em>stakeholders</em> influenciem no <em>design</em> da <em>API</em> e\nenvolva-os em melhorias e mudanças.</li>\n<li><strong>Projete um contrato:</strong> O contrato estabelecerá uma série de padrões e boas práticas. Descreva todas as <em>APIs</em> e garanta\nque elas funcionarão de acordo com o acordado.</li>\n<li><strong>Crie um style guide:</strong> Com um <em>style guide</em> será possível ter consistência entre diferentes times e serviços, dentro\nde uma mesma organização. <em>Status codes</em>, versionamento, erros, padrões de rota, etc. Possuir uma especificação comum reduzirá o atrito para adoção de sua <em>API</em> por outros desenvolvedores da organização.</li>\n<li><strong>Implemente governança:</strong> Isso ajudará a estabelecer padrões e reforçar <em>outcomes</em> esperados. Essa prática pode envolver\nde <em>code reviews</em> a <a href=\"https://www.mabl.com/blog/understanding-contract-testing-microservices-mabl\" title=\"Understanding Contract Testing for Microservices\"><em>contract tests</em></a>.</li>\n<li><strong>Automatize processos:</strong> Utilize ferramentas para automatizar o processo de geração da documentação de <em>API</em>, validação\nde estilo, <em>mocking</em>, versionamento, etc. Prover todo o ferramental necessário para que o usuário possa interagir com sua\n<em>API</em> facilmente faz parte desse passo.</li>\n<li><strong>Controle o seu portfolio de APIs:</strong> Não é raro esquecermos que certo serviço já existe, portanto, possuir um sistema\nque auxilie no gerenciamento e <em>tracking</em> de <em>APIs</em> é fundamental.</li>\n<li><strong>Crie um portal para desenvolvedores internos:</strong> Tenha um lugar centralizado onde usuários possam encontrar a documentação,\nespecificação e demais contratos. <em>Developer Experience</em> é importante.</li>\n</ul>\n<p>Muitos desses passos, mesmo em um contexto onde você esteja provendo <em>APIs</em> para usuários externos, fazem completo sentido\n(e provavelmente já façam parte da fase de arquitetura e <em>design</em> do seu produto). Possuir um portal no qual você exponha\nas suas <em>APIs</em>, como elas funcionam e como um possível parceiro é capaz de integrar-se a ela, não são apenas artefatos de\nengenharia, também são possíveis artefatos de negócios.</p>\n<h2>Considerações finais</h2>\n<p>Se você já pratica <a href=\"https://en.wikipedia.org/wiki/Design_by_contract\" title=\"Leia mais no Wikipedia\"><em>design by contract</em></a>,\nmuito do que foi dito aqui já faz parte do seu cotidiano.</p>\n<p>E com o <em>microservices</em> fazendo cada vez mais \"parte da normalidade\", <em>API-First</em> pode parece mais um <em>buzzword</em> para descrever\no que já é comum. Ainda assim, não é raro escutarmos histórias sobre dois serviços diferentes que não são\ncapazes de se comunicar, ou de prestadores de serviço que produzem interfaces gráficas para empresas e que na hora de <br>\nvinculá-las ao <em>back end</em> a coisa simplesmente não funciona.</p>\n<p>Lembro que o meu primeiro contato com <em>API-First</em> foi fruto de uma necessidade de expor certa funcionalidade para um certo\ngrupo de possíveis parceiros. Pensar na <em>API</em> primeiro foi um exercício interessante, uma vez que envolveu pensar numa\nplataforma coesa, e permitiu levar em consideração questões como reuso (que ocasionou na própria empresa utilizando\na <em>API</em> produzida).</p>\n<p>Lembro também que o <em>feedback</em> foi muito bom, uma vez que certos mercados possuem uma postura bem conservadora, e pensar\nprimeiro no usuário mostrou preocupação genuína com o problema do usuário e consequentemente com o produto sendo escrito.</p>\n<p>Contratos são difíceis de serem alterados depois de implementados, então discutí-los antes permite uma resposta mais rápida\n(e indolor) à mudanças, além de proporcionar uma possível \"paralelidade\" entre servidor e consumidor no desenvolvimento da\nfuncionalidade (reduzindo assim tempo de <em>release</em> e aumentando a interação durante a implementação do contrato por ambas as partes).</p>\n<p>Por maior que esse <em>post</em> seja, no fim das contas <em>API-First</em> é algo fundamentalmente simples, que assim como o <em>agile</em>,\nparte do princípio que as pessoas (e seus problemas) são o que realmente importa.</p>\n<p>Até a próxima.</p>\n<h2>Referências</h2>\n<ul>\n<li><a href=\"https://medium.com/adobetech/three-principles-of-api-first-design-fa6666d9f694\">Adobe Tech Blog - Three Principles of API First Design</a></li>\n<li><a href=\"https://apievangelist.com/2014/08/11/what-is-an-api-first-strategy-adding-some-dimensions-to-this-new-question/\">API Evangelist - What Is An API First Strategy? Adding Some Dimensions To This New Question</a></li>\n<li><a href=\"https://apifriends.com/api-creation/api-first/\">API Friends - What is an API First definition?</a></li>\n<li><a href=\"https://dzone.com/articles/an-api-first-development-approach-1\">DZone - An API-First Development Approach</a></li>\n<li><a href=\"https://dzone.com/articles/what-api-first\">DZone - What is API First?</a></li>\n<li><a href=\"https://www.programmableweb.com/news/introduction-to-api-first-design/analysis/2016/10/31\">ProgrammableWeb - Introduction to API-First Design</a></li>\n<li><a href=\"https://swagger.io/resources/articles/adopting-an-api-first-approach/\">Swagger.io - Understanding the API-First Approach to Building Products</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Design_by_contract\">Wikipedia - Design by contract</a></li>\n</ul>","excerpt":"Tratar APIs como \"first-class citizens\" pode ser um desafio e tanto, principalmente quando estamos em um contexto\nde entrega rápida ou de…","frontmatter":{"date":"2020-02-21T09:15:00.000Z","title":"O API-First","tags":["desenvolvimento-web","rest","api","api-first"],"thumbnail":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAADCklEQVQ4y9VTW0tUURj9zpneegmCXvoNBUEXSPCll56jiLRCsAR90TDLF0s0FUMbUicdde6emUmn0fEy3uZ+rnPTDLpIUGA/wB6kC+VMa5+Ok2EP9uiGxf7Od/Zee33r25vowI+qe03U7nBSh8tNLUNWfW7s6aUms5ma+/r3T9Rms5NlLkzm4CQ9eRGkkWjMFHq3zheLRfLn8ibr0jLP1l2+dZueToWopuXhXpLa1lbqGhOo2+en3okACekM9c/Mkrb1hUYiUZp685YYoS+bp6GFRfJmsnz1/Wbq9vroWXh+L+Hg/AL1jE/ocMuKCRsOsXz4w0eCoqu2eCJkTySl0Vh8DARlHlWjxY1PXFXjXX3/Ewj5a/SFpumR00WV9Q3kkmTy5fKsPAKB1SlKReRKcKbEIlTXumSFPIqqWwERpMu1J1NkSyTJEp7nhEzWxH4OR6J18K1rNBrrMEi+A19Ls6wU2SFQfmJ4OUJYx+ObyB5PEEphKriL1yoIJbH4+o4iYy7sVmdgm82OZKqTKXMrqon5ypiZ4RxOYh09al2O1DtS4mu22KtqbR5ZSSDe9ClqgyDLdWOKuoScgNx7nViULE4QArygqMS6xZlxLdDVw1CX31HgluQNS3DymCslVmOT7IjFT0ON6E6mTo1GomegXDQUDnqZ1yurfMvAABHUmABWaoVBtsVmqOh1JVM1blGqBKFdkOSzz7V0Paq5CUsuIacZlvxErgw5Zh2vXw/dA0m+YRAy47c9onTOHo1dsUWi572SXGaLxsqxYQ3dLeDwCyCMl/xMiXdYtwET+VWNC2ayNJXLHYGqdcOXb7ZY3M0aAvWfR5Yj7SAJ42CdAMQB/Ns0rPkBjpPwmOAhTziRBZwPl3R29eVxv5Z+jFgAAj4t7QIENGcSGEfs0HOqNsHygD2QzZazCkHOdeKp6oTsEuMkLpjLkYeVr0PWY89vO3SUvnfNEEBD8QRnwW3pYIQLa6/IgQvJSMfTGW4MPnj+A1DLt83O0YPpGZpZWfnz7Njr2C8KhcI/8wdj/AKntL7KvC1KaQAAAABJRU5ErkJggg==","width":180,"height":180,"src":"/static/1687332eae560a06832bd1ddedfce261/d8216/rest-api-logo.png","srcSet":"/static/1687332eae560a06832bd1ddedfce261/d8216/rest-api-logo.png 1x"}},"publicURL":"/static/1687332eae560a06832bd1ddedfce261/rest-api-logo.png"}},"fields":{"readingTime":{"minutes":10.88},"slug":"/2020/02/21/o-api-first.html"}},"site":{"siteMetadata":{"author":{"name":"Klaus Peter Laube","gravatar":"https://en.gravatar.com/userimage/12163112/d3ae0c6239980b01ff1f1730b65c2ebe.jpg"},"siteUrl":"https://klauslaube.com.br"}}},"pageContext":{"slug":"/2020/02/21/o-api-first.html"}},"staticQueryHashes":["2831923220","4114525740"]}