{"componentChunkName":"component---src-templates-blog-post-js","path":"/2020/01/21/assegure-qualidade-seu-codigo-python-prospector.html","result":{"data":{"markdownRemark":{"html":"<p>Mais um ano, mais um <em>post</em> sobre <a href=\"/tag/qualidade.html\" title=\"Leia mais sobre qualidade\">ferramentas de qualidade de código</a>. Opções não faltam quando o assunto é <a href=\"/tag/python.html\" title=\"Leia mais sobre Python\"><em>Python</em></a>, e elas são dos mais variados fins e complexidade. Com tanta opção, não seria interessante ter \"um anel para a todos governar\"?</p>\n<p>Tanto é interessante que um utilitário vem fazendo parte do <em>toolbelt</em> dos desenvolvedores <em>Python</em> nos últimos tempos justamente por desempenhar esse papel. Estamos falando, claro, do <a href=\"https://prospector.readthedocs.io/en/master/\" title=\"Leia a documentação oficial\"><em>Prospector</em></a>.</p>\n<h2>One ring to rule them all</h2>\n<p>O <em>Prospector</em> é uma ferramenta <a href=\"https://github.com/PyCQA/prospector/blob/master/LICENSE\" title=\"Confira mais no repositório do projeto\">livre</a>, que analisa código <em>Python</em> e retorna informações sobre potenciais problemas, erros de convenção de código, alertas sobre complexidade, etc.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 740px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/86cf2a69117e22c87b361033b5154429/07f3a/lsp-one-ring.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECBP/EABUBAQEAAAAAAAAAAAAAAAAAAAAD/9oADAMBAAIQAxAAAAHDac6SaA//xAAaEAADAQADAAAAAAAAAAAAAAAAARECAxMi/9oACAEBAAEFAuPxqNnUhoy47T//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAwEBPwGH/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAR/9oACAECAQE/AaV//8QAGRAAAgMBAAAAAAAAAAAAAAAAABEBEDFh/9oACAEBAAY/AtFDXDbZ/8QAGxAAAgIDAQAAAAAAAAAAAAAAAAERITFBYVH/2gAIAQEAAT8hyFF9LaHB+lCZlUzp2bSP/9oADAMBAAIAAwAAABCTD//EABYRAQEBAAAAAAAAAAAAAAAAAAARAf/aAAgBAwEBPxCEx//EABcRAAMBAAAAAAAAAAAAAAAAAAABEVH/2gAIAQIBAT8QwZWf/8QAGxABAAMAAwEAAAAAAAAAAAAAAQARITFBUZH/2gAIAQEAAT8QBuoRQJTAWwLeHN68dS1qvGrmpKZk6zA8B+EyoW+T/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"O Um Anel\"\n        title=\"Sauron faz um anel para juntar a todos. Bem parecido com a ideia do prospector (lego-lord-of-the-rings.wikia.com)\"\n        src=\"/static/86cf2a69117e22c87b361033b5154429/07f3a/lsp-one-ring.jpg\"\n        srcset=\"/static/86cf2a69117e22c87b361033b5154429/7809d/lsp-one-ring.jpg 192w,\n/static/86cf2a69117e22c87b361033b5154429/4ecad/lsp-one-ring.jpg 384w,\n/static/86cf2a69117e22c87b361033b5154429/07f3a/lsp-one-ring.jpg 740w\"\n        sizes=\"(max-width: 740px) 100vw, 740px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Sauron faz um anel para juntar a todos. Bem parecido com a ideia do prospector (lego-lord-of-the-rings.wikia.com)</figcaption>\n  </figure></p>\n<p>Ela agrega a funcionalidade de outras ferramentas de análise, como <a href=\"/2011/09/06/assegura-a-qualidade-de-codigo-python-pylint.html\" title=\"Leia mais sobre o Pylint\"><em>Pylint</em></a> e <a href=\"/2011/08/26/assegure-qualidade-seu-codigo-python-pep.html\" title=\"Leia mais sobre PEP8\"><em>pep8</em></a>, e disponibiliza algumas configurações padrões, permitindo assim um bom balanço entre cobertura x configuração.</p>\n<p>O \"lema\" do <em>Prospector</em> é ser \"out of the box\". Segundo a <a href=\"https://prospector.readthedocs.io/en/master/\" title=\"Leia mais na documentação do Prospector\">documentação oficial</a>:</p>\n<blockquote>\n<p>A common complaint of other Python analysis tools is that it takes a long time to filter through which errors are relevant or interesting to your own coding style. Prospector provides some default profiles, which hopefully will provide a good starting point and will be useful straight away, and adapts the output depending on the libraries your project uses.</p>\n</blockquote>\n<h2>No terminal</h2>\n<p>Para começar, precisamos instalar a ferramenta:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ pip install prospector</code></pre></div>\n<p>Por padrão o <em>Prospector</em> utiliza os seguintes utilitários \"under the hood\":</p>\n<ul>\n<li><em>Pylint</em></li>\n<li><em>pep8</em></li>\n<li><a href=\"/2011/10/02/assegure-qualidade-seu-codigo-python-pyflakes.html\" title=\"Leia mais sobre o Pyflakes\"><em>pyflakes</em></a></li>\n<li><em>mccabe</em></li>\n<li><a href=\"/2019/12/18/assegure-qualidade-seu-codigo-python-dodgy.html\" title=\"Leia mais sobre o Dodgy\"><em>dodgy</em></a></li>\n<li><em>pydocstyle</em></li>\n</ul>\n<p>Mas alguns extras (como <em>mypy</em>) também estão disponíveis para instalação. Confira a <a href=\"https://prospector.readthedocs.io/en/master/supported_tools.html\" title=\"Supported Tools\">lista completa de ferramentas suportadas</a>.</p>\n<p>Ao executá-lo, ele apontará possíveis problemas em seu projeto:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ prospector\n\nMessages\n========\n\nmy_app/views.py\n  Line: 1\n    pylint: unused-import / Unused render imported from django.shortcuts\n\nmanage.py\n  Line: 10\n    pylint: import-outside-toplevel / Import outside toplevel (django.core.management) (col 8)\n\nmy_project/settings.py\n  Line: 23\n    dodgy: secret / Possible hardcoded secret key\n\nmy_second_app/views.py\n  Line: 1\n    pylint: unused-import / Unused render imported from django.shortcuts\n\n\n\nCheck Information\n=================\n         Started: 2020-01-21 11:06:04.832118\n        Finished: 2020-01-21 11:06:07.455090\n      Time Taken: 2.62 seconds\n       Formatter: grouped\n        Profiles: default, no_doc_warnings, no_test_warnings, strictness_medium, strictness_high, strictness_veryhigh, no_member_warnings\n      Strictness: None\n  Libraries Used: django\n       Tools Run: dodgy, mccabe, pep8, profile-validator, pyflakes, pylint\n  Messages Found: 4</code></pre></div>\n<p>Ainda é possível aumentar o nível de rigorosidade:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ prospector --strictness veryhigh</code></pre></div>\n<p>Utilizando-o com o <a href=\"https://pre-commit.com/\" title=\"pre-commit hooks\"><em>pre-commit</em></a>, tudo fica ainda mais dinâmico:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">-</span> <span class=\"token key atrule\">repo</span><span class=\"token punctuation\">:</span> git<span class=\"token punctuation\">:</span>//github.com/guykisel/prospector<span class=\"token punctuation\">-</span>mirror\n  <span class=\"token key atrule\">rev</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"\"</span> <span class=\"token comment\"># Use the sha / tag you want to point at</span>\n  <span class=\"token key atrule\">hooks</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> prospector</code></pre></div>\n<h2>No VSCode</h2>\n<p>Admito que conheci o <em>Prospector</em> por causa do <a href=\"/2018/06/04/eu-me-rendo-vscode.html\" title=\"Eu me rendi ao VS Code\"><em>VS Code</em></a>, e utilizá-lo com o editor é tão simples quanto o seu uso via linha de comando. Basta adicionar ao seu <code class=\"language-text\">settings.json</code> as seguintes diretivas:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"python.linting.enabled\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"python.linting.prospectorEnabled\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>E após o editor resolver as dependências, ele passa a funcionar quase que magicamente.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 740px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8e13f621213d5622fd01845b842f01ef/50383/prospector-example.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.770833333333332%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA5ElEQVQY012PB07EMBBF9zbEcU21Pc64JqEKWLj/XXAWtFKQnqz/Pf1CuBPCjypx5QkDwhyhvxy6ofbPsuWwrWlafefSMuAyTvPbNLx0Q7JY7FKOFzP4oiFqlzGtcd2r7cZIqDkVU+GFzLUFk150nslFdBWsu9zAqmV/hFoOp8l1GakSwoedXzuz12wqFiaRCaQVjlXXn/Z2DpXYnCZTkH02+Vv797Jdy/aVt6t1z9ru47wOUzHwNJlN9kGowFX4d7MT46rip9CPFnLIeyw7YAQMFqNxwYAPOYWSzBIptw9kvhf/AKGiSx+IsdSDAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Exemplo de uso do Prospector + Dodgy + VS Code\"\n        title=\"Exemplo de uso do Prospector + Dodgy + VS Code\"\n        src=\"/static/8e13f621213d5622fd01845b842f01ef/50383/prospector-example.png\"\n        srcset=\"/static/8e13f621213d5622fd01845b842f01ef/8514f/prospector-example.png 192w,\n/static/8e13f621213d5622fd01845b842f01ef/804b2/prospector-example.png 384w,\n/static/8e13f621213d5622fd01845b842f01ef/50383/prospector-example.png 740w\"\n        sizes=\"(max-width: 740px) 100vw, 740px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Exemplo de uso do Prospector + Dodgy + VS Code</figcaption>\n  </figure></p>\n<h2>Considerações finais</h2>\n<p>Se você já está cansado de configurar diferentes ferramentas de <em>linting</em> <em>Python</em>, o <em>Prospector</em> pode ser um bom utilitário para manter por perto.</p>\n<p>Tenho problemas com a \"verbosidade\" dele, mas acho que ele funciona bem com editores como o <em>VS Code</em> (por exemplo). Se você quiser ser altamente criterioso em relação ao seu código, vale muito a pena testá-lo em seu processo de <em>pre-commit</em> e durante o <em>build</em> no <em>CI</em>.</p>\n<p>Até a próxima.</p>\n<h2>Referências</h2>\n<ul>\n<li><a href=\"https://github.com/PyCQA/prospector/\">Github - prospector</a></li>\n</ul>","excerpt":"Mais um ano, mais um post sobre ferramentas de qualidade de código. Opções não faltam quando o assunto é Python, e elas são dos mais…","frontmatter":{"date":"2020-01-21T16:15:00.000Z","title":"Assegure a qualidade do seu código Python - Prospector","tags":["python","qualidade","linter","prospector"],"thumbnail":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAACaElEQVQ4y7VUTWgTQRReaS0IlTSxpWprLUp7EA8Kas9eLFSEKujJi9Sfa8WDt4JUUBB6i9qkSSotFFt7SNJuknWzu9KQxNqNWdNIiw2NMVrNog2m2Uyy2RlnNxgSCUUoXR47jzfzzfe+efOGQDv4iJrRIoQKRBCppvrq+N/gHTGPrySvUuE+MnSRDA1wy/7vv3AQwm3BsjbvTojXqPDDpRhh9NSbvISROjq5kMrmEFJUBTXBJXnYccZT52aD170fGscYnZXdb+WarGxYTCMNXQNciq3/lmZjG+aP8ZuscJsVBljBYOP2jTGGF77IZx5tvCpm1iqWa+DSfqubmc7JBeIpVTdKYzadlWu0sHorq7PQhol3fHAY2ffmvD0Q/CjjVbCsqN4wv4blNY+/0du4BtNr4jmNbc8oTRjdrVPROP9AcbVJzpbil5catljFfINdJp7RTTau3sScmHl/xbXUTy5eJt9eIvlpfg5xZyWyEzgOyCuPa4BvcVFM1WBmeuf4TGQI+c/DQC8KXMAG6W4w3w483cChl1ceVYFLaY+E13GGdZbAxKIdUYfT9oNbzkNbjhZs2fkO4DoG3MeBw6B8c9RgTmSk09M+whyYCU4hqiPr6sJUefpU3nsG/4GnC5DtBX8/KkpVB1Y+e1GSAmJBTNIy2ZbDCqmTsjBYCN2RhbuKyMG0APM//y1VGQ+1ZJQUA5zNqkKcJ3lEXn2S9/UpmyFtkYIqmqTqeuLbhycV6Wue6QF2HXC2qscbHZIj9/+WV9m+MdSNYTZRjBkL4UFZuCd/GoG5ZGW2u9mSKgnWr74CilaVXXgM/gAy4w2lbEBDQwAAAABJRU5ErkJggg==","width":180,"height":180,"src":"/static/88f9f9668b6ebef34fbbce3fe78ac897/d8216/python-logo-2.png","srcSet":"/static/88f9f9668b6ebef34fbbce3fe78ac897/d8216/python-logo-2.png 1x"}},"publicURL":"/static/88f9f9668b6ebef34fbbce3fe78ac897/python-logo-2.png"}},"fields":{"readingTime":{"minutes":3.115},"slug":"/2020/01/21/assegure-qualidade-seu-codigo-python-prospector.html"}},"site":{"siteMetadata":{"author":{"name":"Klaus Peter Laube","gravatar":"https://en.gravatar.com/userimage/12163112/d3ae0c6239980b01ff1f1730b65c2ebe.jpg"},"siteUrl":"https://klauslaube.com.br"}}},"pageContext":{"slug":"/2020/01/21/assegure-qualidade-seu-codigo-python-prospector.html"}},"staticQueryHashes":["2831923220","4114525740"]}