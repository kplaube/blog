{"componentChunkName":"component---src-templates-blog-post-js","path":"/2021/01/24/o-popular-e-poderoso-pytest.html","result":{"data":{"markdownRemark":{"html":"<p>Ok. Eu admito. O primeiro <em>post</em> de 2021 será só para cumprir tabela. Afinal,\nse você já programa em <a href=\"/tag/python.html\" title=\"Leia mais sobre Python\"><em>Python</em></a>, provavelmente já ouviu falar do\n<a href=\"https://docs.pytest.org/en/stable/\" title=\"helps you write better programs\"><em>Pytest</em></a>.\nE é pela sua popularidade, mas acima de tudo sua versatilidade, que eu me sinto na\nobrigação de pelo menos arranhar o assunto.</p>\n<p>10 anos de <em>blog</em>, e <a href=\"https://www.google.com/search?sxsrf=ALeKk01qQM8UPLiwJ7HSSqmN5BBbdsb_DQ%3A1609852895254&#x26;ei=32f0X_WHD_-GwPAP9pClgAw&#x26;q=klauslaube.com.br+%22pytest%22&#x26;oq=klauslaube.com.br+%22pytest%22&#x26;gs_lcp=CgZwc3ktYWIQAzoECAAQRzoECCMQJ1D9gQFY-ZQBYKCXAWgAcAJ4AIABeYgB0QGSAQMxLjGYAQCgAQGqAQdnd3Mtd2l6yAECwAEB&#x26;sclient=psy-ab&#x26;ved=0ahUKEwi189iv8YTuAhV_AxAIHXZICcAQ4dUDCA0&#x26;uact=5\">escrevi quase nada sobre a ferramenta</a>. Shame!</p>\n<h2>Um baita framework de testes</h2>\n<p>Já falamos sobre os benefícios de escrever testes:</p>\n<ul>\n<li><a href=\"/2011/01/27/tdd-desenvolvimento-orientado-testes.html\" title=\"Leia na íntegra\">TDD: Desenvolvimento Orientado a Testes</a></li>\n<li><a href=\"/2011/07/18/ferramentas-de-testes-em-django-parte-1.html\" title=\"Leia na íntegra\">Ferramentas de testes em Django - Parte 1</a></li>\n<li><a href=\"/2011/07/23/ferramentas-de-testes-em-django-parte-2.html\" title=\"Leia na íntegra\">Ferramentas de testes em Django - Parte 2</a></li>\n<li><a href=\"/2016/02/03/bdd-com-django-e-behave.html\" title=\"Leia na íntegra\">BDD com Django e Behave</a></li>\n<li><a href=\"/2018/01/05/testando-apps-django-com-tox.html\" title=\"Leia na íntegra\">Testando apps Django com Tox</a></li>\n<li><a href=\"/2014/08/07/os-testes-e-os-dubles-parte-1.html\" title=\"Leia na íntegra\">Os testes e os dublês - Parte 1</a></li>\n<li><a href=\"/2015/06/29/os-testes-e-os-dubles-parte-2.html\" title=\"Leia na íntegra\">Os testes e os dublês - Parte 2</a></li>\n</ul>\n<p>Então podemos partir do princípio que testes são mais do que essenciais como ferramenta de <em>design</em> e desenvolvimento.</p>\n<p>O <em>Pytest</em> se considera um <em>framework</em> que tem por objetivo te permitir escrever testes pequenos de maneira fácil, e ainda assim\nser possível escalar o seu uso para testes funcionais complexos.</p>\n<p>Livre e de código-aberto (<a href=\"https://github.com/pytest-dev/pytest/blob/master/LICENSE\" title=\"Leia na íntegra\">MIT</a>), é hoje\numa alternativa <a href=\"https://www.jetbrains.com/lp/python-developers-survey-2019/#FrameworksLibraries\" title=\"Veja o resultado do survey de 2019\">mais popular que o próprio <em>unittest</em></a> (que faz parte da <em>standard lib</em>). Rico em <em>plugins</em>, com ele é possível escrever\ntestes em diferentes formatos, para diferentes fins.</p>\n<h2>Mão na massa!</h2>\n<p>Vamos aproveitar o <a href=\"/2020/12/30/poesia-pythonista-com-poetry.html\" title=\"Leia o artigo na íntegra\"><em>Poetry</em></a> e iniciar um projeto:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ poetry new my_calc\n$ cd my_calc/</code></pre></div>\n<p>O <em>Pytest</em> já é listado como uma dependência de projetos criados via <code class=\"language-text\">poetry</code>. Portanto, um <code class=\"language-text\">poetry install</code> é o suficiente para\ninstalá-lo:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ poetry install</code></pre></div>\n<p>Ou com o <code class=\"language-text\">pip</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ pip install pytest</code></pre></div>\n<p>Vamos ativar o virtualenv com o <em>Poetry</em>, para que assim as instruções daqui para frente sejam as mesmas para os não-usuários da ferramenta:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ poetry shell</code></pre></div>\n<h2>Encontrando os testes</h2>\n<p>Por padrão, o <em>Pytest</em> espera que o seus arquivos de teste comecem com <code class=\"language-text\">test_</code>, ou terminem com <code class=\"language-text\">_test.py</code>. Customizações <a href=\"https://docs.pytest.org/en/stable/example/pythoncollection.html#changing-naming-conventions\" title=\"Changing naming conventions\">são possíveis</a>, mas o padrão já nos atende.</p>\n<p>Vamos começar o teste pela forma convencional, utilizando <code class=\"language-text\">unittest</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># tests/test_my_calc.py</span>\n\n<span class=\"token keyword\">from</span> unittest <span class=\"token keyword\">import</span> TestCase\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">TestSum</span><span class=\"token punctuation\">(</span>TestCase<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_one_plus_one_is_equal_two</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        result <span class=\"token operator\">=</span> calc<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"+\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> result<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Ainda com a <code class=\"language-text\">unittest</code>, executamos o teste:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ python -m unittest\nE\n======================================================================\nERROR: test_one_plus_one_is_equal_two (tests.test_my_calc.TestSum)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/klauslaube/Workspace/my_calc/tests/test_my_calc.py\", line 7, in test_one_plus_one_is_equal_two\n    result = calc(1, \"+\", 1)\nNameError: name 'calc' is not defined\n\n----------------------------------------------------------------------\nRan 1 test in 0.000s\n\nFAILED (errors=1)</code></pre></div>\n<p>Agora utilizando o utilitário de linha de comando, <code class=\"language-text\">pytest</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ pytest\n======================================================================================== test session starts =========================================================================================\nplatform darwin -- Python 3.8.1, pytest-5.4.3, py-1.10.0, pluggy-0.13.1\nrootdir: /Users/klauslaube/Workspace/my_calc\ncollected 1 item\n\ntests/test_my_calc.py F                                                                                                                                                                        [100%]\n\n============================================================================================== FAILURES ==============================================================================================\n_______________________________________________________________________________ TestSum.test_one_plus_one_is_equal_two _______________________________________________________________________________\n\nself = &lt;tests.test_my_calc.TestSum testMethod=test_one_plus_one_is_equal_two>\n\n    def test_one_plus_one_is_equal_two(self):\n>       result = calc(1, \"+\", 1)\nE       NameError: name 'calc' is not defined\n\ntests/test_my_calc.py:7: NameError\n====================================================================================== short test summary info =======================================================================================\nFAILED tests/test_my_calc.py::TestSum::test_one_plus_one_is_equal_two - NameError: name 'calc' is not defined\n========================================================================================= 1 failed in 0.10s ==========================================================================================</code></pre></div>\n<p>Como é possível notar, o <em>output</em> é um pouco mais <em>verbose</em>. Mas o ponto alto aqui é que, mesmo que o seu projeto esteja\nutilizando <code class=\"language-text\">unittest</code> como biblioteca de testes, o <em>test runner</em> do <code class=\"language-text\">pytest</code> ainda assim\nconsegue identificar e executá-los.</p>\n<p>Fazer o teste passar vai demandar a criação da função <code class=\"language-text\">calc</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># my_calc/calc.py</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">calc</span><span class=\"token punctuation\">(</span>num1<span class=\"token punctuation\">,</span> operation<span class=\"token punctuation\">,</span> num2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">2</span></code></pre></div>\n<p>E importar a mesma nos testes:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># tests/test_my_calc.py</span>\n\n<span class=\"token keyword\">from</span> unittest <span class=\"token keyword\">import</span> TestCase\n<span class=\"token keyword\">from</span> my_calc<span class=\"token punctuation\">.</span>calc <span class=\"token keyword\">import</span> cal\n\n<span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Executar novamente o <code class=\"language-text\">pytest</code> deve trazer um resultado positivo dessa vez.</p>\n<h2>Escrevendo os testes</h2>\n<p>E se quisermos abrir mão do uso da <code class=\"language-text\">unittest</code>? É perfeitamente possível. O <em>Pytest</em>\n(por padrão) busca por classes de teste com prefixo <code class=\"language-text\">Test</code>, e prefixo <code class=\"language-text\">test</code> para os métodos:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># tests/test_my_calc.py</span>\n\n<span class=\"token keyword\">from</span> my_calc<span class=\"token punctuation\">.</span>calc <span class=\"token keyword\">import</span> calc\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">TestSum</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_one_plus_one_is_equal_two</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        result <span class=\"token operator\">=</span> calc<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"+\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">assert</span> <span class=\"token number\">2</span> <span class=\"token operator\">==</span> result</code></pre></div>\n<p>Podemos ir além, e ao invés de métodos utilizar funções. Isso simplificará bastante o\n<em>boilterplate</em> de código necessário para escrever um teste simples:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># tests/test_my_calc.py</span>\n\n<span class=\"token keyword\">from</span> my_calc<span class=\"token punctuation\">.</span>calc <span class=\"token keyword\">import</span> calc\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">test_one_plus_one_is_equal_two</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    result <span class=\"token operator\">=</span> calc<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"+\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">assert</span> <span class=\"token number\">2</span> <span class=\"token operator\">==</span> result</code></pre></div>\n<p>Antes de ir, vamos refatorar a solução:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># my_calc/calc.py</span>\n\nOPERATIONS <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"+\"</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> x <span class=\"token operator\">+</span> y\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">calc</span><span class=\"token punctuation\">(</span>num1<span class=\"token punctuation\">,</span> operation<span class=\"token punctuation\">,</span> num2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> OPERATIONS<span class=\"token punctuation\">[</span>operation<span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>num1<span class=\"token punctuation\">,</span> num2<span class=\"token punctuation\">)</span></code></pre></div>\n<h3>Fixtures</h3>\n<p>Para apresentar o conceito de <em>fixtures</em>, vamos deixar a calculadora ainda mais \"maluca\" (para esconder a falta de criatividade de quem vos escreve). Vamos supor que há a seguinte demanda:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># tests/test_my_calc.py</span>\n\n<span class=\"token keyword\">from</span> dataclasses <span class=\"token keyword\">import</span> dataclass\n<span class=\"token keyword\">from</span> my_calc<span class=\"token punctuation\">.</span>calc <span class=\"token keyword\">import</span> calc\n\n\n<span class=\"token decorator annotation punctuation\">@dataclass</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">FakeWrappedValue</span><span class=\"token punctuation\">:</span>\n    value<span class=\"token punctuation\">:</span> <span class=\"token builtin\">float</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">None</span>\n\n<span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">test_wrapper_object_with_twenty_plus_one_is_equal_to_twenty_one</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    wrapped_value <span class=\"token operator\">=</span> FakeWrappedValue<span class=\"token punctuation\">(</span>value<span class=\"token operator\">=</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span>\n    result <span class=\"token operator\">=</span> calc<span class=\"token punctuation\">(</span>wrapped_value<span class=\"token punctuation\">,</span> <span class=\"token string\">\"+\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">assert</span> <span class=\"token number\">21</span> <span class=\"token operator\">==</span> result</code></pre></div>\n<p>Os testes vão obviamente falhar. Vamos corrigir a função <code class=\"language-text\">calc</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">calc</span><span class=\"token punctuation\">(</span>num1<span class=\"token punctuation\">,</span> operation<span class=\"token punctuation\">,</span> num2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    x <span class=\"token operator\">=</span> <span class=\"token builtin\">getattr</span><span class=\"token punctuation\">(</span>num1<span class=\"token punctuation\">,</span> <span class=\"token string\">\"value\"</span><span class=\"token punctuation\">,</span> num1<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">return</span> OPERATIONS<span class=\"token punctuation\">[</span>operation<span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> num2<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Ainda precisamos garantir que <code class=\"language-text\">num2</code> possa também receber um objeto com atributo <code class=\"language-text\">value</code>.\nPara fins didáticos, vamos escrever um novo teste:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># tests/test_my_calc.py</span>\n\n<span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">test_one_plus_wrapper_object_with_twentyis_equal_to_twenty_one</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    wrapped_value <span class=\"token operator\">=</span> FakeWrappedValue<span class=\"token punctuation\">(</span>value<span class=\"token operator\">=</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span>\n    result <span class=\"token operator\">=</span> calc<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"+\"</span><span class=\"token punctuation\">,</span> wrapped_value<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">assert</span> <span class=\"token number\">21</span> <span class=\"token operator\">==</span> resul</code></pre></div>\n<p>O testes falharão novamente. Corrigimos novamente a função:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">calc</span><span class=\"token punctuation\">(</span>num1<span class=\"token punctuation\">,</span> operation<span class=\"token punctuation\">,</span> num2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    x <span class=\"token operator\">=</span> <span class=\"token builtin\">getattr</span><span class=\"token punctuation\">(</span>num1<span class=\"token punctuation\">,</span> <span class=\"token string\">\"value\"</span><span class=\"token punctuation\">,</span> num1<span class=\"token punctuation\">)</span>\n    y <span class=\"token operator\">=</span> <span class=\"token builtin\">getattr</span><span class=\"token punctuation\">(</span>num2<span class=\"token punctuation\">,</span> <span class=\"token string\">\"value\"</span><span class=\"token punctuation\">,</span> num2<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">return</span> OPERATIONS<span class=\"token punctuation\">[</span>operation<span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Pronto! Testes passando novamente, e enfim podemos falar sobre <em>fixtures</em>. Segundo o\n<a href=\"https://realpython.com/pytest-python-testing/\" title=\"Leia o excelente artigo sobre Pytest\"><em>Real Python</em></a>, <em>fixtures</em> são:</p>\n<blockquote>\n<p>(...) a way of providing data, test doubles, or state setup to your tests. Fixtures are functions that can return a wide range of values. Each test that depends on a fixture must explicitly accept that fixture as an argument.</p>\n</blockquote>\n<p>Com auxílio do <em>decorator</em> <code class=\"language-text\">@fixture</code>, somos capazes de escrever uma função que pode\nser reaproveitada por diferentes testes. Faremos isso com a instância de <code class=\"language-text\">FakeWrappedValue</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># tests/test_my_calc.py</span>\n\n<span class=\"token keyword\">import</span> pytest\n<span class=\"token keyword\">from</span> dataclasses <span class=\"token keyword\">import</span> dataclass\n<span class=\"token keyword\">from</span> my_calc<span class=\"token punctuation\">.</span>calc <span class=\"token keyword\">import</span> calc\n\n\n<span class=\"token decorator annotation punctuation\">@dataclass</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">FakeWrappedValue</span><span class=\"token punctuation\">:</span>\n    value<span class=\"token punctuation\">:</span> <span class=\"token builtin\">float</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">None</span>\n\n\n<span class=\"token decorator annotation punctuation\">@pytest<span class=\"token punctuation\">.</span>fixture</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">wrapped_value_with_twenty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> FakeWrappedValue<span class=\"token punctuation\">(</span>value<span class=\"token operator\">=</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">test_one_plus_one_is_equal_two</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    result <span class=\"token operator\">=</span> calc<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"+\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">assert</span> <span class=\"token number\">2</span> <span class=\"token operator\">==</span> result\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">test_wrapper_object_with_twenty_plus_one_is_equal_to_twenty_one</span><span class=\"token punctuation\">(</span>wrapped_value_with_twenty<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    result <span class=\"token operator\">=</span> calc<span class=\"token punctuation\">(</span>wrapped_value_with_twenty<span class=\"token punctuation\">,</span> <span class=\"token string\">\"+\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">assert</span> <span class=\"token number\">21</span> <span class=\"token operator\">==</span> result\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">test_one_plus_wrapper_object_with_twentyis_equal_to_twenty_one</span><span class=\"token punctuation\">(</span>wrapped_value_with_twenty<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    result <span class=\"token operator\">=</span> calc<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"+\"</span><span class=\"token punctuation\">,</span> wrapped_value_with_twenty<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">assert</span> <span class=\"token number\">21</span> <span class=\"token operator\">==</span> result</code></pre></div>\n<p>Note a função <code class=\"language-text\">wrapped_value_with_twenty</code> decorada com <code class=\"language-text\">pytest.fixture</code>. Outro ponto importante é que as funções que utilizam esse parâmetro agora recebem ele como argumento.\nPor exemplo:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">test_wrapper_object_with_twenty_plus_one_is_equal_to_twenty_one</span><span class=\"token punctuation\">(</span>wrapped_value_with_twenty<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    result <span class=\"token operator\">=</span> calc<span class=\"token punctuation\">(</span>wrapped_value_with_twenty<span class=\"token punctuation\">,</span> <span class=\"token string\">\"+\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">assert</span> <span class=\"token number\">21</span> <span class=\"token operator\">==</span> result</code></pre></div>\n<p><em>Fixtures</em> podem ajudar a abstrair complexidades que não fazem sentido serem evidenciadas\nno corpo do teste. Por exemplo (e perceba que esse é um exemplo infinitamente bobo), podemos esconder a \"complexidade\" de instanciar um objeto com <code class=\"language-text\">value</code> vazio:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token decorator annotation punctuation\">@pytest<span class=\"token punctuation\">.</span>fixture</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">empty_wrapped_value</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> FakeWrappedValue<span class=\"token punctuation\">(</span>value<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">test_wrapper_object_with_empty_value_plus_one_is_equal_to_one</span><span class=\"token punctuation\">(</span>empty_wrapped_value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    result <span class=\"token operator\">=</span> calc<span class=\"token punctuation\">(</span>empty_wrapped_value<span class=\"token punctuation\">,</span> <span class=\"token string\">\"+\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">assert</span> <span class=\"token number\">1</span> <span class=\"token operator\">==</span> result</code></pre></div>\n<p>Os testes vão quebrar. Ficará ao seu encargo resolver essa aí ;)</p>\n<h3>Escopos</h3>\n<p>Juntamente com as <em>fixtures</em> vem o conceito de <em>scopes</em>. É possível encontrar cinco tipos diferentes,\ne podemos começar pelo já explorado \"function\".</p>\n<p>No exemplo de <em>fixtures</em> da seção anterior, utilizamos esse tipo de escopo. Por padrão, <em>fixtures</em> são definidas\ncom o escopo de função, significando que a <em>fixture</em> será executada por <em>test function</em>.</p>\n<p>O escopo <code class=\"language-text\">class</code> traz um comportamento um pouco diferente. Quando aplicado a uma classe,\nele funciona como o <code class=\"language-text\">setUpClass</code> do <code class=\"language-text\">unittest</code>. Vamos mudar o arquivo de testes para\nvislumbrar a diferença entre esses dois tipos de escopo:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># tests/test_my_calc.py</span>\n\n<span class=\"token keyword\">from</span> dataclasses <span class=\"token keyword\">import</span> dataclass\n\n<span class=\"token keyword\">import</span> pytest\n<span class=\"token keyword\">from</span> my_calc<span class=\"token punctuation\">.</span>calc <span class=\"token keyword\">import</span> calc\n\n\n<span class=\"token decorator annotation punctuation\">@dataclass</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">FakeWrappedValue</span><span class=\"token punctuation\">:</span>\n    value<span class=\"token punctuation\">:</span> <span class=\"token builtin\">float</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">None</span>\n\n\n<span class=\"token decorator annotation punctuation\">@pytest<span class=\"token punctuation\">.</span>fixture</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">wrapped_value_with_twenty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Function fixture\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> FakeWrappedValue<span class=\"token punctuation\">(</span>value<span class=\"token operator\">=</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token decorator annotation punctuation\">@pytest<span class=\"token punctuation\">.</span>fixture</span><span class=\"token punctuation\">(</span>scope<span class=\"token operator\">=</span><span class=\"token string\">\"class\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">x_and_y</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Class fixture\"</span><span class=\"token punctuation\">)</span>\n    request<span class=\"token punctuation\">.</span>cls<span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n    request<span class=\"token punctuation\">.</span>cls<span class=\"token punctuation\">.</span>y <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n\n\n<span class=\"token decorator annotation punctuation\">@pytest<span class=\"token punctuation\">.</span>mark<span class=\"token punctuation\">.</span>usefixtures</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"x_and_y\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">TestAddingThingsUp</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_one_plus_one_is_equal_two</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        result <span class=\"token operator\">=</span> calc<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> <span class=\"token string\">\"+\"</span><span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">assert</span> <span class=\"token number\">2</span> <span class=\"token operator\">==</span> result\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_wrapper_object_with_twenty_plus_one_is_equal_to_twenty_one</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> wrapped_value_with_twenty<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        result <span class=\"token operator\">=</span> calc<span class=\"token punctuation\">(</span>wrapped_value_with_twenty<span class=\"token punctuation\">,</span> <span class=\"token string\">\"+\"</span><span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">assert</span> <span class=\"token number\">21</span> <span class=\"token operator\">==</span> result\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_one_plus_wrapper_object_with_twentyis_equal_to_twenty_one</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> wrapped_value_with_twenty<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        result <span class=\"token operator\">=</span> calc<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> <span class=\"token string\">\"+\"</span><span class=\"token punctuation\">,</span> wrapped_value_with_twenty<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">assert</span> <span class=\"token number\">21</span> <span class=\"token operator\">==</span> result</code></pre></div>\n<p>Alguns pontos importantes não podem passar em branco:</p>\n<ul>\n<li>Note o uso do argumento <code class=\"language-text\">scope=\"class\"</code> decorando a assinatura da <em>fixture</em> <code class=\"language-text\">x_and_y</code></li>\n<li><code class=\"language-text\">pytest.mark.usefixtures</code> é quem ativa o uso da <em>fixture</em> na classe <code class=\"language-text\">TestAddingThingsUp</code></li>\n<li>Para visualizar o resultado dos <code class=\"language-text\">print</code>, é preciso executar o <code class=\"language-text\">pytest</code> com o parâmetro <code class=\"language-text\">-s</code></li>\n<li>Note que esse é outro exemplo bobo (:</li>\n</ul>\n<p>Já que temos o comportamento do <code class=\"language-text\">setUp</code>, conseguimos ter o <code class=\"language-text\">tearDown</code>? Sim! Com um <code class=\"language-text\">yield</code>\ndentro da <em>fixture</em>, você consegue \"agendar\" código a ser executado como parte do\n<em>off-load</em> da mesma:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token decorator annotation punctuation\">@pytest<span class=\"token punctuation\">.</span>fixture</span><span class=\"token punctuation\">(</span>scope<span class=\"token operator\">=</span><span class=\"token string\">\"class\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">x_and_y</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Class fixture\"</span><span class=\"token punctuation\">)</span>\n    request<span class=\"token punctuation\">.</span>cls<span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n    request<span class=\"token punctuation\">.</span>cls<span class=\"token punctuation\">.</span>y <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n    <span class=\"token keyword\">yield</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Tearing things down!!!\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Uma vez que fica claro o funcionamento dos <em>scopes</em>, os três restantes são quase intuitivos:</p>\n<ul>\n<li><strong>Module:</strong> Executa a <em>fixture</em> por módulo;</li>\n<li><strong>Package:</strong> Executa a <em>fixture</em> por pacote;</li>\n<li><strong>Session:</strong> Cada vez que você executa o <em>Pytest</em>.</li>\n</ul>\n<p>Para fins didáticos, vamos utilizar outro argumento na construção das <em>fixtures</em>\nque exemplificarão como esses escopos funcionam. Estamos falando do <code class=\"language-text\">autouse</code>, e sem\nnenhuma surpresa, ele faz a <em>fixture</em> ser executada automaticamente:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token decorator annotation punctuation\">@pytest<span class=\"token punctuation\">.</span>fixture</span><span class=\"token punctuation\">(</span>scope<span class=\"token operator\">=</span><span class=\"token string\">\"module\"</span><span class=\"token punctuation\">,</span> autouse<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">saying_hello_per_module</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Module fixture\"</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token decorator annotation punctuation\">@pytest<span class=\"token punctuation\">.</span>fixture</span><span class=\"token punctuation\">(</span>scope<span class=\"token operator\">=</span><span class=\"token string\">\"package\"</span><span class=\"token punctuation\">,</span> autouse<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">saying_hello_per_package</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Package fixture\"</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token decorator annotation punctuation\">@pytest<span class=\"token punctuation\">.</span>fixture</span><span class=\"token punctuation\">(</span>scope<span class=\"token operator\">=</span><span class=\"token string\">\"session\"</span><span class=\"token punctuation\">,</span> autouse<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">saying_hello_per_session</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Session fixture\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Agora com o <code class=\"language-text\">pytest -s</code>, podemos ver na prática o que acontece:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ pytest -s\n\n(...)\n\ntests/test_my_calc.py Session fixture\nPackage fixture\nModule fixture\nClass fixture\n.Function fixture\n.Function fixture\n.Tearing things down!!!</code></pre></div>\n<h2>Baterias inclusas + plugins == sucesso!</h2>\n<p>Há muitos outros conceitos por trás do <em>Pytest</em>. Do arquivo <em>conftest.py</em> ao\n<a href=\"https://stribny.name/blog/pytest/#parametrized-tests\" title=\"Testing Python applications with Pytest\">@parametrize</a>, você vai encontrar funcionalidades incríveis que aumentarão\na sua produtividade escrevendo testes.</p>\n<p>E quando adicionamos os <em>plugins</em> do <em>Pytest</em> à equação, tudo fica mais divertido.\nPara começar, se você está escrevendo testes em <a href=\"/tag/django.html\" title=\"Leia mais sobre Django\"><em>Django</em></a> e quer utilizar <em>Pytest</em>, o <a href=\"https://pytest-django.readthedocs.io/en/latest/\" title=\"Leia a documentação da biblioteca\">pytest-django</a> é mais que obrigatório. Ele resolverá tudo o que precisa-se resolver (banco de dados, sessões, transações, etc)\n<em>out of the box</em>.</p>\n<p>Outros grande <em>plugins</em> são:</p>\n<ul>\n<li><a href=\"https://github.com/pytest-dev/pytest-bdd\" title=\"Acesse o repositório no Github\">pytest-bdd</a>: <em>BDD</em> sem precisar de outro <em>test runner</em></li>\n<li><a href=\"https://github.com/pytest-dev/pytest-cov\" title=\"Acesse o repositório no Github\">pytest-cov</a>: Relatório de <em>test coverage</em></li>\n<li><a href=\"https://github.com/ktosiek/pytest-freezegun\" title=\"Acesse o repositório no Github\">pytest-freezegun</a>: Congele o tempo com essa integração com o <em>Freezegun</em></li>\n<li><a href=\"https://github.com/pytest-dev/pytest-instafail\" title=\"Acesse o repositório no Github\">pytest-instafail</a>: Mostra falhas e erros antes do fim da sessão de testes</li>\n<li><a href=\"https://github.com/miketheman/pytest-socket\" title=\"Acesse o repositório no Gihub\">pytest-socket</a>: Previna <em>network calls</em> indesejadas</li>\n<li><a href=\"https://github.com/Teemu/pytest-sugar\" title=\"Acesse o repositório no Github\">pytest-sugar</a>: Progress bar e uma melhor visualização de falhas e erros</li>\n<li><a href=\"https://github.com/pytest-dev/pytest-xdist\" title=\"Acesse o repositório no Github\">pytest-xdist</a>: Paralelize a execução dos testes</li>\n</ul>\n<p><a href=\"https://awesomeopensource.com/projects/pytest\" title=\"Veja projetos relacionados com Pytest\">A lista é imensa</a>, e garanto que há um <em>plugin</em> por aí pronto para resolver os seus problemas.</p>\n<h2>Considerações finais</h2>\n<p>O <em>Pytest</em> faz parte daquele seleto grupo de bibliotecas que instalamos imediatamente após iniciar um projeto. É rico, poderoso, flexível,\ne faz do desenvolvimento orientado a testes uma experiência muito mais satisfatória, do que com a opção utilizando a <em>standard lib</em>.</p>\n<p>Atualmente na <a href=\"https://www.sonofatailor.com/\" title=\"Custom fitted T-shirts\"><em>Son of a Tailor</em></a>, estamos aumentando o nosso <em>coverage</em> e gradativamente\nadotando as baterias inclusas do <em>Pytest</em>. Todos os testes, no entanto, utilizam a <code class=\"language-text\">django.tests.TestCase</code>. Mesmo assim, fomos capazes de trocar o <em>test runner</em> para o <em>Pytest</em>,\ne tirar proveito de seus <em>plugins</em>.</p>\n<p>Sem nenhum problema.</p>\n<p>Até a próxima!</p>\n<h2>Referências</h2>\n<ul>\n<li><a href=\"https://medium.com/better-programming/understand-5-scopes-of-pytest-fixtures-1b607b5c19ed\">BetterProgramming: Understand 5 Scopes of Pytest Fixtures</a></li>\n<li><a href=\"https://realpython.com/pytest-python-testing/\">Real Python: Effective Python Testing with Pytest</a></li>\n<li><a href=\"https://semaphoreci.com/community/tutorials/testing-python-applications-with-pytest\">Semaphore: Testing Python Applications with Pytest</a></li>\n<li><a href=\"https://stribny.name/blog/pytest/\">Software development and beyond: Testing Python applications with Pytest</a></li>\n</ul>","excerpt":"Ok. Eu admito. O primeiro post de 2021 será só para cumprir tabela. Afinal,\nse você já programa em Python, provavelmente já ouviu falar do…","frontmatter":{"date":"2021-01-24T17:37:00.000Z","title":"O popular e poderoso Pytest","tags":["python","testes","tdd","pytest","django","bdd"],"thumbnail":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAADT0lEQVQ4y4WU+09UVxDH9y9pY1KrhaX6Q3UtaCGYGE2spvqD8dGmglJFl5UGtCQqpiY0MdTXFZTnEl/4aFXESAGDSKMReSpoQSMLVLE+ipooMeu95+Pcvfcuu2vESSZnN3fO53xn5sxxKaX4kOuGEe26gSGraU5MrLkmAn7IjIhvsXGu2ODIgKabQxRf6GTP2Vb2nLmOv76L3sDjiRXGwnQ7pcNNt8nQ6vmhsJbJ6QeJzzjI1DSN6T8V0dw9EIoxY8NQew2lbNgfzICgbgHT99VT2dhDycUuJv1YROKmSmZvqmDq6n1srWy0gPpb2Sd7baDJCNfQMKLlm7AVu2rJ2F9H2u7aENDjLSM+fT/5VZcsoMlxYPYaStmB3Rp8Rt6Ra2RXXGGzv4Ut/ivk+ZvJLmkgKduPZ2OpADXy/Rfh0V70O17U/812ypZSl9OxR6OvSdlew+cbjuL2HiUuswp3ph/3+nIS1pXiyaogyVeOe43G1rLz0LcM/e/PUDeSUW9G7DIauJwmnLk+wBRvNUl5fzBr80m+zj3OdK+fhPVlAiwhfm0xCWs1Pl11gJKzUsO+peitSairbtSTWhuom0BL4YG6XuJ8J5i15TQzcqqZ5jvG8sJL+Epb8B66TNahJjK1BnafusxY/05om4lqSwYTOFxs11AfV1j0lwVM/OU0X/qq0Wpa4L+9MJwjngtDP8Og+L3voT1RYN8IdI4FHNLeB55vG+SLrGo8uSdYWNDI2L/l0JvM2+55GF2pGJ0pGO1z0AWkOuYKNEWg4lfjo1N2mvL4xRip+TV8sqaSbwsaeBP4TYALULeXoHoWorpTUZ3SgPbZcEPSbf1K1MXJ/3mo4PPxpkRem+7AU7Ydv4ZW109wuFCA81G9i8S/QwV2QGAn6n4+akBqOFAgv39FvewIw8KTEjvwIXvwuyhbINDFsor3r4O7cu/urIaRKgsSHlnrDkZNiqPUHCfzLPVAFN6aKykvDUHp8MCTPwV2GHU3x4IZwajRC0+KA7Tg9mmvelB9K1E3U6UW4h3S2X/SJM1tkmb7uLLYx+G95ytiNlVwFDXagBqpsPzpOZmKh1GjNuHz5chW9gbnABVRr8iaOfEff2AdhSZU7pbjKuTRz1WsvQOAZnfm2TGBHwAAAABJRU5ErkJggg==","width":180,"height":180,"src":"/static/7f2a92f8e64d5340552525c4391133b2/d8216/python-logo.png","srcSet":"/static/7f2a92f8e64d5340552525c4391133b2/d8216/python-logo.png 1x"}},"publicURL":"/static/7f2a92f8e64d5340552525c4391133b2/python-logo.png"}},"fields":{"readingTime":{"minutes":9.6},"slug":"/2021/01/24/o-popular-e-poderoso-pytest.html"}},"site":{"siteMetadata":{"author":{"name":"Klaus Peter Laube","gravatar":"https://en.gravatar.com/userimage/12163112/d3ae0c6239980b01ff1f1730b65c2ebe.jpg"},"siteUrl":"https://klauslaube.com.br"}}},"pageContext":{"slug":"/2021/01/24/o-popular-e-poderoso-pytest.html"}},"staticQueryHashes":["2831923220","4114525740"]}