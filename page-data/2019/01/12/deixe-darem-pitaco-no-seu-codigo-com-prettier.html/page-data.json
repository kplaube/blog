{"componentChunkName":"component---src-templates-blog-post-js","path":"/2019/01/12/deixe-darem-pitaco-no-seu-codigo-com-prettier.html","result":{"data":{"markdownRemark":{"html":"<p><em>Code formatters</em> são uma boa ideia. Acredite! Demorei a dar o braço a torcer,\nmas depois de alguns \"Hello world\" em <a href=\"https://golang.org/\" title=\"Leia mais sobre Golang\"><em>Go</em></a>\nadmito que a ideia de ter um código bem formatado, sem necessitar da destreza do\nprogramador para isso, é uma ideia excelente.</p>\n<p>Em <em>Go</em> temos o <code class=\"language-text\">go fmt</code>, que\npoupa um tempo absurdo tornando o seu código \"go-like\" com pouco esforço.\nJá para <a href=\"/tag/javascript.html\" title=\"Leia mais sobre Javascript\"><em>Javascript</em></a>, temos o <a href=\"https://prettier.io/\" title=\"Opiniated Code Formatter\"><em>Prettier</em></a>.\nE é sobre ele que falaremos nesse artigo.</p>\n<h2>Mais bonito</h2>\n<p>O <em>Prettier</em> é um <em>code formatter</em> livre (<a href=\"https://github.com/prettier/prettier/blob/master/LICENSE\" title=\"Leia o documento completo\"><em>MIT</em></a>) e de código aberto, que tem por finalidade \"forçar\" um padrão de código. Ele realiza isso analisando o seu código e alterando-o de acordo com regras pré-definidas.</p>\n<p>Todos nós temos algum vício na forma como escrevemos nosso código. A ideia de ferramentas como o <em>Prettier</em> é fazer com que todos os integrantes de um projeto tenham um estilo comum de escrita. Tornando a leitura do código consistente, não importando o seu autor (ou editor).</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 640px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2f948d5b80c9977df2afe786c68ddade/c08c5/sam-elliot-prettier.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.9375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAQBAgMF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAAID/9oADAMBAAIQAxAAAAHnzfONFxgP/8QAGxAAAQQDAAAAAAAAAAAAAAAAAAECAxExMjP/2gAIAQEAAQUCk3fRSjui4P/EABcRAQADAAAAAAAAAAAAAAAAAAABETH/2gAIAQMBAT8BnVP/xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAgEBPwFX/8QAGRAAAwADAAAAAAAAAAAAAAAAABARAiGB/9oACAEBAAY/AjGaXCr/xAAaEAADAAMBAAAAAAAAAAAAAAAAASERQXFR/9oACAEBAAE/IUjgueOkLQWE+ht9P//aAAwDAQACAAMAAAAQ1+//xAAWEQADAAAAAAAAAAAAAAAAAAABECH/2gAIAQMBAT8Qkl//xAAWEQADAAAAAAAAAAAAAAAAAAABEDH/2gAIAQIBAT8QET//xAAbEAEAAwEAAwAAAAAAAAAAAAABABFBIWFxkf/aAAgBAQABPxCrywxypqj1XYexbCAIc4+wFIxV5Kr2J//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"&quot;Imagem do Sr. Bennet, personagem de The Ranch&quot;\"\n        title=\"Prettier é como trabalhar para o Sr. Bennett, de The Ranch. Na dúvida, você está errado (heighline)\"\n        src=\"/static/2f948d5b80c9977df2afe786c68ddade/c08c5/sam-elliot-prettier.jpg\"\n        srcset=\"/static/2f948d5b80c9977df2afe786c68ddade/7809d/sam-elliot-prettier.jpg 192w,\n/static/2f948d5b80c9977df2afe786c68ddade/4ecad/sam-elliot-prettier.jpg 384w,\n/static/2f948d5b80c9977df2afe786c68ddade/c08c5/sam-elliot-prettier.jpg 640w\"\n        sizes=\"(max-width: 640px) 100vw, 640px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Prettier é como trabalhar para o Sr. Bennett, de The Ranch. Na dúvida, você está errado (heighline)</figcaption>\n  </figure></p>\n<p>Com \"estilo comum de escrita\" não estamos falando necessariamente de qualidade de código. Por exemplo, o <em>Prettier</em> não está preocupado com variáveis sendo usadas antes de serem declaradas. Para isso existe os <a href=\"/tag/qualidade.html\" title=\"Leia mais sobre qualidade de código\"><em>linters</em></a>, e no caso do <em>Javascript</em> o <a href=\"https://eslint.org/\" title=\"The pluggable linting utility for JavaScript and JSX\"><em>ESLint</em></a> é (provavelmente) a opção mais famosa. Por outro lado, ele estará preocupado com a quantidade de espaços em branco, quantidade de caracteres por linha, uso de vírgulas, etc. Tópicos que geralmente demandam energia durante um <em>code review</em>.</p>\n<p>E talvez esse seja o ponto marcante por trás do <em>Prettier</em>. Diretamente da <a href=\"https://prettier.io/docs/en/option-philosophy.html\" title=\"Option Philosophy\">página que fala sobre a filosofia da ferramenta</a>:</p>\n<blockquote>\n<p>By far the biggest reason for adopting Prettier is to stop all the on-going debates over styles.</p>\n</blockquote>\n<h2>Na prática</h2>\n<p>A ferramenta é escrita em <em>Node.js</em>, portanto, um <code class=\"language-text\">npm install</code> é o suficiente para tê-la em seu ambiente:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ npm install --global prettier</code></pre></div>\n<p>A documentação da ferramenta sugere \"pinnar\" a versão exata no <code class=\"language-text\">package.json</code> do seu projeto, uma vez que diferentes versões podem ter diferentes sugestões de escrita.</p>\n<p>Com o utilitário de linha de comando, basta executarmos passando o arquivo <em>JS</em> desejado como parâmetro:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ prettier file.js\n\nfunction HelloWorld({\n    greeting = &quot;hello&quot;,\n    greeted = &#39;&quot;World&quot;&#39;,\n    silent = false,\nonMouseOver\n}) {\n    if (!greeting) {\n        return null;\n    }\n\n    // TODO: Don&#39;t use random in render\n    let num = Math.floor(Math.random() * 1e7)\n        .toString()\n        .replace(/\\.\\d+/gi, &quot;&quot;);\n\n    return (\n        &lt;div\n        className=&quot;HelloWorld&quot;\n        title={`You are visitor number ${num}`}\n        onMouseOver={onMouseOver}\n        &gt;\n        &lt;strong&gt;\n            {greeting.slice(0, 1).toUpperCase() + greeting.slice(1).toLowerCase()}\n        &lt;/strong&gt;\n        {greeting.endsWith(&quot;,&quot;) ? (\n            &quot; &quot;\n        ) : (\n            &lt;span style={{ color: &quot;grey&quot; }}&gt;&quot;, &quot;&lt;/span&gt;\n        )}\n        &lt;em&gt;{greeted}&lt;/em&gt;\n        {silent ? &quot;.&quot; : &quot;!&quot;}\n        &lt;/div&gt;\n    );\n}</code></pre></div>\n<p>O <em>output</em> é o conteúdo do seu arquivo já formatado. Se quiser a alteração \"in-place\", temos a opção <code class=\"language-text\">--write</code> disponível.</p>\n<p>É possível customizar a ferramenta de acordo com as suas escolhas <a href=\"https://prettier.io/docs/en/options.html\" title=\"Options\">passando argumentos durante sua chamada</a>. No exemplo abaixo, queremos formatar o arquivo <code class=\"language-text\">file.js</code> sem <em>semicolons</em> no final das linhas, e com <em>single quotes</em> ao invés de <em>double quotes</em>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ prettier --no-semi --single-quote file.js</code></pre></div>\n<p>O mais recomendado é a criação de um <a href=\"https://prettier.io/docs/en/configuration.html\" title=\"Configuration file\">arquivo de configuração</a> (geralmente chamado de <code class=\"language-text\">.prettierrc</code>), com todas a regras explícitas:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"trailingComma\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"es5\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"tabWidth\"</span><span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"semi\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"singleQuote\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>Na prática (de verdade)</h2>\n<p>É inviável ir na linha de comando e executar a ferramenta toda a vez que você alterar o seu código. Uma opção mais eficiente é deixar com que o seu editor ou <em>IDE</em> tome conta desse processo.</p>\n<p>Os principais editores do mercado possuem suporte ao <em>Prettier</em>, como pode ser visto em <a href=\"https://prettier.io/docs/en/editors.html\" title=\"Leia na documentação da ferramenta\">Editor Integration</a>. Para o <a href=\"/tag/vim.html\" title=\"Leia mais sobre Vim\"><em>Vim</em></a>, recomendo o uso com o <em>plugin</em> <a href=\"https://github.com/w0rp/ale\" title=\"Asynchronous linting/fixing for Vim and Language Server Protocol (LSP) integration\"><em>Ale</em></a>.</p>\n<p>É esperado que nem todo membro do seu projeto configurará o editor apropriadamente na primeira interação. Portanto, uma \"salvaguarda\" pode ser habilitar um <em>pre-commit hook</em>. Com isso, ao executar <code class=\"language-text\">git add</code>, o <em>Prettier</em> será executado automaticamente nos arquivos alterados pelo desenvolvedor. O capítulo <a href=\"https://prettier.io/docs/en/precommit.html\" title=\"Leia na documentação oficial\">Pre-commit Hook</a> da documentação oficial dá várias sugestões de uso. Para esse caso, simpatizo bastante com o <a href=\"https://pre-commit.com/\" title=\"A framework for managing and maintaining multi-language pre-commit hooks\">pre-commit</a>.</p>\n<h2>ESLint vs Prettier? ESLint + Prettier!</h2>\n<p>Sabe o que é melhor que usar o <em>Prettier</em>? É usar o <em>Prettier</em> integrado com as regras que você já conhece do <em>ESlint</em>. Obviamente que executar os dois em paralelo pode resultar em comportamentos inesperados. Existe inúmeros tutoriais na internet recomendando como fazer essas duas ferramentas funcionarem em conjunto.</p>\n<p>Recomendo o <a href=\"https://blog.echobind.com/integrating-prettier-eslint-airbnb-style-guide-in-vscode-47f07b5d7d6a\" title=\"Leia o artigo original\">Integrating Prettier + ESLint + Airbnb Style Guide in VSCode</a>, do <em>Echobind</em>.</p>\n<h2>Considerações finais</h2>\n<p>Não perca tempo tentando controlar \"na conversa\" o estilo de código do seu time ou projeto. Já passei por isso e não compensa o estresse e tempo investido. Adote uma ferramenta como o <em>Prettier</em>, e reserve tempo e energia para coisas mais importantes, relacionados ao seu negócio ou produto.</p>\n<p>Até a próxima.</p>\n<h2>Referências</h2>\n<ul>\n<li><a href=\"https://blog.echobind.com/integrating-prettier-eslint-airbnb-style-guide-in-vscode-47f07b5d7d6a\">Echobind - Integrating Prettier + ESLint + Airbnb Style Guide in VSCode</a></li>\n<li><a href=\"https://www.futurehosting.com/blog/prettier-vs-eslint-whats-the-difference/\">Future Hosting - Prettier vs Eslint: What's the difference?</a></li>\n<li><a href=\"https://medium.com/@joshuacrass/javascript-linting-and-formatting-with-eslint-prettier-and-airbnb-30eb746db862\">Joshua Crass - Javascript Linting and Formatting with ESLint, Prettier, and Airbnb</a></li>\n</ul>","excerpt":"Code formatters são uma boa ideia. Acredite! Demorei a dar o braço a torcer,\nmas depois de alguns \"Hello world\" em Go\nadmito que a ideia de…","frontmatter":{"date":"2019-01-12T10:55:00.000Z","title":"Deixe darem pitaco no seu código com Prettier","tags":["desenvolvimento-web","formatters","editores","prettier","javascript","html","css"],"thumbnail":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAACPklEQVQ4y72U2W8SURSH+y9oUoEyXWCkszAss95hlgvDAAXBCswEii0MVIpU0gCyqG2K6YMmRE0fTNQ/12vVmJghaRpj8j2cly+/c3POuWsbYeHOrP0z2UfzPor7G5q/lbwZT2xx6g/4P2AxgDGCPyL9xE1mRC/JxhoOnF/Io5kymasvETP46pwpWSFBJ5QMkTBDIOUi+8PCOs231dSXvUJeVKc94fNr+cNcXk6lT3PwcQJYWQrJmV1XGSX7SJauNsHZG+V0CMeTaP2gmjuaO5dOZUCVyqH64Tar7gLDLZkR1gneaWvjoULU67FOF5fTseRjWd+fGbWJWZ1krTinBUDKz4gubXsorrJvT5p9uzzl4OEWI+FxdYdiFg32ui1edySgJTZZiLnK6zTX0iutdONd3744ye3AFOX0hU7Xnh81Lp3aoEyDBC4ZqEfXZD6Xyxt2pdgrdmzZMvJWoyta7bRzXjpZ4KYV4GHI9c03o4rzta56Nk32m3YBfjvIfq3CZ3lw/KR1WOiRrIZMdxklP6DY+l63athXPf392BidgtEL5e1QTed5D6c9lJJBQV8lix6KzT9yBu2r5/UFhI37lLoRNe6RGg6ytGIScppUzJC0Ys5egmWPjiO9Yc0Suk/FLT4ZhSYpJ3FBC/I6LkJSyaBkFOO+YU3FWGYLy1yxKqcwXqcSJpFIo5XcjiuoQOErktFJhYVgRCJjgIyCQEREvWARCYG2wv+7xtwP49dJCt4bfHe4Z9Q8doP/P/wk3wHQp/XykeXa+gAAAABJRU5ErkJggg==","width":180,"height":180,"src":"/static/e8b6aef5d6b63ad30177b2612d8b8d45/d8216/prettier-logo.png","srcSet":"/static/e8b6aef5d6b63ad30177b2612d8b8d45/d8216/prettier-logo.png 1x"}},"publicURL":"/static/e8b6aef5d6b63ad30177b2612d8b8d45/prettier-logo.png"}},"fields":{"readingTime":{"minutes":4.57},"slug":"/2019/01/12/deixe-darem-pitaco-no-seu-codigo-com-prettier.html"}},"site":{"siteMetadata":{"author":{"name":"Klaus Peter Laube","gravatar":"https://en.gravatar.com/userimage/12163112/d3ae0c6239980b01ff1f1730b65c2ebe.jpg"},"siteUrl":"https://klauslaube.com.br"}}},"pageContext":{"slug":"/2019/01/12/deixe-darem-pitaco-no-seu-codigo-com-prettier.html"}}}