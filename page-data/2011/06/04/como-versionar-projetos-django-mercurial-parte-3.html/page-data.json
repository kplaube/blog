{"componentChunkName":"component---src-templates-blog-post-js","path":"/2011/06/04/como-versionar-projetos-django-mercurial-parte-3.html","result":{"data":{"markdownRemark":{"html":"<p>Dando continuidade a micro-série <em>Como versionar projetos \\</em>Django_ com o\n<em>Mercurial</em> (confira a <a href=\"/2011/05/10/como-versionar-projetos-django-mercurial-parte.html\">parte 1</a> e a <a href=\"/2011/05/22/como-versionar-projetos-django-mercurial-parte-2.html\" title=\"Como versionar projetos Django com o Mercurial - Parte 2\">parte 2</a>), vamos finalizar com\num exemplo prático de um projeto <a href=\"/tag/django.html\" title=\"Leia mais sobre Django\"><em>Django</em></a> usando o <a href=\"/tag/mercurial.html\" title=\"Leia mais sobre Mercurial\"><em>Mercurial</em></a>.</p>\n<h2>Começando…</h2>\n<p>Vamos reutilizar a estrutura dos <em>posts</em> anteriores. Para isso, inicie\num projeto com o <a href=\"/tag/virtualenv.html\" title=\"Leia mais sobre virtualenv\"><em>virtualenv</em></a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ cd ~/Projetos/\n$ virtualenv DjangoComHG --no-site-packages\n$ cd DjangoComHG/</code></pre></div>\n<p>Vamos aproveitar os procedimentos descritos na [parte 2][1] deste\n<em>post</em>. Caso você ainda não tenha criado um repositório no\n<a href=\"http://www.bitbucket.org/\" title=\"Versione e compartilhe código com o Mercurial\"><em>Bitbucket</em></a>, essa é uma boa oportunidade.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ hg clone &lt;caminho> django_com_hg</code></pre></div>\n<p>Não esqueça de mudar o <strong>caminho</strong> para o <strong>endereço do seu\nrepositório</strong>.</p>\n<h2>Instalando o Django</h2>\n<p>Com o <em>virtualenv</em> ativado, vamos instalar o <em>Django</em> apenas para o\nnosso ambiente <em>virtual</em> através do <em>pip</em>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ source bin/activate\n$ pip install django</code></pre></div>\n<p>Só para ter certeza que ele instalou o <em>Django</em> dentro do nosso ambiente\nvirtual, vamos abrir o terminal do <a href=\"/tag/python.html\" title=\"Leia mais sobre Python\"><em>Python</em></a> e digitar as seguintes\ninstruções:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> django\ndjango<span class=\"token punctuation\">.</span>__path__</code></pre></div>\n<p>Você deverá obter como resposta uma <em>string</em> semelhante a esta:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$HOME/Projetos/DjangoComHG/lib/python2.6/site-packages/django/</code></pre></div>\n<h2>Iniciando um projeto</h2>\n<p>Vamos fazer uma pequena brincadeira de troca de nomes de pastas, para\nque possamos criar o nosso projeto <em>Django</em> com o mesmo nome do\nrepositório <em>Mercurial</em>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ mv post_django_com_hg post_django_com_hg.bk</code></pre></div>\n<p>Agora mandamos o <code class=\"language-text\">django-admin.py</code> iniciar o projeto:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ django-admin.py startproject post_django_com_hg</code></pre></div>\n<p>Movemos os arquivos do nosso repositório para dentro de\n<code class=\"language-text\">post_django_com_hg</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ mv post_django_com_hg.bk/* post_django_com_hg/\n$ mv post_django_com_hg.bk/.hg post_django_com_hg/\n$ mv post_django_com_hg.bk/.hgignore post_django_com_hg/</code></pre></div>\n<p>Entre no diretório <code class=\"language-text\">post_django_com_hg</code> e dê um <code class=\"language-text\">hg status</code>. Os\narquivos base do <em>Django</em> não estão no projeto. Vamos adicioná-los,\ncomitá-los e dar um <code class=\"language-text\">push</code> deles para o repositório <em>Mercurial</em> no\n<em>Bitbucket</em>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ hg add .\n$ hg commit -m \"Projeto Django iniciado\"\n$ hg push</code></pre></div>\n<p>Nos <em>changesets</em> do repositório, veremos a contribuição enviada:</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 568px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c95e7c18e4f018ee5ab9d63faa63a129/10e91/changesets-no-bitbucket.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 29.166666666666668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAyUlEQVQY03WPyXLDIBBE+f+fyyknp+LIElpZJFYJGJxOfHF5eXRRdNX0MMP6SXx8fjXdlFI6XkGJUqIdxAiLspyhTERM6g3JbTOQfyRYZ87yJNezNco7hyKt9TgLiKgw3rbNpRuFFtpcn6BKal+OrK61wOJnH4LQVq4WlnV8PH03SilrrTH2meCjc+H2ds5hnhgCbkzO5kU23bDIbZiVDxGb5FzuyTgFayYqBWEp1Q+f2mGptbK+vfSc69Xcku+p/33RJO3HnxD+BT9ZWF52uq1AAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"&quot;Changeset no BitBucket&quot;\"\n        title=\"Changeset no BitBucket\"\n        src=\"/static/c95e7c18e4f018ee5ab9d63faa63a129/10e91/changesets-no-bitbucket.png\"\n        srcset=\"/static/c95e7c18e4f018ee5ab9d63faa63a129/8514f/changesets-no-bitbucket.png 192w,\n/static/c95e7c18e4f018ee5ab9d63faa63a129/804b2/changesets-no-bitbucket.png 384w,\n/static/c95e7c18e4f018ee5ab9d63faa63a129/10e91/changesets-no-bitbucket.png 568w\"\n        sizes=\"(max-width: 568px) 100vw, 568px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Changeset no BitBucket</figcaption>\n  </figure></p>\n<p><strong>Pronto!</strong> Basicamente, para termos o <em>Mercurial</em> versionando um\nprojeto <em>Django</em>, são estes os procedimentos… mas eu sei como deixar a\ncoisa ainda mais interessante</p>\n<h2>Hora de congelar!</h2>\n<p>Digamos que você tenha um colaborador envolvido com o projeto. Quer\ndizer que ele vai ter que criar um <em>virtualenv</em>, clonar o repositório e\ninstalar as dependências do projeto? A resposta é “sim” – Mas podemos\nfacilitar esta última parte através do <em>pip</em>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ pip freeze\n\nDjango==1.3\nwsgiref==0.1.2</code></pre></div>\n<p>O comando <code class=\"language-text\">pip freeze</code> vai coletar os pacotes <em>Python</em> instalados\n(nesse nosso caso, dentro do nosso ambiente virtual através do\n<em>virtualenv</em>) e exibir para a gente em formato de lista. Com isso,\npodemos criar um arquivo que armazene as dependências do nosso projeto:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ pip freeze > requirements.txt</code></pre></div>\n<p>Vamos desativar o ambiente atual, criar um novo e instalar as\ndependências listadas nesta arquivo <code class=\"language-text\">requirements.txt</code> neste novo\nambiente:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ deactivate\n$ cd ~/Projetos/\n$ virtualenv DjangoComHG-2 --no-site-packages\n$ source DjangoComHG-2/bin/activate\n$ pip install -r DjangoComHG/post_django_com_hg/requirements.txt</code></pre></div>\n<p>Veja a mágica acontecendo… o <em>pip</em> instalará todas as dependências\ncontidas em <code class=\"language-text\">requirements.txt</code> em nosso novo ambiente virtual.</p>\n<p>Podemos resumir os comandos acima em:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ pip install -E DjangoComHG-2 -r DjangoComHG/post_django_com_hg/requirements.txt</code></pre></div>\n<p>A instrução acima deverá ser escrita em um linha só.</p>\n<h2>Versionando dependências do projeto</h2>\n<p>Logo o <code class=\"language-text\">requirements.txt</code> sendo um arquivo de texto, pode ser\nfacilmente versionado pelo <em>Mercurial</em>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ cd ~/Projetos/DjangoComHG/post_django_com_hg\n$ hg add requirements.txt\n$ hg commit -m \"Adicionado arquivo de dependências do pip\"\n$ hg push</code></pre></div>\n<p>Finalmente, temos um projeto <em>Django</em> versionado com <em>Mercurial</em>,\ndisponível no <em>Bitbucket</em>, e com dependências facilmente gerenciáveis\natravés do <em>pip</em> em conjunto com o <em>virtualenv</em>.</p>\n<p>E você… utiliza controle de versão com o <em>Django</em> de uma outra forma?\nConte-nos através dos comentários abaixo.</p>\n<p>Até a próxima…</p>","excerpt":"Dando continuidade a micro-série Como versionar projetos \\Django_ com o\nMercurial (confira a parte 1 e a parte 2), vamos finalizar com\num…","frontmatter":{"date":"2011-06-04 12:27","title":"Como versionar projetos Django com o Mercurial - Parte 3","tags":["desenvolvimento-web","python","django","virtualenv","mercurial","pip","vcs"],"thumbnail":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAACjElEQVQ4y52V3UtTYRzH9yd035Vl0YvOapuatjZzLTNFSSudQ5u2uSVpyQx7p5KIrFUXSlAGvaBpJWlI2qpRGPZ2MURUspQKusjWsumcXezb8/zsjCnnrNkDD+c85/x+n/N7PzKFRQepvc6cjmjeh8vJ/geoLN+8cKAgtNa8CfGlGsjZ5s8SyrSI262mq9hHZVIwbgVXLDhpgXtkAL39r5G8dyvqbjgwOPYe5+80YkVxClTl+sgWCi+TbBmIM6lhc9RAWOsZsKvPSfcv3H1YUqhEonWLNJAss8zGZ1XJBizOl8Nw2kqAX1M+aKpyUHGpFm2uDtgbT2A184B7IgoU3BRiZb1gx9FrZ3D14S0CTvonoavOg96+E2Xn9iP7kJHFMU08KYJlHJZ+IA9vh9yYv/yBaeZyJu66Oun86NVTLDWopF3m1nE3e964SGH8pwf1LQ24/fgenacCfqRUZKLZeZ/OHb3diDUkigOVbMtLtcylfIoVX8ebzmJRViyMdba5wCftdO58GQnIS8S0EduPmRD4PUMKhacsiGFZtDkOzgG2hIA90kC+eYC1Vbnw+iZI4XpXM2IKFJQAvnwsKTyGUQNVzMqVxam42d0aSsTw5w8Y+TJK98FgEOp92VQy/4xheJspzDo0tDdh7Osnyuz0TADfvN/R/3GQubwNznfPCdj67AGWFSUxoF66DoXrcmMytZTevgMZNbuo/riypjIHnokfBLzYdmVWjgEle1mACv0pp6GgpRbMPVKCgdGhUE1m1RYhniVSslPEwLzYOTyBQc311Qw4jHGvB5WXD7OaTaW4c9kFzUOhi/hk4ZXAE8Nh/JnYvIwIDAer/g7VNXvSQpaJyUYFnD8AIv0a/gClXoHnX4B8twAAAABJRU5ErkJggg==","width":180,"height":180,"src":"/static/46012f1b5a5e44b0747baafa90e04f8a/d8216/django-logo.png","srcSet":"/static/46012f1b5a5e44b0747baafa90e04f8a/d8216/django-logo.png 1x"}},"publicURL":"/static/46012f1b5a5e44b0747baafa90e04f8a/django-logo.png"}},"fields":{"readingTime":{"minutes":3.285},"slug":"/2011/06/04/como-versionar-projetos-django-mercurial-parte-3.html"}},"site":{"siteMetadata":{"author":{"name":"Klaus Peter Laube","gravatar":"https://en.gravatar.com/userimage/12163112/d3ae0c6239980b01ff1f1730b65c2ebe.jpg"},"siteUrl":"https://klauslaube.com.br"}}},"pageContext":{"slug":"/2011/06/04/como-versionar-projetos-django-mercurial-parte-3.html"}},"staticQueryHashes":["2831923220","4114525740"]}