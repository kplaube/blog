{"componentChunkName":"component---src-templates-blog-post-js","path":"/2011/12/19/nginx-poderoso-rapido-facil.html","result":{"data":{"markdownRemark":{"html":"<p>Para quem (assim como eu) começou com o <a href=\"/tag/php.html\" title=\"Leia mais sobre PHP\"><em>PHP</em></a>, uma das opções mais viáveis\npara servir projetos na <a href=\"/tag/desenvolvimento-web.html\" title=\"Leia mais sobre Web\"><em>web</em></a> sempre foi o <a href=\"http://httpd.apache.org/\" title=\"Página oficial do projeto Apache\"><em>Apache</em></a>. <em>Open source</em>,\nprático e disponível em quase toda hospedagem de respeito (afinal, ele vem por\npadrão em quase toda distro <a href=\"/tag/linux.html\" title=\"Leia mais sobre Linux\"><em>Linux</em></a>), há anos que ele faz a famosa\ntríade \"AMP\" (<em>Apache</em>, <a href=\"http://www.mysql.com/\" title=\"Conheça o banco de dados open source mais popular do mundo\"><em>MySQL</em></a> e <em>PHP</em>).</p>\n<p>Acontece que com as demandas recentes que a <em>internet</em> tem exigido de\nalgumas aplicações <em>web</em> (como <em>Twitter</em> e <em>Facebook</em>), a necessidade\npor performance começou a ser uma grande premissa em determinados tipos\nde projetos. E é apoiado nesse cenário que o <em>Nginx</em> vem ganhando\ncada vez mais força no mercado. Afinal, não é a toa que ele é conhecido\npor “aguentar porrada”.</p>\n<h2>A verdade sobre o Nginx (ou não)</h2>\n<p>O <a href=\"http://nginx.org/\" title=\"Conheça o Nginx!\"><em>Nginx</em></a> é um <a href=\"http://pt.wikipedia.org/wiki/Servidor_web\" title=\"Entenda o que é um servidor Web\"><strong>servidor Web</strong></a>, <a href=\"http://pt.wikipedia.org/wiki/Proxy_reverso\" title=\"Entenda o que é um Proxy Reverso\"><strong>proxy reverso</strong></a>,\n<strong>proxy balanceador de carga</strong>, e faz praticamente tudo que o <em>Apache</em>\nfaz, só que muito mais rápido!</p>\n<p>Técnicamente, o <em>Nginx</em> consome menos memória que o <em>Apache</em>, pois lida\ncom requisições <em>web</em> através do conceito de “event-based web server“,\njá o <em>Apache</em> é baseado no conceito “process-based server“. <em>David E.\nChen</em> faz uma excelente analogia entre os dois conceitos em seu artigo\n“<a href=\"http://daverecycles.com/post/3104767110/explain-event-driven-web-servers-to-your-grandma\" title=\"Leia esta boa analogia entre os conceitos\">Explain “Event-Driven” Web Servers to Your Grandma</a>“.</p>\n<p>Eles não são necessariamente “concorrentes”, <em>Apache</em> e <em>Nginx</em> podem\ntrabalhar juntos! <em>Paulo Higa</em>, através do seu artigo\n<a href=\"http://paulohiga.com/posts/nginx-proxy-reverso-php-apache.php\" title=\"Aprenda como fazer o Nginx tornar-se um proxy reverso\">“Usando Nginx como proxy reverso e diminuindo o consumo do servidor</a>“, nos mostra\ncomo ele diminuiu o consumo de memória do <em>Apache</em> fazendo com que as\nrequisições <em>web</em> passassem primeiro pelo <em>Nginx</em>. Desse modo, o\n<em>Apache</em> não precisou servir arquivos estáticos, e pode depender do bom\ncontrole de <em>cache</em> feito pelo <em>Nginx</em>.</p>\n<p>Bom, a intenção não é denegrir a imagem do <em>Apache</em> (até parece que um\nsimples mortal como eu conseguiria tal feito), então vamos adiante.</p>\n<h2>Fácil?! Instalando e sendo bem recebido</h2>\n<p>Estou utilizando o <a href=\"http://www.slackware.com/\" title=\"Conheça e delicie-se com o Slackware Linux\"><em>Slackware 13.37</em></a> para realizar os procedimentos\nabaixo, mas acredito que eles possam ser executados em qualquer\ndistribuição <em>Linux</em>, sem maiores problemas.</p>\n<p>Vamos começar fazendo o <em>download</em> da versão mais recente (até então),\ndireto do site oficial do <em>Nginx</em>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ wget http://nginx.org/download/nginx-1.0.11.tar.gz</code></pre></div>\n<p>O procedimento de instalação não difere em nada do método tradicional\nque estamos acostumados no <em>Linux</em>. Apenas lembre-se de executar o\n<code class=\"language-text\">make install</code> como <code class=\"language-text\">root</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ tar -zxvf nginx-1.0.11.tar.gz; cd nginx-1.0.11\n$ ./configure\n$ make\n$ make install</code></pre></div>\n<p>O <em>Nginx</em> será instalado em <code class=\"language-text\">/usr/local/nginx/</code>. Você pode iniciar o\nserviço através do comando (como <code class=\"language-text\">root</code>):</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ /usr/local/nginx/sbin/nginx</code></pre></div>\n<p>Acessando o seu <code class=\"language-text\">localhost</code>, o serviço estará pronto e dando boas\nvindas!</p>\n<h2>Configurando um servidor simples</h2>\n<p>Para homenagear o nosso amigo <em>Apache</em>, vamos fazer o <em>Nginx</em> servir um\n<a href=\"/tag/html5.html\" title=\"Leia mais sobre HTML5\"><em>HTML</em></a> com a clássica mensagem “It works“, em outra porta e <em>path</em>.</p>\n<p>Abra (como <code class=\"language-text\">root</code>) o arquivo <code class=\"language-text\">/usr/local/nginx/conf/nginx.conf</code>, no\nfinal do arquivo, adicione a seguinte expressão antes do fechamento das\nchaves:</p>\n<div class=\"gatsby-highlight\" data-language=\"config\"><pre class=\"language-config\"><code class=\"language-config\">include example;</code></pre></div>\n<p>Esta expressão importará o arquivo <code class=\"language-text\">/usr/local/nginx/conf/example</code>,\nque criaremos a seguir:</p>\n<div class=\"gatsby-highlight\" data-language=\"config\"><pre class=\"language-config\"><code class=\"language-config\">server {\n    listen        127.0.0.1:8080;\n    server_name   example;\n    access_log    /usr/local/nginx/logs/example.access.log;\n    error_log     /usr/local/nginx/logs/example.error.log;\n    location / {\n        root  /var/www/example;\n        index index.html index.htm;\n    }\n}</code></pre></div>\n<p>Intuitivo não?! Vamos criar o <em>path</em> onde armazenaremos o <em>HTML</em>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">mkdir /var/www/example\necho \"It works! \" > /var/www/example/index.html</code></pre></div>\n<p>Basta acessar o endereço <code class=\"language-text\">localhost:8080</code>, e pronto!</p>\n<p>Como é possível perceber, os arquivos de configuração do <em>Nginx</em> são\nsimples e intuitivos. Existem várias referências na <em>web</em> ensinando a\nmontar <em>proxy</em> reverso, servir páginas dinâmicas com <em>FastCGI</em> ou\n<em>WSGI</em>, utilizar <em>SSL</em>, etc. Nada que o bom amigo <em>Google</em> não possa\nresolver.</p>\n<h2>Considerações finais</h2>\n<p>Quer dizer que agora eu tenho que largar tudo e correr para utilizar o\n<em>Nginx</em>? A resposta é <strong>não</strong>.</p>\n<p>Gosto dos ensinamentos do pessoal da <a href=\"http://37signals.com/\" title=\"Você não sabe o que é a 37Signals?\"><em>37Signals</em></a>, e um deles é para\ndeixarmos a preocupação com performance para quando isto for realmente\num problema (caso contrário, ninguém começaria projetos em <em>Ruby</em> ou\n<em>Python</em>).</p>\n<p>Portanto, se você tem um <em>blog</em> em <em>WordPress</em> servido através de um\n<em>Apache</em>... deixe estar. Garanto que o <em>Apache</em> é a melhor solução para\nvocê neste momento. E caso você venha a ter problemas com performance,\ngaranto que instalar e configurar um <em>Nginx</em> dentro da sua\ninfraestrutura será o menor dos seus problemas.</p>\n<h2>Referências</h2>\n<ul>\n<li><a href=\"http://nginx.org/\" title=\"Conheça, instale e use agora o Nginx!\">Site oficial do projeto <em>Nginx</em> (em Inglês)</a></li>\n<li><a href=\"http://daverecycles.com/post/3104767110/explain-event-driven-web-servers-to-your-grandma\" title=\"Entenda a diferença entre o webserver baseado em eventos, e outro baseado em processos\"><em>Daverecycles.com – Explain “Event-Driven” Web Servers to Your Grandma</em></a></li>\n<li><a href=\"http://www.linuxjournal.com/article/10108\" title=\"Excelente artigo sobre o Nginx\"><em>Linux Journal – Nginx: the High-Performance Web Server and Reverse Proxy</em></a></li>\n<li><a href=\"http://paulohiga.com/posts/nginx-proxy-reverso-php-apache.php\" title=\"Artigo de Paulo Higa sobre Nginx e proxy reverso, com Apache\"><em>Paulo Higa</em> – Usando o <em>nginx</em> como <em>proxy</em> reverso e diminuindo o consumo do servidor</a></li>\n<li><a href=\"http://pt.wikipedia.org/wiki/Proxy_reverso\" title=\"Leia mais na Wikipedia\"><em>Wikipedia</em> – <em>Proxy</em> reverso</a></li>\n<li><a href=\"http://pt.wikipedia.org/wiki/Servidor_web\" title=\"Leia mais na Wikipedia\"><em>Wikipedia</em> – Servidor <em>Web</em></a></li>\n<li><a href=\"http://www.wikivs.com/wiki/Apache_vs_nginx\" title=\"Entenda um pouco mais a diferença entre Apache e Nginx\"><em>WikiVS – Apache vs Nginx</em></a></li>\n</ul>","excerpt":"Para quem (assim como eu) começou com o PHP, uma das opções mais viáveis\npara servir projetos na web sempre foi o Apache. Open source,…","frontmatter":{"date":"2011-12-19T20:41:00.000Z","title":"Nginx: Poderoso, rápido e fácil","tags":["infraestrutura","nginx","linux","slackware","desenvolvimento-web"],"thumbnail":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAABi0lEQVQ4y+1TWUsCURj1x/US0j9olR56iwzbiDYU29CipCgNtaDFoqLFFCVLC7ekss2istSohyj1wQpnTnMvLpNYEfQg0WEG7tx7vjPfN+eMgGVZ/OYt+BcsLEFwFxVkWAYMw2QOyDMlcMi3T/ZoTaouzSEQgAdC4OM1+YZc5HL4oCOTRffWKIwBG91UOScRfAqjydQDyYYci8cmXD7eYMw9DY13jnLMF3YoHGrINofhvz+DK7QPmU2V7bBmuRVCnYgetJj7IDHKMe6ZgSPohZQrsl05ofbMonGjh3KEehFqV7tgv3ajWFuJEn013KGDrKB4XUbfKlpoQJlBjA7rAIZ2dei0DqLcUI+VUwv67eOo4NaEYzrfRrOpF57wIYomSjnRKhzdB7KCyh0NnhMx7EX8qFuT4i72QDslwksnZm7kW2h982izKOCLHCGaiGPENUU5RJRM0G5RfjSFOMVHkkki+hJPfe1cY9jPTeHnKG0/38l0VPLFKxMhfmy+Cirz42AX/K/33ch/s8N3bqfyusRfvxwAAAAASUVORK5CYII=","width":180,"height":180,"src":"/static/d7330ffd17fe536ff1a29251d9317a57/d8216/nginx-logo.png","srcSet":"/static/d7330ffd17fe536ff1a29251d9317a57/d8216/nginx-logo.png 1x"}},"publicURL":"/static/d7330ffd17fe536ff1a29251d9317a57/nginx-logo.png"}},"fields":{"readingTime":{"minutes":4.945},"slug":"/2011/12/19/nginx-poderoso-rapido-facil.html"}},"site":{"siteMetadata":{"author":{"name":"Klaus Peter Laube","gravatar":"https://en.gravatar.com/userimage/12163112/d3ae0c6239980b01ff1f1730b65c2ebe.jpg"},"siteUrl":"https://klauslaube.com.br"}}},"pageContext":{"slug":"/2011/12/19/nginx-poderoso-rapido-facil.html"}},"staticQueryHashes":["2831923220","4114525740"]}