<!DOCTYPE html><html lang=pt-br> <head><meta charset=utf-8><title>Nginx: Poderoso, rápido e fácil | Klaus Laube</title><meta name=author content="Klaus Peter Laube"><meta name=description content="O Nginx é um servidor Web, proxy reverso, proxy balanceador de carga, e faz praticamente tudo que o Apache faz, só que muito mais rápido!"><meta name=robots content=index,follow><meta property=og:site_name content="Klaus Laube"><meta property=og:type content=website><meta name=keywords content="infraestrutura, ambiente-de-desenvolvimento, nginx, linux, slackware"><meta property=og:title content="Nginx: Poderoso, rápido e fácil"><meta property=og:description content="O Nginx é um servidor Web, proxy reverso, proxy balanceador de carga, e faz praticamente tudo que o Apache faz, só que muito mais rápido!"><meta property=og:url content=https://klauslaube.com.br/2011/12/19/nginx-poderoso-rapido-facil.html><meta property=og:image content><meta property=fb:app_id content=262757647133878><meta name=google-site-verification content=xCq0H3B3JhkPcAdZ03J0vayijvH_g1rQVMZ_DVcMsQY><meta name=viewport content="width=device-width, initial-scale=1.0"><link rel=icon type=image/x-icon href=https://klauslaube.com.br/favicon.ico><link rel=alternate type=application/rss+xml title="Klaus Laube » Feed" href=https://klauslaube.com.br/feed/rss.xml><link rel=canonical href=https://klauslaube.com.br/2011/12/19/nginx-poderoso-rapido-facil.html><link rel=stylesheet href=https://unpkg.com/purecss@1.0.0/build/pure-min.css integrity=sha384-nn4HPE8lTHyVtfCBi5yW9d20FjT8BJwUXyWZT9InLYax14RDjBj46LmSztkmNP9w crossorigin=anonymous><link rel=stylesheet href=https://klauslaube.com.br/theme/css/styles.min.css?0830b1e2></head> <body> <div class="Page pure-g is-fullEntry"> <div class="PageHeader pure-u-1"> <nav class="pure-menu pure-menu-open pure-menu-horizontal"> <a href=https://klauslaube.com.br/index.html title="Home page" class="PageHeader-link pure-menu-heading pure-menu-link">Klaus<span class=u-highlighted>Laube</a> <ul class="PageHeader-menu pure-menu-list"> <li class=pure-menu-item> <a href=https://about.me/klauslaube class="PageHeader-menu-link pure-menu-link">Contato</a> </li> </ul> </nav> </div> <div class="PageContent pure-u-1"> <article class="Article u-box" itemscope itemtype=http://schema.org/BlogPosting> <div itemprop=image itemscope itemtype=http://schema.org/ImageObject> <meta itemprop=url content> </div> <span itemprop=mainEntityOfPage> <header> <h1 class=Article-title itemprop="headline name"> Nginx: Poderoso, rápido e fácil </h1> <p class=Article-meta> Por <span class=Article-author itemprop=author>Klaus Peter Laube</span>. <span class=Article-pubDate> Publicado em <time datetime=2011-12-19T20:41:00-02:00 itemprop=datePublished>19 Dez, 2011</time> </span> </p> </header> <div class=Article-content itemprop=articleBody> <img src=/images/blog/nginx-logo.png alt="Logotipo do Nginx" class=representative-image width=180 height=180> <p>Para quem (assim como eu) começou com o <a href=https://klauslaube.com.br/tag/php.html title="Leia mais sobre PHP"><em>PHP</em></a>, uma das opções mais viáveis para servir projetos na <a href=https://klauslaube.com.br/tag/web.html title="Leia mais sobre Web"><em>web</em></a> sempre foi o <a href=http://httpd.apache.org/ title="Página oficial do projeto Apache"><em>Apache</em></a>. <em>Open source</em>, prático e disponível em quase toda hospedagem de respeito (afinal, ele vem por padrão em quase toda distro <a href=https://klauslaube.com.br/tag/linux.html title="Leia mais sobre Linux"><em>Linux</em></a>), há anos que ele faz a famosa tríade "AMP" (<em>Apache</em>, <a href=http://www.mysql.com/ title="Conheça o banco de dados open source mais popular do mundo"><em>MySQL</em></a> e <em>PHP</em>).</p> <!-- PELICAN_END_SUMMARY --> <p>Acontece que com as demandas recentes que a <em>internet</em> tem exigido de algumas aplicações <em>web</em> (como <em>Twitter</em> e <em>Facebook</em>), a necessidade por performance começou a ser uma grande premissa em determinados tipos de projetos. E é apoiado nesse cenário que o <em>Nginx</em> vem ganhando cada vez mais força no mercado. Afinal, não é a toa que ele é conhecido por “aguentar porrada”.</p> <h2>A verdade sobre o Nginx (ou não)</h2> <p>O <a href=http://nginx.org/ title="Conheça o Nginx!"><em>Nginx</em></a> é um <a href=http://pt.wikipedia.org/wiki/Servidor_web title="Entenda o que é um servidor Web"><strong>servidor Web</strong></a>, <a href=http://pt.wikipedia.org/wiki/Proxy_reverso title="Entenda o que é um Proxy Reverso"><strong>proxy reverso</strong></a>, <strong>proxy balanceador de carga</strong>, e faz praticamente tudo que o <em>Apache</em> faz, só que muito mais rápido!</p> <p>Técnicamente, o <em>Nginx</em> consome menos memória que o <em>Apache</em>, pois lida com requisições <em>web</em> através do conceito de “event-based web server“, já o <em>Apache</em> é baseado no conceito “process-based server“. <em>David E. Chen</em> faz uma excelente analogia entre os dois conceitos em seu artigo “<a href=http://daverecycles.com/post/3104767110/explain-event-driven-web-servers-to-your-grandma title="Leia esta boa analogia entre os conceitos">Explain “Event-Driven” Web Servers to Your Grandma</a>“.</p> <p>Eles não são necessariamente “concorrentes”, <em>Apache</em> e <em>Nginx</em> podem trabalhar juntos! <em>Paulo Higa</em>, através do seu artigo <a href=http://paulohiga.com/posts/nginx-proxy-reverso-php-apache.php title="Aprenda como fazer o Nginx tornar-se um proxy reverso">“Usando Nginx como proxy reverso e diminuindo o consumo do servidor</a>“, nos mostra como ele diminuiu o consumo de memória do <em>Apache</em> fazendo com que as requisições <em>web</em> passassem primeiro pelo <em>Nginx</em>. Desse modo, o <em>Apache</em> não precisou servir arquivos estáticos, e pode depender do bom controle de <em>cache</em> feito pelo <em>Nginx</em>.</p> <p>Bom, a intenção não é denegrir a imagem do <em>Apache</em> (até parece que um simples mortal como eu conseguiria tal feito), então vamos adiante.</p> <h2>Fácil?! Instalando e sendo bem recebido</h2> <p>Estou utilizando o <a href=http://www.slackware.com/ title="Conheça e delicie-se com o Slackware Linux"><em>Slackware 13.37</em></a> para realizar os procedimentos abaixo, mas acredito que eles possam ser executados em qualquer distribuição <em>Linux</em>, sem maiores problemas.</p> <p>Vamos começar fazendo o <em>download</em> da versão mais recente (até então), direto do site oficial do <em>Nginx</em>:</p> <div class=highlight><pre><span></span>$ wget http://nginx.org/download/nginx-1.0.11.tar.gz
</pre></div> <p>O procedimento de instalação não difere em nada do método tradicional que estamos acostumados no <em>Linux</em>. Apenas lembre-se de executar o <code>make install</code> como <code>root</code>:</p> <div class=highlight><pre><span></span>$ tar -zxvf nginx-1.0.11.tar.gz<span class=p>;</span> <span class=nb>cd</span> nginx-1.0.11
$ ./configure
$ make
$ make install
</pre></div> <p>O <em>Nginx</em> será instalado em <code>/usr/local/nginx/</code>. Você pode iniciar o serviço através do comando (como <code>root</code>):</p> <div class=highlight><pre><span></span>$ /usr/local/nginx/sbin/nginx
</pre></div> <p>Acessando o seu <code>localhost</code>, o serviço estará pronto e dando boas vindas!</p> <h2>Configurando um servidor simples</h2> <p>Para homenagear o nosso amigo <em>Apache</em>, vamos fazer o <em>Nginx</em> servir um <a href=https://klauslaube.com.br/tag/html5.html title="Leia mais sobre HTML5"><em>HTML</em></a> com a clássica mensagem “It works“, em outra porta e <em>path</em>.</p> <p>Abra (como <code>root</code>) o arquivo <code>/usr/local/nginx/conf/nginx.conf</code>, no final do arquivo, adicione a seguinte expressão antes do fechamento das chaves:</p> <div class=highlight><pre><span></span><span class=k>include</span> <span class=n>example</span>;
</pre></div> <p>Esta expressão importará o arquivo <code>/usr/local/nginx/conf/example</code>, que criaremos a seguir:</p> <div class=highlight><pre><span></span><span class=k>server</span> <span class=p>{</span>
    <span class=kn>listen</span>        <span class=n>127.0.0.1</span><span class=p>:</span><span class=mi>8080</span><span class=p>;</span>
    <span class=kn>server_name</span>   <span class=s>example</span><span class=p>;</span>
    <span class=kn>access_log</span>    <span class=s>/usr/local/nginx/logs/example.access.log</span><span class=p>;</span>
    <span class=kn>error_log</span>     <span class=s>/usr/local/nginx/logs/example.error.log</span><span class=p>;</span>
    <span class=kn>location</span> <span class=s>/</span> <span class=p>{</span>
        <span class=kn>root</span>  <span class=s>/var/www/example</span><span class=p>;</span>
        <span class=kn>index</span> <span class=s>index.html</span> <span class=s>index.htm</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>}</span>
</pre></div> <p>Intuitivo não?! Vamos criar o <em>path</em> onde armazenaremos o <em>HTML</em>:</p> <div class=highlight><pre><span></span>mkdir /var/www/example
<span class=nb>echo</span> <span class=s2>&quot;It works! &quot;</span> &gt; /var/www/example/index.html
</pre></div> <p>Basta acessar o endereço <code>localhost:8080</code>, e pronto!</p> <p>Como é possível perceber, os arquivos de configuração do <em>Nginx</em> são simples e intuitivos. Existem várias referências na <em>web</em> ensinando a montar <em>proxy</em> reverso, servir páginas dinâmicas com <em>FastCGI</em> ou <em>WSGI</em>, utilizar <em>SSL</em>, etc. Nada que o bom amigo <em>Google</em> não possa resolver.</p> <h2>Considerações finais</h2> <p>Quer dizer que agora eu tenho que largar tudo e correr para utilizar o <em>Nginx</em>? A resposta é <strong>não</strong>.</p> <p>Gosto dos ensinamentos do pessoal da <a href=http://37signals.com/ title="Você não sabe o que é a 37Signals?"><em>37Signals</em></a>, e um deles é para deixarmos a preocupação com performance para quando isto for realmente um problema (caso contrário, ninguém começaria projetos em <em>Ruby</em> ou <em>Python</em>).</p> <p>Portanto, se você tem um <em>blog</em> em <em>WordPress</em> servido através de um <em>Apache</em>... deixe estar. Garanto que o <em>Apache</em> é a melhor solução para você neste momento. E caso você venha a ter problemas com performance, garanto que instalar e configurar um <em>Nginx</em> dentro da sua infraestrutura será o menor dos seus problemas.</p> <h2>Referências</h2> <ul> <li><a href=http://nginx.org/ title="Conheça, instale e use agora o Nginx!">Site oficial do projeto <em>Nginx</em> (em Inglês)</a></li> <li><a href=http://daverecycles.com/post/3104767110/explain-event-driven-web-servers-to-your-grandma title="Entenda a diferença entre o webserver baseado em eventos, e outro baseado em processos"><em>Daverecycles.com – Explain “Event-Driven” Web Servers to Your Grandma</em></a></li> <li><a href=http://www.linuxjournal.com/article/10108 title="Excelente artigo sobre o Nginx"><em>Linux Journal – Nginx: the High-Performance Web Server and Reverse Proxy</em></a></li> <li><a href=http://paulohiga.com/posts/nginx-proxy-reverso-php-apache.php title="Artigo de Paulo Higa sobre Nginx e proxy reverso, com Apache"><em>Paulo Higa</em> – Usando o <em>nginx</em> como <em>proxy</em> reverso e diminuindo o consumo do servidor</a></li> <li><a href=http://pt.wikipedia.org/wiki/Proxy_reverso title="Leia mais na Wikipedia"><em>Wikipedia</em> – <em>Proxy</em> reverso</a></li> <li><a href=http://pt.wikipedia.org/wiki/Servidor_web title="Leia mais na Wikipedia"><em>Wikipedia</em> – Servidor <em>Web</em></a></li> <li><a href=http://www.wikivs.com/wiki/Apache_vs_nginx title="Entenda um pouco mais a diferença entre Apache e Nginx"><em>WikiVS – Apache vs Nginx</em></a></li> </ul> </div> </span> <div class=Article-tags> <span class=Article-tagLabel>Tags:</span> <span itemprop=keywords> <a href=https://klauslaube.com.br/tag/infraestrutura.html title="Leia mais sobre" class=Article-tagLink>infraestrutura</a> <a href=https://klauslaube.com.br/tag/ambiente-de-desenvolvimento.html title="Leia mais sobre" class=Article-tagLink>ambiente-de-desenvolvimento</a> <a href=https://klauslaube.com.br/tag/nginx.html title="Leia mais sobre" class=Article-tagLink>nginx</a> <a href=https://klauslaube.com.br/tag/linux.html title="Leia mais sobre" class=Article-tagLink>linux</a> <a href=https://klauslaube.com.br/tag/slackware.html title="Leia mais sobre" class=Article-tagLink>slackware</a> </span> </div> <div class=Article-comments> <div id=disqus_thread></div> <script type=text/javascript>
        var disqus_shortname = "klauslaube";
        var disqus_identifier = "2011/12/19/nginx-poderoso-rapido-facil.html";

        (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script> <noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript rel=nofollow>comments powered by Disqus.</a></noscript> </div> </article> </div> <footer class="PageFooter pure-u-1"> <div class=u-box> <p>O conteúdo deste blog está sob a licença <a class=PageFooter-link href=http://creativecommons.org/licenses/by/3.0/deed.pt_BR title="Distribua, adapte, use. Mas mencione o autor." rel=nofollow>Creative Commons Attribution 3.0</a>.</p> <p>O código está disponível em <a class=PageFooter-link href=https://github.com/kplaube/blog/ title=Contribute! rel=nofollow>GitHub</a>.</p> </div> </footer> </div> <script>
        (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
        function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
        e=o.createElement(i);r=o.getElementsByTagName(i)[0];
        e.src='//www.google-analytics.com/analytics.js';
        r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
        ga('create','UA-19657400-1');ga('send','pageview');
    </script> </body> </html>