<!DOCTYPE html><html lang=pt-br> <head><meta charset=utf-8><title>Como versionar projetos Django com o Mercurial - Parte 2 | Klaus Laube</title><meta name=author content="Klaus Peter Laube"><meta name=description content="Conheça os comandos básicos do Mercurial e aprenda a criar um repositório remoto e a compartilhar o seu código com outros desenvolvedores."><meta name=robots content=index,follow><meta property=og:site_name content="Klaus Laube"><meta property=og:type content=website><meta name=keywords content="desenvolvimento, ambiente-de-desenvolvimento, python, django, mercurial"><meta property=og:title content="Como versionar projetos Django com o Mercurial - Parte 2"><meta property=og:description content="Conheça os comandos básicos do Mercurial e aprenda a criar um repositório remoto e a compartilhar o seu código com outros desenvolvedores."><meta property=og:url content=https://klauslaube.com.br/2011/05/22/como-versionar-projetos-django-mercurial-parte-2.html><meta property=og:image content=https://klauslaube.com.br//images/blog/bitbucket-logo.png><meta property=fb:app_id content=262757647133878><meta name=google-site-verification content=xCq0H3B3JhkPcAdZ03J0vayijvH_g1rQVMZ_DVcMsQY><meta name=viewport content="width=device-width, initial-scale=1.0"><link rel=icon type=image/x-icon href=https://klauslaube.com.br/favicon.ico><link rel=alternate type=application/rss+xml title="Klaus Laube » Feed" href=https://klauslaube.com.br/feed/rss.xml><link rel=canonical href=https://klauslaube.com.br/2011/05/22/como-versionar-projetos-django-mercurial-parte-2.html><link rel=stylesheet href=https://unpkg.com/purecss@1.0.0/build/pure-min.css integrity=sha384-nn4HPE8lTHyVtfCBi5yW9d20FjT8BJwUXyWZT9InLYax14RDjBj46LmSztkmNP9w crossorigin=anonymous><link rel=stylesheet href=https://klauslaube.com.br/theme/css/styles.min.css?0830b1e2></head> <body> <div class="Page pure-g is-fullEntry"> <div class="PageHeader pure-u-1"> <nav class="pure-menu pure-menu-open pure-menu-horizontal"> <a href=https://klauslaube.com.br/index.html title="Home page" class="PageHeader-link pure-menu-heading pure-menu-link">Klaus<span class=u-highlighted>Laube</a> <ul class="PageHeader-menu pure-menu-list"> <li class=pure-menu-item> <a href=https://about.me/klauslaube class="PageHeader-menu-link pure-menu-link">Contato</a> </li> </ul> </nav> </div> <div class="PageContent pure-u-1"> <article class="Article u-box" itemscope itemtype=http://schema.org/BlogPosting> <div itemprop=image itemscope itemtype=http://schema.org/ImageObject> <meta itemprop=url content=https://klauslaube.com.br//images/blog/bitbucket-logo.png> </div> <span itemprop=mainEntityOfPage> <header> <h1 class=Article-title itemprop="headline name"> Como versionar projetos Django com o Mercurial - Parte 2 </h1> <p class=Article-meta> Por <span class=Article-author itemprop=author>Klaus Peter Laube</span>. <span class=Article-pubDate> Publicado em <time datetime=2011-05-22T11:04:00-03:00 itemprop=datePublished>22 Mai, 2011</time> </span> </p> </header> <div class=Article-content itemprop=articleBody> <img src=/images/blog/mercurial-logo.png alt="Logotipo do Mercurial" class=representative-image width=180 height=180> <p>Dando continuidade ao <em>post</em> <a href=https://klauslaube.com.br/2011/05/10/como-versionar-projetos-django-mercurial-parte.html title="Leia a primeira parte deste post">Como versionar projetos <em>Django</em> com o <em>Mercurial</em></a>, e a série <a href={filename}03-montando-seu-ambiente-de-desenvolvimento-django-no-linux.md title="Tá começando com Django? É usuário Linux? Este post pode te interessar">Montando seu ambiente de desenvolvimento <em>Django</em> no <em>Linux</em></a>, vamos dar uma pincelada nos funcionamentos básicos do <a href=https://klauslaube.com.br/tag/mercurial.html title="Leia mais sobre Mercurial"><em>Mercurial</em></a>.</p> <!-- PELICAN_END_SUMMARY --> <h2>hg? Mas não era Mercurial?</h2> <p><em>Mercury</em> em português significa mercúrio (nenhuma novidade até aqui), que é um elemento químico com o símbolo <code>Hg</code> e o número atômico 80 (assim disse a <a href=http://en.wikipedia.org/wiki/Mercury_(element) title="Leia mais sobre o elemento químico Mercúrio"><em>Wikipedia</em></a> (: ). É devido a isso que você utilizará o <em>Mercurial</em> em linha de comando através de comandos iniciados por <code>hg</code>.</p> <p>Antes de iniciarmos, vamos dizer ao <em>Mercurial</em> quem nós somos. Abra o arquivo <code>.hgrc</code> do seu <code>home</code>:</p> <div class=highlight><pre><span></span>$ vim ~/.hgrc
</pre></div> <p>É fundamental que nossos <em>commits</em> estejam marcados com nosso nome, e um e-mail para contato. Vamos escrever estas duas informações neste arquivo:</p> <div class=highlight><pre><span></span><span class=k>[ui]</span>
<span class=na>username</span> <span class=o>=</span> <span class=s>seu nome &lt; seuemail@provedor.com &gt;</span>
</pre></div> <p>Salve o arquivo, e estamos prontos para iniciar.</p> <h2>Primeiros passos</h2> <p>Os passos que vou exemplificar aqui não são muito diferentes dos que você encontrará na <a href=http://mercurial.selenic.com/ title="Visite a página oficial do projeto Mercurial">página oficial do <em>Mercurial</em></a>. Preguiça minha? Talvez… mas você verá que usar o <em>Mercurial</em> é extremamente simples! As dificuldades são as exceções do dia a dia.</p> <p>Para deixar o exemplo mais interessante, vamos utilizar o <em>virtualenv</em>. Dúvidas? Confira o <em>post</em> <a href=https://klauslaube.com.br/2011/03/18/python-django-virtualenv.html title="Construa projetos isolados do seu sistema com virtualenv"><em>Python</em>, <em>Django</em> e <em>virtualenv</em></a> e visualize aonde pretendemos chegar:</p> <div class=highlight><pre><span></span>$ <span class=nb>cd</span> ˜/Projetos/
$ virtualenv DjangoComHG --no-site-packages

$ <span class=nb>cd</span> DjangoComHG
</pre></div> <p>Agora sim, vamos criar um projeto através da seguinte expressão:</p> <div class=highlight><pre><span></span>$ hg init django-com-hg
</pre></div> <p>Projeto criado… vamos partir para as tarefas mais comuns no <em>Mercurial</em>.</p> <h2>Altere, adicione e “comite”</h2> <p>O <em>Mercurial</em> é <a href=http://en.wikipedia.org/wiki/Distributed_revision_control title="Leia mais sobre Distributed Version Control System"><em>DVCS</em></a>, isto quer dizer que, quando você clonar um repositório remoto você terá uma cópia exata dele em seu computador. Logo, as alterações que você “persistir” estarão disponíveis apenas na sua cópia local. Pode parecer um pouco confuso, mas com o tempo faz todo o sentido.</p> <p>Para o primeiro <em>commit</em> (persistir nossas alterações localmente) escreva um arquivo <code>.hgignore</code> (<a href=http://mercurial.selenic.com/wiki/.hgignore title="Entenda para que serve o arquivo .hgignore">saiba mais do que se trata</a>) e um arquivo <code>README</code>:</p> <div class=highlight><pre><span></span>$ <span class=nb>cd</span> django-com-hg/
$ ls -a

.hg     .hgignore     README
</pre></div> <p>A pasta <code>.hg</code> na verdade é quem vai identificar e armazenar todas as informações do nosso projeto. Sem ela, você deixa de ter o controle sobre as versões dos arquivos e subpastas do projeto.</p> <p>Execute o comando <code>hg status</code> e veja o que aparece… acredito que o resultado seja auto-sugestivo. O <em>Mercurial</em> ainda não sabe o que fazer com os arquivos no projeto, portanto diremos a ele que queremos versionar estes arquivos:</p> <div class=highlight><pre><span></span>$ hg add .hgignore README
</pre></div> <p>Uma nova execução do <code>hg status</code> vai apontar que os arquivos foram marcados para adição, porém, ainda não foram adicionados. Você vai confirmar está operação através do comando <code>commit</code>:</p> <div class=highlight><pre><span></span>$ hg commit -m <span class=s2>&quot;Primeiro commit com .hgignore&quot;</span>
</pre></div> <p>O parâmetro <code>-m</code> serve para passarmos uma mensagem de descrição do <code>commit</code> que estamos fazendo. Isto facilita na leitura do <em>log</em> de <em>commits</em> realizados:</p> <div class=highlight><pre><span></span>$ hg log
</pre></div> <p>Estes serão os comandos que provavelmente você usará constantemente enquanto desenvolve.</p> <h2>Compartilhando as suas produções</h2> <p><img class=align-left src=/images/blog/bitbucket-logo.png width=180 height=180 title="Logotipo do BitBucket" alt="Logotipo do BitBucket"></p> <p>Se você ainda não tem uma conta no <a href=http://bitbucket.org/ title="Bitbucket, compartilhe o seu código"><em>Bitbucket</em></a>, essa é uma grande oportunidade para fazer uma.</p> <p>Vamos criar um repositório para praticarmos o comando <code>push</code>. No <em>Bitbucket</em>:</p> <ul> <li>Eu vou dar o nome de “post-django-com-hg” ao repositório, fique a vontade para dar o nome que você desejar;</li> <li>Escolha o <a href=https://klauslaube.com.br/tag/python.html title="Leia mais sobre Python"><em>Python</em></a> como linguagem;</li> <li>Coloque uma pequena descrição;</li> <li>Eu vou marcar a opção "Issue tracking", caso haja algum problema com o código e vocês queiram sugerir melhorias.</li> </ul> <p><a href=https://bitbucket.org/kplaube/post-django-com-hg title="Confira o repositório criado no Bitbucket">Confira o resultado</a>.</p> <p>No repositório local vamos utilizar o comando <code>push</code> com o endereço do repositório no <em>Bitbucket</em>. Isso enviará todas as alterações que persistidas em nosso repositório local para o repositório remoto, mesclando-as com as contribuições de outros usuários envolvidos no projeto:</p> <div class=highlight><pre><span></span>$ hg push https://bitbucket.org/kplaube/post-django-com-hg
</pre></div> <p><strong>Lembre-se</strong> de mudar o endereço acima para o endereço do seu repositório no <em>Bitbucket</em>. Visite a página do seu repositório e veja o que aconteceu… bacana, não?</p> <p>Mas dessa forma, teremos que sempre executar o comando <code>pus</code>h informando o endereço do repositório. Vamos deixar esta tarefa mais simples editando o arquivo <code>hgrc</code> dentro da pasta <code>.hg</code> do projeto:</p> <div class=highlight><pre><span></span>$ <span class=nb>cd</span> ~/Projetos/DjangoComHG/django-com-hg/
$ vim .hg/hgrc
</pre></div> <p>Coloque o seguinte:</p> <div class=highlight><pre><span></span><span class=k>[paths]</span>
<span class=na>default</span> <span class=o>=</span> <span class=s>https://kplaube@bitbucket.org/kplaube/post-django-com-hg</span>
</pre></div> <p><strong>Lembre-se</strong> de mudar o endereço acima para o endereço do seu repositório no <em>Bitbucket</em>.</p> <p>Pronto! Quando você for “pushear” não precisará mais informar o endereço do repositório remoto.</p> <p>Altere alguns arquivos… <code>commit</code>. Adicione alguns arquivos… <code>commit</code>. Ao final do dia, dê um <code>push</code> e deixe o resto da equipe saber o que você fez ;)</p> <h2>Referências</h2> <ul> <li><a href=http://mercurial.selenic.com/ title="Mercurial, work easier, work faster">Site oficial do projeto <em>Mercurial</em></a></li> <li><a href=http://en.wikipedia.org/wiki/Mercurial title="Leia mais sobre Mercurial na Wikipedia">Artigo na <em>Wikipedia</em> sobre <em>Mercurial</em></a></li> <li><a href=http://en.wikipedia.org/wiki/Mercury_(element) title="Leia mais sobre Mercúrio no Wikipedia">Artigo na <em>Wikipedia</em> sobre Mercúrio (o elemento químico)</a></li> <li><a href=http://tocadoelfo.blogspot.com/2011/03/mercurial-hg-controlando-as-versoes-do.html title="Excelente post sobre Mercurial, TI e gerência de projetos"><em>Mercurial Hg</em> – Controlando as Versões do seu <em>Software</em></a></li> <li><a href=http://hgbook.red-bean.com/read/ title="Excelente e-book de Bryan O'Sullivan sobre Mercurial"><em>Mercurial</em>: <em>The Definitive Guide</em></a></li> </ul> <p>No próximo <em>post</em>, vamos concluir a trilogia mostrando uma forma bacana de utilizar o <em>Mercurial</em> para versionar seus projetos <em>Django</em>.</p> <p>Até a próxima…</p> </div> </span> <div class=Article-tags> <span class=Article-tagLabel>Tags:</span> <span itemprop=keywords> <a href=https://klauslaube.com.br/tag/desenvolvimento.html title="Leia mais sobre" class=Article-tagLink>desenvolvimento</a> <a href=https://klauslaube.com.br/tag/ambiente-de-desenvolvimento.html title="Leia mais sobre" class=Article-tagLink>ambiente-de-desenvolvimento</a> <a href=https://klauslaube.com.br/tag/python.html title="Leia mais sobre" class=Article-tagLink>python</a> <a href=https://klauslaube.com.br/tag/django.html title="Leia mais sobre" class=Article-tagLink>django</a> <a href=https://klauslaube.com.br/tag/mercurial.html title="Leia mais sobre" class=Article-tagLink>mercurial</a> </span> </div> <div class=Article-comments> <div id=disqus_thread></div> <script type=text/javascript>
        var disqus_shortname = "klauslaube";
        var disqus_identifier = "2011/05/22/como-versionar-projetos-django-mercurial-parte-2.html";

        (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script> <noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript rel=nofollow>comments powered by Disqus.</a></noscript> </div> </article> </div> <footer class="PageFooter pure-u-1"> <div class=u-box> <p>O conteúdo deste blog está sob a licença <a class=PageFooter-link href=http://creativecommons.org/licenses/by/3.0/deed.pt_BR title="Distribua, adapte, use. Mas mencione o autor." rel=nofollow>Creative Commons Attribution 3.0</a>.</p> <p>O código está disponível em <a class=PageFooter-link href=https://github.com/kplaube/blog/ title=Contribute! rel=nofollow>GitHub</a>.</p> </div> </footer> </div> <script>
        (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
        function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
        e=o.createElement(i);r=o.getElementsByTagName(i)[0];
        e.src='//www.google-analytics.com/analytics.js';
        r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
        ga('create','UA-19657400-1');ga('send','pageview');
    </script> </body> </html>