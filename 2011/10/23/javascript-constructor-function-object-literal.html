<!DOCTYPE html><html lang=pt-br> <head><meta charset=utf-8><title>Javascript: A diferença entre Constructor Function e Object Literal | Klaus Laube</title><meta name=author content="Klaus Peter Laube"><meta name=description content="Você sabe aonde e como usar um Object Literal ou uma Constructor Function, em Javascript? Descubra as diferenças entre essas duas formas de fazer Javascript Orientado a Objetos."><meta name=robots content=index,follow><meta property=og:site_name content="Klaus Laube"><meta property=og:type content=website><meta name=keywords content="desenvolvimento, javascript, prototype, oop, web"><meta property=og:title content="Javascript: A diferença entre Constructor Function e Object Literal"><meta property=og:description content="Você sabe aonde e como usar um Object Literal ou uma Constructor Function, em Javascript? Descubra as diferenças entre essas duas formas de fazer Javascript Orientado a Objetos."><meta property=og:url content=https://klauslaube.com.br/2011/10/23/javascript-constructor-function-object-literal.html><meta property=og:image content><meta property=fb:app_id content=262757647133878><meta name=google-site-verification content=xCq0H3B3JhkPcAdZ03J0vayijvH_g1rQVMZ_DVcMsQY><meta name=viewport content="width=device-width, initial-scale=1.0"><link rel=icon type=image/x-icon href=https://klauslaube.com.br/favicon.ico><link rel=alternate type=application/rss+xml title="Klaus Laube » Feed" href=https://klauslaube.com.br/feed/rss.xml><link rel=canonical href=https://klauslaube.com.br/2011/10/23/javascript-constructor-function-object-literal.html><link rel=stylesheet href=https://unpkg.com/purecss@1.0.0/build/pure-min.css integrity=sha384-nn4HPE8lTHyVtfCBi5yW9d20FjT8BJwUXyWZT9InLYax14RDjBj46LmSztkmNP9w crossorigin=anonymous><link rel=stylesheet href=https://klauslaube.com.br/theme/css/styles.min.css?0830b1e2></head> <body> <div class="Page pure-g is-fullEntry"> <div class="PageHeader pure-u-1"> <nav class="pure-menu pure-menu-open pure-menu-horizontal"> <a href=https://klauslaube.com.br/index.html title="Home page" class="PageHeader-link pure-menu-heading pure-menu-link">Klaus<span class=u-highlighted>Laube</a> <ul class="PageHeader-menu pure-menu-list"> <li class=pure-menu-item> <a href=https://about.me/klauslaube class="PageHeader-menu-link pure-menu-link">Contato</a> </li> </ul> </nav> </div> <div class="PageContent pure-u-1"> <article class="Article u-box" itemscope itemtype=http://schema.org/BlogPosting> <div itemprop=image itemscope itemtype=http://schema.org/ImageObject> <meta itemprop=url content> </div> <span itemprop=mainEntityOfPage> <header> <h1 class=Article-title itemprop="headline name"> Javascript: A diferença entre Constructor Function e Object Literal </h1> <p class=Article-meta> Por <span class=Article-author itemprop=author>Klaus Peter Laube</span>. <span class=Article-pubDate> Publicado em <time datetime=2011-10-23T15:07:00-02:00 itemprop=datePublished>23 Out, 2011</time> </span> </p> </header> <div class=Article-content itemprop=articleBody> <img src=/images/blog/javascript-code.jpg alt="Código Javascript" class=representative-image width=180 height=180> <p>Meses atrás, <a href=https://klauslaube.com.br/2011/05/16/fazendo-javascript-oo-de-forma-facil.html title="Fazendo Javascript OO de forma fácil">escrevi sobre como era fácil criar objetos em <em>Javascript</em></a>. Devo confessar que, a minha visão sobre a utilização da <a href=https://klauslaube.com.br/tag/oop.html title="Leia mais sobre OOP">Orientação a Objetos</a> em <a href=https://klauslaube.com.br/tag/javascript.html title="Leia mais sobre Javascript"><em>Javascript</em></a> era muito superficial, e que uma dúvida muito pertinente surgiu na época: Onde usar <em>object literal</em> e onde usar classes?</p> <!-- PELICAN_END_SUMMARY --> <p>Hoje, depois de entender que a Orientação a Objetos no <em>Javascript</em> não é muito diferente da utilizada em outras linguagens, sou capaz de enxergar as possibilidades utilizando as duas maneiras. E este é o objetivo deste <em>post</em>: <strong>compartilhar esta visão com vocês</strong>.</p> <h2>Traçando um paralelo</h2> <p>O <a href=http://net.tutsplus.com/ title="Não conhece o Nettuts? Não perca tempo!"><em>Nettuts</em></a> fez um <a href=http://net.tutsplus.com/tutorials/javascript-ajax/the-basics-of-object-oriented-javascript/ title="The Basics of Object-Oriented JavaScript">ótimo <em>post</em></a> comparando as diferenças entre os dois métodos de criação de objetos (este artigo é fortemente baseado na publicação deles). Vamos adotar a estratégia deles e criar estruturas semelhantes utilizando <em>object literal</em> e <em>constructors</em>:</p> <div class=highlight><pre><span></span><span class=kd>var</span> <span class=nx>object_literal</span> <span class=o>=</span> <span class=p>{</span>
    <span class=nx>Automovel</span><span class=o>:</span> <span class=p>{</span>
        <span class=nx>quantidadeRodas</span><span class=o>:</span> <span class=mi>4</span>
    <span class=p>}</span>
<span class=p>};</span>


<span class=kd>var</span> <span class=nx>constructor</span> <span class=o>=</span> <span class=p>{</span>
    <span class=nx>Automovel</span><span class=o>:</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
        <span class=k>this</span><span class=p>.</span><span class=nx>quantidadeRodas</span> <span class=o>=</span> <span class=mi>4</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</pre></div> <p>Acima já reparamos numa das maiores vantagens do <em>object literal</em>: <strong>criar <em>namespaces</em></strong>. Isolamos as duas declarações para que possamos usar os mesmos nomes:</p> <div class=highlight><pre><span></span><span class=c1>// object literal</span>
<span class=kd>var</span> <span class=nx>carro</span> <span class=o>=</span> <span class=nx>object_literal</span><span class=p>.</span><span class=nx>Automovel</span><span class=p>;</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;quantidade de rodas:&#39;</span><span class=p>,</span> <span class=nx>carro</span><span class=p>.</span><span class=nx>quantidadeRodas</span><span class=p>);</span> <span class=c1>// 4</span>

<span class=c1>// constructor function</span>
<span class=kd>var</span> <span class=nx>carro</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>constructor</span><span class=p>.</span><span class=nx>Automovel</span><span class=p>();</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;quantidade de rodas:&#39;</span><span class=p>,</span> <span class=nx>carro</span><span class=p>.</span><span class=nx>quantidadeRodas</span><span class=p>);</span> <span class=c1>// 4</span>
</pre></div> <p>Acessar <code>quantidadeRodas</code> de <code>object_literal.Automovel</code> é muito mais fácil do que de <code>constructor.Automovel</code>. Não é errado dizer que <code>quantidadeRodas</code> de <code>constructor.Automovel</code> é um “atributo de instância”, logo, é necessário criar uma instância da classe para acessá-lo.</p> <h2>Os métodos entram em ação</h2> <p>Vamos atribuir aos nossos automóveis a capacidade de <code>ligarMotor</code>:</p> <div class=highlight><pre><span></span><span class=kd>var</span> <span class=nx>object_literal</span> <span class=o>=</span> <span class=p>{</span>
    <span class=nx>Automovel</span><span class=o>:</span> <span class=p>{</span>
        <span class=nx>quantidadeRodas</span><span class=o>:</span> <span class=mi>4</span><span class=p>,</span>
        <span class=nx>motorLigado</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>

        <span class=nx>ligarMotor</span><span class=o>:</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
            <span class=c1>//object_literal.Automovel.motorLigado = true;</span>
            <span class=k>this</span><span class=p>.</span><span class=nx>motorLigado</span> <span class=o>=</span> <span class=kc>true</span><span class=p>;</span>
        <span class=p>}</span>
    <span class=p>}</span>
<span class=p>};</span>

<span class=kd>var</span> <span class=nx>constructor</span> <span class=o>=</span> <span class=p>{</span>
    <span class=nx>Automovel</span><span class=o>:</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
        <span class=k>this</span><span class=p>.</span><span class=nx>quantidadeRodas</span> <span class=o>=</span> <span class=mi>4</span><span class=p>;</span>
        <span class=k>this</span><span class=p>.</span><span class=nx>motorLigado</span> <span class=o>=</span> <span class=kc>false</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>

<span class=nx>constructor</span><span class=p>.</span><span class=nx>Automovel</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>ligarMotor</span> <span class=o>=</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>motorLigado</span> <span class=o>=</span> <span class=kc>true</span><span class=p>;</span>
<span class=p>};</span>
</pre></div> <p>Aqui que as diferenças começam a ficar mais “gritantes”.</p> <p>Por não conseguirmos criar uma instância de um <em>object literal</em> (afinal de contas, ele já é um objeto), ~~não conseguimos fazer uma referência <code>this</code> como em classes~~ não temos a definição de atributos e métodos via <em>Prototype</em>. ~~Se o fizéssemos, estaríamos explorando atributos da função anônima associada à propriedade <code>ligarMotor</code>, da propriedade <code>Automovel</code>, da variável <code>object_literal</code>~~. Mas, conseguimos <strong>sim</strong> explorar atributos e métodos do objeto através do <code>this</code>. O mesmo ocorre em <code>ligarMotor</code> de constructor, o <code>this</code> é capaz de acessar os valores e métodos nas instâncias de <code>Automovel</code>:</p> <div class=highlight><pre><span></span><span class=c1>// object literal</span>
<span class=nx>carro</span><span class=p>.</span><span class=nx>ligarMotor</span><span class=p>();</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;motor ligado:&#39;</span><span class=p>,</span> <span class=nx>carro</span><span class=p>.</span><span class=nx>motorLigado</span><span class=p>);</span> <span class=c1>// true</span>

<span class=c1>// constructor function</span>
<span class=nx>carro</span><span class=p>.</span><span class=nx>ligarMotor</span><span class=p>();</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;motor ligado:&#39;</span><span class=p>,</span> <span class=nx>carro</span><span class=p>.</span><span class=nx>motorLigado</span><span class=p>);</span> <span class=c1>// true</span>
</pre></div> <h2>Atributos diferentes para instâncias diferentes</h2> <p>Sabemos que um automóvel pode ter 2, 4, 6 ou até 8 rodas, então vamos adaptá-los:</p> <div class=highlight><pre><span></span><span class=kd>var</span> <span class=nx>constructor</span> <span class=o>=</span> <span class=p>{</span>
    <span class=nx>Automovel</span><span class=o>:</span> <span class=kd>function</span><span class=p>(</span><span class=nx>qtndRodas</span><span class=p>)</span> <span class=p>{</span>
        <span class=k>this</span><span class=p>.</span><span class=nx>quantidadeRodas</span> <span class=o>=</span> <span class=nx>qtndRodas</span><span class=p>;</span>
        <span class=k>this</span><span class=p>.</span><span class=nx>motorLigado</span> <span class=o>=</span> <span class=kc>false</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</pre></div> <p>Ué?! Mas e o <strong>object literal</strong>? Pois é.. como ele não pode gerar instâncias (novamente, ele já é um objeto), temos que alterar “na mão”:</p> <div class=highlight><pre><span></span><span class=c1>// object literal</span>
<span class=kd>var</span> <span class=nx>moto</span> <span class=o>=</span> <span class=nx>object_literal</span><span class=p>.</span><span class=nx>Automovel</span><span class=p>;</span>
<span class=nx>moto</span><span class=p>.</span><span class=nx>quantidadeRodas</span> <span class=o>=</span> <span class=mi>2</span><span class=p>;</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;quantidade de rodas (moto):&#39;</span><span class=p>,</span> <span class=nx>moto</span><span class=p>.</span><span class=nx>quantidadeRodas</span><span class=p>);</span> <span class=c1>// 2</span>

<span class=c1>// constructor function</span>
<span class=kd>var</span> <span class=nx>moto</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>constructor</span><span class=p>.</span><span class=nx>Automovel</span><span class=p>(</span><span class=mi>2</span><span class=p>);</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;quantidade de rodas (moto):&#39;</span><span class=p>,</span> <span class=nx>moto</span><span class=p>.</span><span class=nx>quantidadeRodas</span><span class=p>);</span> <span class=c1>// 2</span>
</pre></div> <p>Só por curiosidade, como estarão os nossos objetos <code>carro</code>? (Lá vem a pegadinha =P )</p> <div class=highlight><pre><span></span><span class=c1>// object literal</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;quantidade de rodas (carro):&#39;</span><span class=p>,</span> <span class=nx>carro</span><span class=p>.</span><span class=nx>quantidadeRodas</span><span class=p>);</span> <span class=c1>// 2</span>

<span class=c1>// constructor function</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;quantidade de rodas (carro):&#39;</span><span class=p>,</span> <span class=nx>carro</span><span class=p>.</span><span class=nx>quantidadeRodas</span><span class=p>);</span> <span class=c1>// 4</span>
</pre></div> <p>Pelo lado da instância de <code>constructor.Automovel</code>, nenhuma surpresa. Mas o que aconteceu com o valor do atributo <code>quantidadeRodas</code> da variável <code>carro</code> em <code>object_literal.Automovel</code>?</p> <h2>Instâncias x Referências</h2> <p>A grosso modo, com uso de <em>constructor functions</em>, criamos uma “estrutura” (classe), que a cada <code>new</code> é “copiada” para um novo espaço na memória (instância). Assim, a propriedade <code>quantidadeRodas</code> de moto é diferente da propriedade de mesmo nome, da instância <code>carro</code> (<a href=http://pt.wikipedia.org/wiki/Inst%C3%A2ncia_(classe) title="Leia mais sobre instância no Wikipedia">leia mais sobre instâncias e classes</a>):</p> <div class=highlight><pre><span></span><span class=c1>// constructor function</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;carro == moto:&#39;</span><span class=p>,</span> <span class=nx>carro</span> <span class=o>==</span> <span class=nx>moto</span><span class=p>)</span> <span class=c1>// false</span>
</pre></div> <p>Já com <em>object literal</em>, não temos a capacidade de criar uma classe. Criamos diretamente uma instância, e vinculamos o espaço na memória onde esta foi criada à uma variável. No nosso caso, a variável em questão é <code>object_literal.Automovel</code>.</p> <p>Quando atribuímos <code>object_literal.Automovel</code> à variável <code>carro</code> e depois à variável <code>moto</code>, na verdade estávamos criando referências a instânca contida em <code>object_literal.Automovel</code> (ou seja, as três variáveis correspondem ao mesmo endereço e valor na memória):</p> <div class=highlight><pre><span></span><span class=c1>// object literal</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;carro == moto:&#39;</span><span class=p>,</span> <span class=nx>carro</span> <span class=o>==</span> <span class=nx>moto</span><span class=p>)</span> <span class=c1>// true</span>
</pre></div> <p>Portanto, se eu criar uma variável chamada <code>moto2</code> e atribuir a ela a instância de <code>constructor.Automovel</code> contida em <code>moto</code>, terei o mesmo resultado que acima:</p> <div class=highlight><pre><span></span><span class=c1>// constructor function</span>
<span class=kd>var</span> <span class=nx>moto2</span> <span class=o>=</span> <span class=nx>moto</span><span class=p>;</span>
<span class=nx>moto2</span><span class=p>.</span><span class=nx>quantidadeRodas</span> <span class=o>=</span> <span class=mi>3</span><span class=p>;</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;quantidade de rodas (instancia carro):&#39;</span><span class=p>,</span> <span class=nx>carro</span><span class=p>.</span><span class=nx>quantidadeRodas</span><span class=p>);</span> <span class=c1>// 4</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;quantidade de rodas (instancia moto):&#39;</span><span class=p>,</span> <span class=nx>moto</span><span class=p>.</span><span class=nx>quantidadeRodas</span><span class=p>);</span> <span class=c1>// 3</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;quantidade de rodas (referencia moto2):&#39;</span><span class=p>,</span> <span class=nx>moto2</span><span class=p>.</span><span class=nx>quantidadeRodas</span><span class=p>);</span> <span class=c1>// 3</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;moto == moto2:&#39;</span><span class=p>,</span> <span class=nx>moto</span> <span class=o>==</span> <span class=nx>moto2</span><span class=p>);</span> <span class=c1>// true</span>
</pre></div> <p>Interessante, não?</p> <h2>Considerações finais</h2> <p>Uma vez descobrindo a diferença entre <em>object literal</em> e <em>constructor function</em>, notamos que não há diferenças conceituais em relação a linguagens como <em>Python</em>, <em>C++</em> ou <em>Java</em>. Basta termos em mente que o tipo de escrita, através da <em>prototype</em>, é diferente (e mais dinâmica) do que o usual, mas os resultados são (conceitualmente falando) praticamente os mesmos.</p> <p>Então, quando você tiver um tipo que possuirá várias instâncias, utilize <em>constructor functions</em>. Quando quiser criar objetos “estáticos”, que não sofrerão alterações no decorrer de uma execução (como o exemplo do namespace), utilize <em>object literal</em>.</p> <h2>Referências</h2> <ul> <li><a href=http://net.tutsplus.com/tutorials/javascript-ajax/the-basics-of-object-oriented-javascript/ title="The Basics of Object-Oriented JavaScript"><em>Nettuts+ – The Basics of Object-Oriented JavaScript</em></a></li> <li><a href=http://net.tutsplus.com/tutorials/javascript-ajax/stop-nesting-functions-but-not-all-of-them/ title="Stop Nesting Functions! But Not All of Them"><em>Nettuts+ – Stop Nesting Functions! (But Not All of Them)</em></a></li> </ul> <p>O exemplo completo está disponível para download em: <a href=https://github.com/kplaube/post-javascript-object-literal-constructors title="Veja o exemplo completo no GitHub">https://github.com/kplaube/post-javascript-object-literal-constructors</a></p> <p>Até a próxima…</p> </div> </span> <div class=Article-tags> <span class=Article-tagLabel>Tags:</span> <span itemprop=keywords> <a href=https://klauslaube.com.br/tag/desenvolvimento.html title="Leia mais sobre" class=Article-tagLink>desenvolvimento</a> <a href=https://klauslaube.com.br/tag/javascript.html title="Leia mais sobre" class=Article-tagLink>javascript</a> <a href=https://klauslaube.com.br/tag/prototype.html title="Leia mais sobre" class=Article-tagLink>prototype</a> <a href=https://klauslaube.com.br/tag/oop.html title="Leia mais sobre" class=Article-tagLink>oop</a> <a href=https://klauslaube.com.br/tag/web.html title="Leia mais sobre" class=Article-tagLink>web</a> </span> </div> <div class=Article-comments> <div id=disqus_thread></div> <script type=text/javascript>
        var disqus_shortname = "klauslaube";
        var disqus_identifier = "2011/10/23/javascript-constructor-function-object-literal.html";

        (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script> <noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript rel=nofollow>comments powered by Disqus.</a></noscript> </div> </article> </div> <footer class="PageFooter pure-u-1"> <div class=u-box> <p>O conteúdo deste blog está sob a licença <a class=PageFooter-link href=http://creativecommons.org/licenses/by/3.0/deed.pt_BR title="Distribua, adapte, use. Mas mencione o autor." rel=nofollow>Creative Commons Attribution 3.0</a>.</p> <p>O código está disponível em <a class=PageFooter-link href=https://github.com/kplaube/blog/ title=Contribute! rel=nofollow>GitHub</a>.</p> </div> </footer> </div> <script>
        (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
        function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
        e=o.createElement(i);r=o.getElementsByTagName(i)[0];
        e.src='//www.google-analytics.com/analytics.js';
        r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
        ga('create','UA-19657400-1');ga('send','pageview');
    </script> </body> </html>