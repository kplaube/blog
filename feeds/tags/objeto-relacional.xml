<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Klaus Laube - objeto-relacional]]></title><description><![CDATA[Python, Django e desenvolvimento Web]]></description><link>https://klauslaube.com.br</link><generator>RSS for Node</generator><lastBuildDate>Wed, 20 May 2020 08:30:30 GMT</lastBuildDate><author><![CDATA[Klaus Peter Laube]]></author><item><title><![CDATA[Uma ode ao PostgreSQL]]></title><description><![CDATA[O MySQL é um dos meus mais leais companheiros de
projetos, desde os meus tempos de PHP até projetos mais recentes
com o Python. A sua agilidade e facilidade são indiscutivelmente
boas, tanto que renderam ao projeto um “domínio global” no ramo. Hoje, sob “cuidados” da Oracle, o projeto tem causado…]]></description><link>https://klauslaube.com.br/2013/01/31/uma-ode-ao-postgresql.html</link><guid isPermaLink="false">https://klauslaube.com.br/2013/01/31/uma-ode-ao-postgresql.html</guid><dc:creator><![CDATA[Klaus Peter Laube]]></dc:creator><pubDate>Thu, 31 Jan 2013 20:39:21 GMT</pubDate><content:encoded>&lt;p&gt;O &lt;a href=&quot;http://www.mysql.com/&quot; title=&quot;Leia mais sobre o MySQL na página oficial do projeto&quot;&gt;&lt;em&gt;MySQL&lt;/em&gt;&lt;/a&gt; é um dos meus mais leais companheiros de
projetos, desde os meus tempos de &lt;a href=&quot;/tag/php.html&quot; title=&quot;Leia mais sobre PHP&quot;&gt;&lt;em&gt;PHP&lt;/em&gt;&lt;/a&gt; até projetos mais recentes
com o &lt;a href=&quot;/tag/python.html&quot; title=&quot;Leia mais sobre Python&quot;&gt;&lt;em&gt;Python&lt;/em&gt;&lt;/a&gt;. A sua agilidade e facilidade são indiscutivelmente
boas, tanto que renderam ao projeto um “domínio global” no ramo.&lt;/p&gt;
&lt;p&gt;Hoje, sob “cuidados” da &lt;a href=&quot;http://www.oracle.com/&quot; title=&quot;Página oficial da Oracle&quot;&gt;&lt;em&gt;Oracle&lt;/em&gt;&lt;/a&gt;, o projeto tem causado &lt;a href=&quot;http://www.infoq.com/br/news/2012/08/oracle-mysql-preocupa#.UDfedu0QkJA.twitter&quot; title=&quot;MySQL será fechado?&quot;&gt;certas desconfianças&lt;/a&gt;.
A criação de &lt;a href=&quot;https://mariadb.org/pt-br/&quot; title=&quot;Conheça o MariaDB&quot;&gt;um &lt;em&gt;fork&lt;/em&gt;&lt;/a&gt; pelo autor original não
ajudou, e isso &lt;a href=&quot;http://br-linux.org/2013/mais-um-opensuse-confirma-que-vai-abandonar-mysql-e-adotar-mariadb/&quot; title=&quot;OpenSUSE deixa o MySQL&quot;&gt;abriu margem&lt;/a&gt; para um velho, confiável e simpático
banco de dados: o &lt;a href=&quot;http://www.postgresql.org/&quot; title=&quot;Página oficial do projeto&quot;&gt;&lt;em&gt;Postgres&lt;/em&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Qual o motivo de começar um &lt;em&gt;post&lt;/em&gt; sobre o &lt;em&gt;Postgres&lt;/em&gt; falando do
&lt;em&gt;MySQL&lt;/em&gt;? Eu sempre me apoiei na “facilidade de uso” na hora de escolher
entre os dois, e só recentemente me “obriguei” a experimentar o
&lt;em&gt;Postgres&lt;/em&gt; em alguns projetos. O resultado foi a total satisfação com a
experiência, e a (surpreendente) conclusão que ele é tão fácil de mexer
quanto o seu concorrente.&lt;/p&gt;
&lt;h2&gt;O que há de especial no Postgres?&lt;/h2&gt;
&lt;p&gt;O &lt;em&gt;Postgres&lt;/em&gt; está sob a licença &lt;a href=&quot;http://www.postgresql.org/about/licence/&quot; title=&quot;Leia mais sobre a licença PostgreSQL&quot;&gt;&lt;em&gt;PostgreSQL License&lt;/em&gt;&lt;/a&gt;, muito similar
a &lt;em&gt;BSD&lt;/em&gt; e &lt;em&gt;MIT&lt;/em&gt;, que nos permite o livre uso, cópia, modificação e
distribuição. Assumidamente o “banco de dados &lt;em&gt;open source&lt;/em&gt; mais
avançado do mundo”, ele é conhecido pela sua estabilidade, servindo
&lt;a href=&quot;http://www.postgresql.org/about/users/&quot; title=&quot;Conheça alguns projetos relevantes que utilizam o Postgres&quot;&gt;projetos de larga escala em todo o mundo&lt;/a&gt;. Embora eu nunca pude por à
prova a sua confiabilidade e escalabilidade, o fato de ele ser usado
como &lt;a href=&quot;https://postgres.heroku.com/postgres&quot; title=&quot;Why Postres&quot;&gt;banco relacional pelo &lt;em&gt;Heroku&lt;/em&gt;&lt;/a&gt; apresenta credenciais o
suficiente.&lt;/p&gt;
&lt;p&gt;Entre as &lt;a href=&quot;http://www.postgresql.org/about/featurematrix/&quot; title=&quot;Feature Matrix&quot;&gt;diversas funcionalidades do &lt;em&gt;Postgres&lt;/em&gt;&lt;/a&gt;, o suporte a
operações assíncronas, o &lt;a href=&quot;http://www.postgresql.org/docs/9.2/static/textsearch.html&quot; title=&quot;Leia mais sobre na documentação do Postgres&quot;&gt;&lt;em&gt;Full Text Search&lt;/em&gt;&lt;/a&gt; e o &lt;a href=&quot;http://postgis.refractions.net/&quot; title=&quot;Leia mais sobre PostGIS&quot;&gt;&lt;em&gt;PostGIS&lt;/em&gt;&lt;/a&gt; se
mostraram um bom diferencial para mim. Este último na verdade trata-se
de uma extensão do &lt;em&gt;Postgres&lt;/em&gt; (comprovando outra característica valiosa
do banco, a extensibilidade), e tive a oportunidade de utilizá-lo em um
projeto recente com &lt;a href=&quot;/tag/python.html&quot; title=&quot;Leia mais sobre Python&quot;&gt;&lt;em&gt;Python&lt;/em&gt;&lt;/a&gt; e &lt;a href=&quot;/tag/django.html&quot; title=&quot;Leia mais sobre Django&quot;&gt;&lt;em&gt;Django&lt;/em&gt;&lt;/a&gt;. Embora a sua
implantação não tenha sido tão trivial quanto o esperado, o resultado
atendeu completamente as expectativas.&lt;/p&gt;
&lt;p&gt;Outro ponto que acho muito bacana no projeto, é o seu &lt;a href=&quot;http://www.postgresql.org/docs/9.2/static/features.html&quot; title=&quot;SQL Conformance&quot;&gt;compromisso em seguir o padrão &lt;em&gt;SQL&lt;/em&gt;&lt;/a&gt;.
Atualmente (versão 9.2), o &lt;em&gt;Postgres&lt;/em&gt; se
compromete em atender o padrão &lt;em&gt;ANSI-SQL: 2008&lt;/em&gt;. Acho muito bacana esse
compromisso, principalmente se formos levar em consideração a
&lt;a href=&quot;http://en.wikibooks.org/wiki/SQL_dialects_reference&quot; title=&quot;SQL dialects&quot;&gt;quantidade de dialetos &lt;em&gt;SQL&lt;/em&gt;&lt;/a&gt; que temos hoje em dia.&lt;/p&gt;
&lt;p&gt;Junte isso tudo a facilidade de uso, e temos uma excelente ferramenta à
nossa disposição. Ainda não está satisfeito? Então vamos falar um pouco
sobre uma das características mais marcantes (e discutidas) do
&lt;em&gt;Postgres&lt;/em&gt;: O modelo objeto-relacional.&lt;/p&gt;
&lt;h2&gt;Objeto-Relacional?&lt;/h2&gt;
&lt;p&gt;A definição de banco de dados objeto-relacional da &lt;a href=&quot;http://pt.wikipedia.org/wiki/Banco_de_dados_objeto-relacional&quot; title=&quot;Leia mas sobre Objeto-Relacional na Wikipedia&quot;&gt;&lt;em&gt;Wikipedia&lt;/em&gt;&lt;/a&gt; é a
seguinte:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;(...) é um sistema de gerenciamento de banco de dados
(SGBD) semelhante a um banco de dados
relacional, porém com um modelo de banco de dados orientado a objetos:
objetos, classes e herança são suportados diretamente nos esquemas do
banco de dados e na linguagem de consulta. Além disso, ele suporta
extensão do modelo de dados com a personalização de tipos de dados e
métodos.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Basicamente, um banco de dados objeto-relacional armazena os seus dados
de forma “relacional”, mas é capaz de abstrair o seu acesso através de
objetos, possibilitando assim a construção de operações mais complexas
que podem envolver conceitos da orientação a objetos. No &lt;em&gt;Postgres&lt;/em&gt;,
tabelas, relacionamentos, restrições e &lt;em&gt;triggers&lt;/em&gt; são considerados
objetos.&lt;/p&gt;
&lt;p&gt;Mas não são os “objetos” que vemos nas linguagens de programação. O
termo “objeto” aqui é um pouco diferente (e eu diria até limitado),
embora podemos encontrar &lt;a href=&quot;http://www.postgresql.org/docs/9.2/static/ddl-inherit.html&quot; title=&quot;Leia mais sobre herança de tabelas no Postgres&quot;&gt;heranças&lt;/a&gt;, &lt;a href=&quot;http://www.postgresql.org/docs/9.2/static/extend-type-system.html#EXTEND-TYPES-POLYMORPHIC&quot; title=&quot;Leia mais sobre tipos polimórficos no Postgres&quot;&gt;polimorfismo&lt;/a&gt; e &lt;a href=&quot;http://stackoverflow.com/questions/5625585/sql-postgres-oids-what-are-they-and-why-are-they-useful&quot; title=&quot;Saiba mais sobre os OIDs&quot;&gt;object ids&lt;/a&gt;.
No caso do &lt;em&gt;Postgres&lt;/em&gt;, o “objeto” de “objeto-relacional” está
ligado a todos os aspectos citados anteriormente, mais a organização dos
“recursos”, como na utilização de &lt;a href=&quot;http://www.postgresql.org/docs/9.2/static/ddl-schemas.html&quot; title=&quot;Leia mais sobre Schemas no Postgres&quot;&gt;&lt;em&gt;schemas&lt;/em&gt;&lt;/a&gt;, e na criação de tipos e
manipulação de dados complexos.&lt;/p&gt;
&lt;p&gt;Ou seja, você não verá uma notação como essa em uma &lt;em&gt;query&lt;/em&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;NOW&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;to_char&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;HH12:MI:SS&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;E sim, a notação utilizando funções:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; to_char&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;NOW&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;HH12:MI:SS&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Mas em compensação, você verá que &lt;strong&gt;to_char&lt;/strong&gt; é uma &lt;a href=&quot;http://www.postgresql.org/docs/8.3/static/xfunc-sql.html#AEN40446&quot; title=&quot;Leia mais sobre funções polimórficas no Postgres&quot;&gt;função polimórfica&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; to_char&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10.3333333&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;99.99&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Se você não está satisfeito, e não se sente confortável com o termo
“objeto” usado pelo &lt;em&gt;Postgres&lt;/em&gt;, fique tranquilo… &lt;a href=&quot;http://www.postgresql.org/message-id/1335420139.28653.59.camel@jdavis&quot; title=&quot;Devemos parar de usar o termo objeto no Postgres?&quot;&gt;mais pessoas carregam esta angústia&lt;/a&gt;.
&lt;em&gt;Michael Stonebraker&lt;/em&gt; criou &lt;a href=&quot;http://www.service-architecture.com/object-oriented-databases/articles/stonebrakers_dbms_matrix.html&quot; title=&quot;Stonebraker&amp;#x27;s DBMS Matrix&quot;&gt;um esquema para identificar um &lt;em&gt;ORDBMS&lt;/em&gt;&lt;/a&gt;,
e partindo dele sou obrigado a concordar que
o &lt;em&gt;Postgres&lt;/em&gt; é de fato um banco objeto-relacional quando me deparo com o
seguinte cenário:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;TYPE&lt;/span&gt; inventory_item &lt;span class=&quot;token keyword&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    name            &lt;span class=&quot;token keyword&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    supplier_id     &lt;span class=&quot;token keyword&quot;&gt;integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    price             &lt;span class=&quot;token keyword&quot;&gt;numeric&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;TABLE&lt;/span&gt; on_hand &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    item      inventory_item&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    count     &lt;span class=&quot;token keyword&quot;&gt;integer&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;INTO&lt;/span&gt; on_hand &lt;span class=&quot;token keyword&quot;&gt;VALUES&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;ROW&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;fuzzy dice&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1.99&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;INTO&lt;/span&gt; on_hand &lt;span class=&quot;token keyword&quot;&gt;VALUES&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;ROW&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;cards&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;6.99&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;::inventory_item&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Uma manipulação complexa, com tipos criados pelo próprio usuário,
utilizando &lt;em&gt;queries&lt;/em&gt;.&lt;/p&gt;
&lt;h2&gt;Considerações finais&lt;/h2&gt;
&lt;p&gt;O &lt;em&gt;Postgres&lt;/em&gt; é poderoso! Disso eu não tinha dúvidas. Mas ficar mais
próximo do banco me fez perceber o quanto ele pode agregar ao projeto.
Se em um próximo projeto você estiver em dúvida, e achar que a
utilização dele pode ser complicada, eu recomendo que experimente.&lt;/p&gt;
&lt;p&gt;Até a próxima…&lt;/p&gt;
&lt;h2&gt;Referências&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://ledgersmbdev.blogspot.com.br/2012/08/intro-to-postgresql-as-object.html&quot; title=&quot;Leia mais sobre o modelo objeto-relacional do Postgres&quot;&gt;&lt;em&gt;Perspectives on LedgerSMB – O/R Modelling Part 1: Intro to PostgreSQL as Object-Relational Database Management System&lt;/em&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://ledgersmbdev.blogspot.com.br/2012/10/three-approaches-to-object-relational.html&quot; title=&quot;Leia o comparativo do approach de Postgres e Oracle em relação ao termo Object-Relational&quot;&gt;&lt;em&gt;Perspectives on LedgerSMB – Three Approaches to Object-Relational Databases: PostgreSQL, Oracle, and Informix&lt;/em&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.postgresql.org/about/&quot; title=&quot;Leia tudo sobre o Postgres&quot;&gt;&lt;em&gt;PostgreSQL – About&lt;/em&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.service-architecture.com/object-oriented-databases/articles/stonebrakers_dbms_matrix.html&quot; title=&quot;Conheça a linha tênue que separa um ORDBMS de um ODBMS&quot;&gt;&lt;em&gt;Web Services and Service-Oriented Architectures – Stonebraker’s DBMS Matrix&lt;/em&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.wikivs.com/wiki/MySQL_vs_PostgreSQL&quot; title=&quot;Veja um comparativo entre MySQL e PostgreSQL&quot;&gt;&lt;em&gt;WikiVS – MySQL vs. PostgreSQL&lt;/em&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item></channel></rss>