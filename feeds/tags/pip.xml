<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Klaus Laube - pip]]></title><description><![CDATA[Python, Django e desenvolvimento Web]]></description><link>https://klauslaube.com.br</link><generator>RSS for Node</generator><lastBuildDate>Wed, 20 Oct 2021 18:01:17 GMT</lastBuildDate><author><![CDATA[Klaus Peter Laube]]></author><item><title><![CDATA[Poesia pythonista com Poetry]]></title><description><![CDATA[O pip tem dado passos importantes em relação à
sua evolução, sendo um dos mais notórios deles a
adoção por padrão de backtracking.
Ainda assim, por suas atribuições serem exclusivamente de um gerenciador de dependências, ele pode deixar
um gostinho de "quero mais" no seu flow de desenvolvimento. E é…]]></description><link>https://klauslaube.com.br/2020/12/30/poesia-pythonista-com-poetry.html</link><guid isPermaLink="false">https://klauslaube.com.br/2020/12/30/poesia-pythonista-com-poetry.html</guid><dc:creator><![CDATA[Klaus Peter Laube]]></dc:creator><pubDate>Wed, 30 Dec 2020 07:00:00 GMT</pubDate><content:encoded>&lt;p&gt;O &lt;a href=&quot;/tag/pip.html&quot; title=&quot;Leia mais sobre pip&quot;&gt;&lt;em&gt;pip&lt;/em&gt;&lt;/a&gt; tem dado passos importantes em relação à
sua evolução, sendo um dos mais notórios deles a
&lt;a href=&quot;https://pip.pypa.io/en/stable/user_guide/#dependency-resolution-backtracking&quot; title=&quot;Dependency resolution backtracking&quot;&gt;adoção por padrão de &lt;em&gt;backtracking&lt;/em&gt;&lt;/a&gt;.
Ainda assim, por suas atribuições serem exclusivamente de um gerenciador de dependências, ele pode deixar
um gostinho de &quot;quero mais&quot; no seu &lt;em&gt;flow&lt;/em&gt; de desenvolvimento. E é nessas necessidades não atendidas
que algumas opções se apresentam como alternativas/complementos ao simpático utilitário de linha de comando.&lt;/p&gt;
&lt;p&gt;O &lt;a href=&quot;/tag/pipfile.html&quot; title=&quot;Leia mais sobre Pipfile&quot;&gt;&lt;em&gt;Pipfile&lt;/em&gt;&lt;/a&gt; é uma delas, e já falamos
sobre no &lt;a href=&quot;/2018/06/11/tchau-requirements-ola-pipfile.html&quot; title=&quot;Leia o post na íntegra&quot;&gt;&quot;Tchau, requirements. Olá, Pipfile!&quot;&lt;/a&gt;. Demorou um pouco, mas hoje vamos falar do seu concorrente direto,
o &lt;a href=&quot;https://python-poetry.org/&quot; title=&quot;Python packaging and dependency management made easy&quot;&gt;&lt;em&gt;Poetry&lt;/em&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Determinismo é só o começo&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;I built Poetry because I wanted a single tool to manage my Python projects from start to finish.
I wanted something reliable and intuitive that the community could use and enjoy.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Essas são as palavras do criador do &lt;em&gt;Poetry&lt;/em&gt;, &lt;em&gt;Sébastien Eustace&lt;/em&gt;. O mesmo argumento usado no artigo sobre
&lt;em&gt;Pipfile&lt;/em&gt;, acerca de &lt;em&gt;build&lt;/em&gt; determinístico, se sustenta aqui. E assim como o &lt;em&gt;Pipenv&lt;/em&gt;, há uma camada extra
de funcionalidades que &quot;adoçam&quot; o &lt;em&gt;build&lt;/em&gt; e o controle de &lt;a href=&quot;/tag/virtualenv.html&quot; title=&quot;Leia mais sobre virtualenv&quot;&gt;&lt;em&gt;virtualenvs&lt;/em&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;figure class=&quot;gatsby-resp-image-figure&quot; style=&quot;&quot;&gt;
    &lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 423px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/d0eada5525bea4e90e5434f08ea62378/b7bea/determinism-meme.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 173.4375%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAjABQDASIAAhEBAxEB/8QAGQAAAwEBAQAAAAAAAAAAAAAAAAIDBAEF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAfPdLrkOhOy6oyiBBgskAf/EAB0QAAICAgMBAAAAAAAAAAAAAAECABEDEhAhIjH/2gAIAQEAAQUCtoSSC5iL7ONSpWXAequIcc3xQut/DsRx/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwFf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwFf/8QAIRAAAQMDBAMAAAAAAAAAAAAAAQACMRARIiAhMjNhkaH/2gAIAQEABj8Ckrl9UlZuAHhYvupb70G7S5dLltcCk0//xAAhEAACAQMDBQAAAAAAAAAAAAABEQAhMUEQUXFhgZGh4f/aAAgBAQABPyEKdbmCFTxABVrrCHuGBUIC8LCilcNy2QwN7uZBEwP+F7lHFzGj7RfYTYpMbR//2gAMAwEAAgADAAAAEJQCvwgv/8QAGBEAAwEBAAAAAAAAAAAAAAAAARARACH/2gAIAQMBAT8QvEDNQ//EABcRAAMBAAAAAAAAAAAAAAAAAAAQEQH/2gAIAQIBAT8QihNf/8QAHhABAQADAQACAwAAAAAAAAAAAREAITFBEFGRwdH/2gAIAQEAAT8Q+oQLedOR6H73m/WAt/3IpJbtHkLgXNBSic3dOJofQ5Z+e4aZsKDOzeISClmFobRDR6QwCAdyxvPO41HTqLMM9uHaYr8f/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Meme de Guerra Civil com Capitão América e Homem de Ferro&quot;
        title=&quot;Não há razão para flamewar entre pip x {pipenv, poetry} (freethinkingministries.com)&quot;
        src=&quot;/static/d0eada5525bea4e90e5434f08ea62378/b7bea/determinism-meme.jpg&quot;
        srcset=&quot;/static/d0eada5525bea4e90e5434f08ea62378/7809d/determinism-meme.jpg 192w,
/static/d0eada5525bea4e90e5434f08ea62378/4ecad/determinism-meme.jpg 384w,
/static/d0eada5525bea4e90e5434f08ea62378/b7bea/determinism-meme.jpg 423w&quot;
        sizes=&quot;(max-width: 423px) 100vw, 423px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
    &lt;figcaption class=&quot;gatsby-resp-image-figcaption&quot;&gt;Não há razão para flamewar entre pip x {pipenv, poetry} (freethinkingministries.com)&lt;/figcaption&gt;
  &lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;A sua instalação pode ocorrer de maneiras diferentes, dependendo do SO que você estiver utilizando. Portanto,
&lt;a href=&quot;https://python-poetry.org/docs/#installation&quot; title=&quot;Leia mais sobre como instalar o Poetry&quot;&gt;uma visita à sua documentação é essencial&lt;/a&gt;. Ainda
assim, nada que o &lt;code class=&quot;language-text&quot;&gt;pip&lt;/code&gt; (que ironia) não resolva:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ pip install --user poetry&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Para compreender como a ferramenta funciona de fato, vamos seguir os mesmos passos do &lt;em&gt;getting started&lt;/em&gt; da documentação oficial:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ poetry new poetry-demo
$ cd poetry-demo/
$ ls
README.rst     poetry_demo    pyproject.toml tests&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Aqui nos deparamos com a primeira peculiaridade: o arquivo &lt;code class=&quot;language-text&quot;&gt;pyproject.toml&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;Pyproject? TOML?&lt;/h2&gt;
&lt;p&gt;O &lt;em&gt;pip&lt;/em&gt; utiliza o &lt;code class=&quot;language-text&quot;&gt;requirements.txt&lt;/code&gt;, o &lt;em&gt;Pipenv&lt;/em&gt; utiliza o &lt;code class=&quot;language-text&quot;&gt;Pipfile&lt;/code&gt; e &lt;code class=&quot;language-text&quot;&gt;Pipfile.lock&lt;/code&gt;, e o &lt;em&gt;Poetry&lt;/em&gt; o &lt;code class=&quot;language-text&quot;&gt;pyproject.toml&lt;/code&gt;
e &lt;code class=&quot;language-text&quot;&gt;poetry.lock&lt;/code&gt;.
Todos os arquivos citados são utilizados pelas respectivas ferramentas de controle de pacotes para
gerenciar atualizações e instalar novas dependências.&lt;/p&gt;
&lt;p&gt;O &lt;em&gt;TOML&lt;/em&gt; (&lt;em&gt;Tom&apos;s Obvious, Minimal Language&lt;/em&gt;) é um formato utilizado para a escrita de arquivos de configuração. Segundo o &lt;a href=&quot;https://toml.io/en/&quot; title=&quot;Leia mais sobre TOML&quot;&gt;site oficial&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;TOML aims to be a minimal configuration file format that&apos;s easy to read due to obvious semantics. TOML is designed to map unambiguously to a hash table. TOML should be easy to parse into data structures in a wide variety of languages.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Se você já conhece o &lt;em&gt;Pipfile&lt;/em&gt;, a sintaxe utilizada no arquivo é a mesma. Mas qual é
a motivação por trás do arquivo &lt;code class=&quot;language-text&quot;&gt;pyproject&lt;/code&gt;?&lt;/p&gt;
&lt;h3&gt;Senta que lá vem a história.&lt;/h3&gt;
&lt;p&gt;Antes do ano de 1998 havia o vazio, quando o assunto era empacotamento em &lt;a href=&quot;/tag/python.html&quot; title=&quot;Leia mais sobre Python&quot;&gt;&lt;em&gt;Python&lt;/em&gt;&lt;/a&gt;.
A partir dos anos 2000, instalar, buildar, ou distribuir pacotes começou a ganhar
um novo sentido através da inserção da biblioteca &lt;code class=&quot;language-text&quot;&gt;distutils&lt;/code&gt; ao &lt;em&gt;standard lib&lt;/em&gt;, e
da convenção de uso do &lt;em&gt;entrypoint&lt;/em&gt; &lt;code class=&quot;language-text&quot;&gt;setup.py&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;figure class=&quot;gatsby-resp-image-figure&quot; style=&quot;&quot;&gt;
    &lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/85b8f2f09ad9890f8ea22dda1e6ddd33/302a4/py-dev-cycle.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 46.35416666666667%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAABmElEQVQoz2VRTU/bQBD1D+uZY6WeufEn+gvKBXFE6qWRqkhVxa0HKk4gIVoEaqGAiEPThnzYsZN4d53dzdpe7+x0nLSoiD2MZt7MvJl5G3jvEd30y4uvb4PodAMRCeGCK62xCRoj+xPRGeCTRwkfrN3s+6u7j0F68ZL8qqpGw4f5LCGnLEvnHPya4lgAACFkH0kDK4501DKDbb88w3q8AoHrciZrrXWSJBSHt3dht0tOURRE1wwtjXc2sLpn2EU++xH2Ym0a1n7Ct/aOPxzuI+Y8V3RFu91uvWtZa+ViYWu3FMyeHfjw/O/aylQ3nR7jPBr2rx/4yelONXi9VNM4TpWUkyRJ05SajTEOwCz1z8+f2O0lNYOHmihr8AhIF5KCpbiS7LetkWVzoRTEsR/TXkYpRQW1c53eKEqyAME1In07VO/flGQtlEWx0gQB3CJfUJp1Qt69J5BSNH/1QbhS2zeVMLkRu5tVdD2Z0e6MgLWgpC3LsmEc90fDbD6XUq7VBiCGf19FhYXH548qhBC5EJwoGaO1/8/+AVih9LwXPRJNAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Diagrama de fluxo com os passos para distribuição de pacotes&quot;
        title=&quot;Overview do workflow de desenvolvimento Python (py-generic-project.readthedocs.io)&quot;
        src=&quot;/static/85b8f2f09ad9890f8ea22dda1e6ddd33/e5715/py-dev-cycle.png&quot;
        srcset=&quot;/static/85b8f2f09ad9890f8ea22dda1e6ddd33/8514f/py-dev-cycle.png 192w,
/static/85b8f2f09ad9890f8ea22dda1e6ddd33/804b2/py-dev-cycle.png 384w,
/static/85b8f2f09ad9890f8ea22dda1e6ddd33/e5715/py-dev-cycle.png 768w,
/static/85b8f2f09ad9890f8ea22dda1e6ddd33/302a4/py-dev-cycle.png 1080w&quot;
        sizes=&quot;(max-width: 768px) 100vw, 768px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
    &lt;figcaption class=&quot;gatsby-resp-image-figcaption&quot;&gt;Overview do workflow de desenvolvimento Python (py-generic-project.readthedocs.io)&lt;/figcaption&gt;
  &lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Quatro anos depois, somos apresentados ao &lt;code class=&quot;language-text&quot;&gt;setuptools&lt;/code&gt;, que introduz o pacote no formato
&lt;code class=&quot;language-text&quot;&gt;egg&lt;/code&gt; e a possibilidade de declarar e instalar dependências. Já em 2008, o &lt;code class=&quot;language-text&quot;&gt;pip&lt;/code&gt; é lançado
como uma alternativa aprimorada ao seu primo mais velho,
o &lt;code class=&quot;language-text&quot;&gt;easy_install&lt;/code&gt;, que possibilitava a
instalação de pacotes consultando um índice centralizado na &lt;em&gt;internet&lt;/em&gt;, chamado &lt;em&gt;Python Package Index&lt;/em&gt; (&lt;em&gt;pypi&lt;/em&gt;).&lt;/p&gt;
&lt;p&gt;E após indas e vindas (e um novo formato, chamado &quot;wheel&quot;), em 2014
o &lt;code class=&quot;language-text&quot;&gt;pip&lt;/code&gt; e o &lt;code class=&quot;language-text&quot;&gt;setuptools&lt;/code&gt; viram finalmente o padrão para empacotamento em &lt;em&gt;Python&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Confira a &lt;em&gt;timeline&lt;/em&gt; completa no &lt;a href=&quot;https://www.pypa.io/en/latest/history/&quot; title=&quot;Veja na ïntegra&quot;&gt;&lt;em&gt;Packaging History&lt;/em&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;O ovo ou a galinha?&lt;/h3&gt;
&lt;p&gt;A &lt;a href=&quot;https://www.python.org/dev/peps/pep-0518/&quot; title=&quot;Leia a proposta na íntegra&quot;&gt;&lt;em&gt;PEP 518&lt;/em&gt;&lt;/a&gt; é
quem apresenta o arquivo &lt;code class=&quot;language-text&quot;&gt;pyproject.toml&lt;/code&gt;. &lt;a href=&quot;https://snarky.ca/what-the-heck-is-pyproject-toml/&quot; title=&quot;Leia mas sobre a motivação por trás da PEP 518&quot;&gt;Segundo &lt;em&gt;Brett Cannon&lt;/em&gt;&lt;/a&gt;,
criador da proposta:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;(...) the purpose of PEP 518 was to come up with a way for projects to specify what build tools they required. That&apos;s it, real simple and straightforward.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Antes dela, não havia uma forma (prática) de dizer quais ferramentas de &lt;em&gt;build&lt;/em&gt; que um projeto requer para gerar um pacote &lt;code class=&quot;language-text&quot;&gt;wheel&lt;/code&gt;. Embora
o &lt;code class=&quot;language-text&quot;&gt;setuptools&lt;/code&gt; possua um argumento &lt;code class=&quot;language-text&quot;&gt;setup_requires&lt;/code&gt; para este fim, você não consegue ler esse parâmetro sem antes ter o próprio &lt;code class=&quot;language-text&quot;&gt;setuptools&lt;/code&gt; instalado,
e não havia um lugar onde você pudesse especificar que precisa do &lt;code class=&quot;language-text&quot;&gt;setuptools&lt;/code&gt; para ler a configuração dentro do &lt;code class=&quot;language-text&quot;&gt;setuptools&lt;/code&gt; (notou o problema do ovo-galinha?).&lt;/p&gt;
&lt;p&gt;E como vivemos até então sem nos preocupar com esse problema? Simples! Ferramentas como o próprio &lt;em&gt;pip&lt;/em&gt; injetam o &lt;code class=&quot;language-text&quot;&gt;setuptools&lt;/code&gt; e o &lt;code class=&quot;language-text&quot;&gt;wheel&lt;/code&gt;
quando executando um arquivo &lt;code class=&quot;language-text&quot;&gt;setup.py&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;E se então tivéssemos um lugar para dizer ao &lt;em&gt;pip&lt;/em&gt; sobre a necessidade dessas ferramentas?&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;toml&quot;&gt;&lt;pre class=&quot;language-toml&quot;&gt;&lt;code class=&quot;language-toml&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# pyproject.toml&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token table class-name&quot;&gt;build-system&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token key property&quot;&gt;requires&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;setuptools &gt;= 40.6.0&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;wheel&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token key property&quot;&gt;build-backend&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;setuptools.build_meta&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Booomm!!! Se amanhã &lt;a href=&quot;https://flit.readthedocs.io/en/latest/index.html&quot; title=&quot;Conheça o Flit&quot;&gt;alternativas mais interessantes ao &lt;em&gt;setuptools&lt;/em&gt;&lt;/a&gt; ou &lt;em&gt;pip&lt;/em&gt;
aparecerem, estaremos preparados.&lt;/p&gt;
&lt;h3&gt;E o que o Poetry tem a ver com isso?&lt;/h3&gt;
&lt;p&gt;O &lt;em&gt;Poetry&lt;/em&gt; declara qual será o &lt;em&gt;build backend&lt;/em&gt; através da utilização das PEPs
518 (citada acima) e &lt;a href=&quot;https://www.python.org/dev/peps/pep-0517/&quot; title=&quot;Leia a proposta na íntegra&quot;&gt;517&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;toml&quot;&gt;&lt;pre class=&quot;language-toml&quot;&gt;&lt;code class=&quot;language-toml&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# pyproject.toml&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token table class-name&quot;&gt;tool.poetry&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token key property&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;poetry-demo&quot;&lt;/span&gt;
&lt;span class=&quot;token key property&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;0.1.0&quot;&lt;/span&gt;
&lt;span class=&quot;token key property&quot;&gt;description&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;
&lt;span class=&quot;token key property&quot;&gt;authors&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Klaus Laube &amp;lt;mail@mail.com&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token table class-name&quot;&gt;tool.poetry.dependencies&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token key property&quot;&gt;python&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;^3.7&quot;&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token table class-name&quot;&gt;tool.poetry.dev-dependencies&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token key property&quot;&gt;pytest&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;^5.2&quot;&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token table class-name&quot;&gt;build-system&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token key property&quot;&gt;requires&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;poetry-core&gt;=1.0.0&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token key property&quot;&gt;build-backend&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;poetry.core.masonry.api&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;O cliente, também instalado através do &lt;code class=&quot;language-text&quot;&gt;pip install&lt;/code&gt; anterior, sabe se comunicar
com o &lt;code class=&quot;language-text&quot;&gt;poetry.core&lt;/code&gt;, explicitamente declarado na seção &lt;code class=&quot;language-text&quot;&gt;[build-system]&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;E com isso o &lt;em&gt;Poetry&lt;/em&gt; não apenas cuidará das dependências do seu projeto,
como também se responsabilizará por buildar o seu app ou &lt;em&gt;lib&lt;/em&gt;, e distribuí-lo
no &lt;em&gt;Python Package Index&lt;/em&gt;.&lt;/p&gt;
&lt;h2&gt;Continuando a poesia&lt;/h2&gt;
&lt;p&gt;Para adicionar uma dependência ao projeto, passamos a utilizar o comando &lt;code class=&quot;language-text&quot;&gt;poetry add&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ poetry add django&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Com isso, o &lt;em&gt;Django&lt;/em&gt; passa a ser adicionado ao &quot;requirements&quot;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;toml&quot;&gt;&lt;pre class=&quot;language-toml&quot;&gt;&lt;code class=&quot;language-toml&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# pyproject.toml&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token table class-name&quot;&gt;tool.poetry.dependencies&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token key property&quot;&gt;python&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;^3.7&quot;&lt;/span&gt;
&lt;span class=&quot;token key property&quot;&gt;Django&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;^3.1.4&quot;&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Por consequência um arquivo &lt;code class=&quot;language-text&quot;&gt;poetry.lock&lt;/code&gt; foi criado, e é ele quem garantirá o determinismo durante
a instalação de dependências do projeto:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ poetry install

Installing dependencies from lock file&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Outra consequência do comando &lt;code class=&quot;language-text&quot;&gt;add&lt;/code&gt; foi a criação automática de um &lt;em&gt;virtualenv&lt;/em&gt;. Agora, através do comando
&lt;code class=&quot;language-text&quot;&gt;poetry run&lt;/code&gt;, podemos executar dependências &lt;em&gt;Python&lt;/em&gt; diretamente do ambiente virtual:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ poetry run django-admin.py -h&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ou ainda através do comando &lt;code class=&quot;language-text&quot;&gt;shell&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ poetry shell
$ which django-admin.py
/Users/klauslaube/Library/Caches/pypoetry/virtualenvs/poetry-demo-IqTsQBT7-py3.9/bin/django-admin&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Note que em um ambiente diferente de &lt;em&gt;development&lt;/em&gt;, &lt;a href=&quot;https://python-poetry.org/docs/basic-usage/#installing-dependencies-only&quot; title=&quot;Installing dependencies only&quot;&gt;talvez você precise do parâmetro &lt;code class=&quot;language-text&quot;&gt;--no-root&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ poetry install --no-root&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Conclusão&lt;/h2&gt;
&lt;p&gt;Há cerca de 3 meses eu retornei do &lt;em&gt;Java&lt;/em&gt; ao &lt;em&gt;Python&lt;/em&gt;, e tinha esquecido (ou nunca de fato notado)
o quão não intuitivo é a dança entre &lt;em&gt;pyenv&lt;/em&gt;, &lt;em&gt;virtualenv&lt;/em&gt; e &lt;em&gt;pip&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Nisso, tanto &lt;em&gt;Pipenv&lt;/em&gt; quanto &lt;em&gt;Poetry&lt;/em&gt; são fenomenais. O &lt;em&gt;Pipenv&lt;/em&gt; leva certa vantagem, uma vez que
é capaz de &lt;a href=&quot;https://stackoverflow.com/questions/50161551/set-python-version-when-creating-virtualenv-using-pipenv#:~:text=When%20setting%20up%20your%20pipenv,6.&amp;#x26;text=to%20the%20specific%20version%20of%20Python%20you%20want.&quot; title=&quot;Leia a thread no Stackoverflow&quot;&gt;gerenciar até mesmo a versão do &lt;em&gt;Python&lt;/em&gt;&lt;/a&gt; (com &lt;em&gt;Poetry&lt;/em&gt;, ainda necessitamos do &lt;em&gt;pyenv&lt;/em&gt;).&lt;/p&gt;
&lt;p&gt;Aparentemente há planos do &lt;em&gt;pip&lt;/em&gt; suportar um argumento &lt;code class=&quot;language-text&quot;&gt;--pipfile&lt;/code&gt;, o que faria do &lt;em&gt;Pipfile&lt;/em&gt; (e por consequência &lt;em&gt;Pipenv&lt;/em&gt;) uma opção ainda mais
atraente que o concorrente.&lt;/p&gt;
&lt;p&gt;Mas tenho certeza que o &lt;em&gt;Poetry&lt;/em&gt; será uma mão na roda caso você esteja escrevendo &lt;em&gt;libs&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Até a próxima.&lt;/p&gt;
&lt;h2&gt;Referências&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://snarky.ca/clarifying-pep-518/&quot;&gt;Brett Cannon - Clarifying PEP 518 (a.k.a. pyproject.toml)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://snarky.ca/what-the-heck-is-pyproject-toml/&quot;&gt;Brett Cannon - What the heck is pyproject.toml?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.pypa.io/en/latest/history/&quot;&gt;PyPA - Packaging History&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.python.org/dev/peps/pep-0517/&quot;&gt;PEP 517 - A build-system independent format for source trees&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.python.org/dev/peps/pep-0518/&quot;&gt;PEP 518 - Specifying Minimum Build System Requirements for Python Projects&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.python.org/dev/peps/pep-0621/&quot;&gt;PEP 621 - Storing project metadata in pyproject.toml&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.python.org/dev/peps/pep-0633/&quot;&gt;PEP 633 - Dependency specification in pyproject.toml using an exploded TOML table&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/62983756/what-is-pyproject-toml&quot;&gt;Stackoverflow - What is pyproject.toml?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://the-hitchhikers-guide-to-packaging.readthedocs.io/en/latest/history.html&quot;&gt;The Hitchhiker&apos;s Guide to Packaging&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://towardsdatascience.com/solving-dependency-management-in-python-with-poetry-165b92069e9d&quot;&gt;Towards Data Science - Solving dependency management in Python with Poetry&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://vinayak.io/2020/08/17/day-6-some-pep-talk/&quot;&gt;Vinayak Mehta - Some PEP talk, or: What is a pyproject.toml?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/TOML&quot;&gt;Wikipedia - TOML&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[Tchau, requirements. Olá, Pipfile!]]></title><description><![CDATA[Admito que no começo fui cético em relação ao Pipfile. Pode ser a idade, mas questionei a real necessidade do mesmo. Para mim era muito óbvio! Eu já tinha o pip, o virtualenv e até mesmo o pyenv. Hoje, após ler alguns artigos e debater com alguns colegas, fico até envergonhado de não ter visto o…]]></description><link>https://klauslaube.com.br/2018/06/11/tchau-requirements-ola-pipfile.html</link><guid isPermaLink="false">https://klauslaube.com.br/2018/06/11/tchau-requirements-ola-pipfile.html</guid><dc:creator><![CDATA[Klaus Peter Laube]]></dc:creator><pubDate>Mon, 11 Jun 2018 16:40:00 GMT</pubDate><content:encoded>&lt;p&gt;Admito que no começo fui cético em relação ao &lt;a href=&quot;https://github.com/pypa/pipfile&quot; title=&quot;The replacement for requirements.txt&quot;&gt;&lt;em&gt;Pipfile&lt;/em&gt;&lt;/a&gt;. Pode ser a idade, mas questionei a real necessidade do mesmo. Para mim era muito óbvio! Eu já tinha o &lt;a href=&quot;/tag/pip.html&quot; title=&quot;Leia mais sobre pip&quot;&gt;&lt;em&gt;pip&lt;/em&gt;&lt;/a&gt;, o &lt;a href=&quot;/tag/virtualenv.html&quot; title=&quot;Leia mais sobre virtualenv&quot;&gt;&lt;em&gt;virtualenv&lt;/em&gt;&lt;/a&gt; e até mesmo o &lt;a href=&quot;%7Btag%7D&quot; title=&quot;Leia mais sobre Pyenv&quot;&gt;&lt;em&gt;pyenv&lt;/em&gt;&lt;/a&gt;. Hoje, após ler alguns artigos e debater com alguns colegas, fico até envergonhado de não ter visto o potencial da ferramenta no seu primeiro momento.&lt;/p&gt;
&lt;p&gt;Se você está na dúvida, assim como eu estive, vem comigo que te mostro as principais vantagens do &lt;em&gt;Pipfile&lt;/em&gt; (e do &lt;em&gt;Pipenv&lt;/em&gt;).&lt;/p&gt;
&lt;h2&gt;O que há de errado com o requirements.txt?&lt;/h2&gt;
&lt;p&gt;Esse foi o meu &quot;turning point&quot; em relação ao &lt;em&gt;Pipfile&lt;/em&gt;. E foi o &lt;a href=&quot;https://twitter.com/rcmachado&quot; title=&quot;Perfil no Twitter&quot;&gt;&lt;em&gt;@rcmachado&lt;/em&gt;&lt;/a&gt; quem respondeu essa pergunta:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;O build não é determinístico.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Vamos supor que estamos desenvolvendo um projeto em &lt;a href=&quot;/tag/django.html&quot; title=&quot;Leia mais sobre Django&quot;&gt;&lt;em&gt;Django&lt;/em&gt;&lt;/a&gt;. Instalamos via &lt;code class=&quot;language-text&quot;&gt;pip install Django&lt;/code&gt;, e jogamos a dependência no &lt;code class=&quot;language-text&quot;&gt;requirements.txt&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;# requirements.txt

Django&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Como você garante que a mesma versão do &lt;em&gt;Django&lt;/em&gt; está instalada nos diferentes ambientes do projeto (dev, qa, staging, production, etc)? Da forma acima, você não garante. O &lt;code class=&quot;language-text&quot;&gt;pip&lt;/code&gt; instalará a última versão do pacote disponível no &lt;a href=&quot;https://pypi.org/&quot; title=&quot;The Python Package Index&quot;&gt;&lt;em&gt;PyPI&lt;/em&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Para minimizar esse problema, podemos &quot;pinar&quot; a versão do &lt;em&gt;Django&lt;/em&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;# requirements.txt

Django==2.0.6&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Agora garantimos a versão do &lt;em&gt;framework&lt;/em&gt; em todos os ambientes do projeto. Sabemos que o &lt;em&gt;Django&lt;/em&gt; tem uma dependência, o &lt;a href=&quot;http://pytz.sourceforge.net/&quot; title=&quot;World Timezone Definitions for Python&quot;&gt;&lt;em&gt;pytz&lt;/em&gt;&lt;/a&gt;, o que acontece com ela?&lt;/p&gt;
&lt;p&gt;Bem... se o &lt;em&gt;framework&lt;/em&gt; estabelecer exatamente qual versão da dependência ele utiliza, não será um problema. Mas &lt;a href=&quot;https://github.com/django/django/blob/master/setup.py#L86&quot;&gt;nem sempre isso acontece&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# django/setup.py&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

setup&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    install_requires&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;pytz&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Para garantir que a mesma versão do &lt;em&gt;pytz&lt;/em&gt; está sendo instalada nos diferentes ambientes do projeto, podemos &quot;pinar&quot; a sua versão no &lt;code class=&quot;language-text&quot;&gt;requirements.txt&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;# requirements.txt

Django==2.0.6
pytz==2018.4&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;E por fim, adicionar um &lt;code class=&quot;language-text&quot;&gt;--no-deps&lt;/code&gt; ao comando &lt;code class=&quot;language-text&quot;&gt;pip&lt;/code&gt;, assim ele se manterá fiel às dependências descritas no &lt;code class=&quot;language-text&quot;&gt;requirements.txt&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ pip install -r requirements.txt --no-deps&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Note que você virou responsável por uma função que deveria ser desempenhada pelo &lt;em&gt;package manager&lt;/em&gt;. Com o passar do tempo, esse tipo de gestão passa a ser árdua e suscetível a erros.&lt;/p&gt;
&lt;h2&gt;Pipfile to the rescue&lt;/h2&gt;
&lt;p&gt;Segundo o &lt;a href=&quot;https://github.com/pypa/pipfile&quot; title=&quot;the replacement for requirements.txt&quot;&gt;repositório oficial&lt;/a&gt;, o &lt;em&gt;Pipfile&lt;/em&gt; é:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;(...) a replacement for the existing standard pip&apos;s requirements.txt file.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Como esperado, o padrão traz melhorias em relação ao &lt;code class=&quot;language-text&quot;&gt;requirements.txt&lt;/code&gt;. O já citado &quot;ambientes determinísticos&quot; é alcançado através do &lt;code class=&quot;language-text&quot;&gt;Pipfile.lock&lt;/code&gt;, um conceito usado em gerenciadores de pacotes de outras linguagens, como &lt;a href=&quot;http://bundler.io/&quot; title=&quot;Package manager do Ruby&quot;&gt;&lt;em&gt;Bundler&lt;/em&gt;&lt;/a&gt;, &lt;a href=&quot;https://crates.io/&quot; title=&quot;Package manager do Rust&quot;&gt;&lt;em&gt;Cargo&lt;/em&gt;&lt;/a&gt; ou &lt;a href=&quot;https://yarnpkg.com/en/&quot; title=&quot;Package manager do Node&quot;&gt;&lt;em&gt;Yarn&lt;/em&gt;&lt;/a&gt;, onde as versões das dependências são &quot;congeladas&quot;, garantindo que você obtenha o mesmo resultado em qualquer ambiente, e executando quantas vezes quiser.&lt;/p&gt;
&lt;p&gt;Outra vantagem é o uso de um único arquivo para diferentes ambientes. Com o uso de &lt;em&gt;requirements&lt;/em&gt;, geralmente acabamos com um arquivo de texto específico para cada ambiente:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;# requirements.txt

Django&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Mais um para dependências exclusivas do ambiente de desenvolvimento:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;# requirements-dev.txt

-r requirements.txt

django-debug-toolbar
pytest&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Com o &lt;em&gt;Pipfile&lt;/em&gt;, é possível utilizar o mesmo arquivo:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;ini&quot;&gt;&lt;pre class=&quot;language-ini&quot;&gt;&lt;code class=&quot;language-ini&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# Pipfile&lt;/span&gt;

&lt;span class=&quot;token header&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token section-name selector&quot;&gt;[source&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/span&gt;]
&lt;span class=&quot;token key attr-name&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;&quot;&lt;span class=&quot;token inner-value&quot;&gt;https://pypi.org/simple&lt;/span&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;verify_ssl&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;&quot;&lt;span class=&quot;token inner-value&quot;&gt;pypi&lt;/span&gt;&quot;&lt;/span&gt;

&lt;span class=&quot;token header&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token section-name selector&quot;&gt;dev-packages&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;pytest&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;&quot;&lt;span class=&quot;token inner-value&quot;&gt;*&lt;/span&gt;&quot;&lt;/span&gt;

&lt;span class=&quot;token header&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token section-name selector&quot;&gt;packages&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;Django&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;&quot;&lt;span class=&quot;token inner-value&quot;&gt;*&lt;/span&gt;&quot;&lt;/span&gt;

&lt;span class=&quot;token header&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token section-name selector&quot;&gt;requires&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;python_version&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;&quot;&lt;span class=&quot;token inner-value&quot;&gt;3.6&lt;/span&gt;&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Pipfile != Pipenv&lt;/h2&gt;
&lt;p&gt;Grande parte dos artigos que lí sobre &lt;em&gt;Pipfile&lt;/em&gt; começavam com algum comando como o abaixo:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ pipenv install django&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Uma coisa que tem que ficar clara é: O &lt;em&gt;Pipenv&lt;/em&gt; está para o &lt;em&gt;pip&lt;/em&gt;, assim como o &lt;em&gt;Pipfile&lt;/em&gt; está para o &lt;em&gt;requirements&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;&lt;figure class=&quot;gatsby-resp-image-figure&quot; style=&quot;&quot;&gt;
    &lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/ecdabcffb739710e8a9a1ab2a1eae89a/c08c5/rambo-knife.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 48.4375%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAUDBAb/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAv/aAAwDAQACEAMQAAABXzlGWhFIn//EABoQAAICAwAAAAAAAAAAAAAAAAECAxARITP/2gAIAQEAAQUC2GUkLEcxnglf/8QAFREBAQAAAAAAAAAAAAAAAAAAEEH/2gAIAQMBAT8Bh//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAECAQE/AVf/xAAZEAEAAgMAAAAAAAAAAAAAAAABABAhQZH/2gAIAQEABj8CHcXsM0V//8QAGhAAAwADAQAAAAAAAAAAAAAAAAERIUFRYf/aAAgBAQABPyGdIGud1keJKDNWnGZuumkf/9oADAMBAAIAAwAAABAXH//EABcRAAMBAAAAAAAAAAAAAAAAAAABETH/2gAIAQMBAT8QS2U//8QAFhEAAwAAAAAAAAAAAAAAAAAAARAx/9oACAECAQE/EBE//8QAHBABAAMBAAMBAAAAAAAAAAAAAQARITFBUXGh/9oACAEBAAE/EAa1Y21ZSDaza2m35v5PEvsJBbrHRp5EhVjy/GK9Hk//2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;&amp;quot;Rambo segurando sua faca&amp;quot;&quot;
        title=&quot;Pipenv é tipo a faca do Rambo. Resolve qualquer parada (mann.tv)&quot;
        src=&quot;/static/ecdabcffb739710e8a9a1ab2a1eae89a/c08c5/rambo-knife.jpg&quot;
        srcset=&quot;/static/ecdabcffb739710e8a9a1ab2a1eae89a/7809d/rambo-knife.jpg 192w,
/static/ecdabcffb739710e8a9a1ab2a1eae89a/4ecad/rambo-knife.jpg 384w,
/static/ecdabcffb739710e8a9a1ab2a1eae89a/c08c5/rambo-knife.jpg 640w&quot;
        sizes=&quot;(max-width: 640px) 100vw, 640px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
    &lt;figcaption class=&quot;gatsby-resp-image-figcaption&quot;&gt;Pipenv é tipo a faca do Rambo. Resolve qualquer parada (mann.tv)&lt;/figcaption&gt;
  &lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Até o momento da publicação desse artigo, o &lt;code class=&quot;language-text&quot;&gt;pip&lt;/code&gt; não suporta o formato do &lt;em&gt;Pipfile&lt;/em&gt; (ou pelo menos a versão que tenho instalada aqui). Portanto, a maneira mais conveniente de utilizar o &lt;em&gt;Pipfile&lt;/em&gt; hoje é através do utilitário de linha de comando &lt;code class=&quot;language-text&quot;&gt;pipenv&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Segundo o &lt;a href=&quot;https://github.com/pypa/pipenv&quot; title=&quot;Python Development Workflow for Humans&quot;&gt;repositório oficial&lt;/a&gt;, o &lt;em&gt;Pipenv&lt;/em&gt; é:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;(...) a tool that aims to bring the best of all packaging worlds (bundler, composer, npm, cargo, yarn, etc.) to the Python world. Windows is a first–class citizen, in our world.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Através do &lt;em&gt;parsing&lt;/em&gt; do &lt;em&gt;Pipfile&lt;/em&gt;, a ferramenta resolve dependências do projeto (através dos parâmetros &lt;code class=&quot;language-text&quot;&gt;install&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;uninstall&lt;/code&gt; ou &lt;code class=&quot;language-text&quot;&gt;update&lt;/code&gt;), exibe a árvore de dependências (através do parâmetro &lt;code class=&quot;language-text&quot;&gt;graph&lt;/code&gt;) e analisa as mesmas (através do &lt;code class=&quot;language-text&quot;&gt;check&lt;/code&gt;). Mas além de atuar como um gerenciador de pacotes, o &lt;em&gt;Pipenv&lt;/em&gt; tem uma funcionalidade fantástica: Cria e gerencia &lt;em&gt;virtualenvs&lt;/em&gt; de forma automática.&lt;/p&gt;
&lt;h2&gt;Virtualização out of the box&lt;/h2&gt;
&lt;p&gt;Já escrevi sobre virtualização com &lt;a href=&quot;/2015/07/23/virtualenvwrapper-o-basico-para-um-bom-ambiente-de-desenvolvimento-python.html&quot; title=&quot;Artigo sobre Virtualenvwrapper&quot;&gt;&lt;em&gt;virtualenv&lt;/em&gt;&lt;/a&gt; e &lt;a href=&quot;/2016/04/26/o-simples-e-poderoso-pyenv.html&quot; title=&quot;Artigo sobre pyenv&quot;&gt;&lt;em&gt;pyenv&lt;/em&gt;&lt;/a&gt;. Com o &lt;em&gt;Pipenv&lt;/em&gt;, a coisa fica significativamente mais simples.&lt;/p&gt;
&lt;p&gt;Ao executar o comando &lt;code class=&quot;language-text&quot;&gt;pipenv install&lt;/code&gt;, por exemplo, a ferramenta automaticamente criará um &lt;em&gt;virtualenv&lt;/em&gt; (caso não exista) para o projeto no qual você está trabalhando. Por exemplo:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ mkdir -p ~/workspace/test-pipenv
$ cd ~/workspace/test-pipenv/
$ pipenv install django

Creating a virtualenv for this project…
Using /home/klaus/.pyenv/versions/2.7.14/bin/python2.7 (2.7.14) to create virtualenv…&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Caso você esteja curioso para saber aonde o seu &lt;em&gt;virtualenv&lt;/em&gt; foi parar, o comando abaixo pode ajudar:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ pipenv --venv

/home/klaus/.local/share/virtualenvs/test-pipenv-BzNa0eOE&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Mas você não precisa se preocupar em saber onde o &lt;code class=&quot;language-text&quot;&gt;activate.sh&lt;/code&gt; está. Para ativar o &lt;em&gt;virtualenv&lt;/em&gt; criado, o parâmetro &lt;code class=&quot;language-text&quot;&gt;shell&lt;/code&gt; é a melhor saída:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ pipenv shell

Spawning environment shell (/bin/zsh). Use &apos;exit&apos; to leave.
. /home/klaus/.local/share/virtualenvs/test-pipenv-BzNa0eOE/bin/activate&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Frustrado com o &lt;em&gt;Python 2.7&lt;/em&gt;? Sem problemas! Vamos transformar o projeto em &lt;em&gt;Python 3&lt;/em&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ pipenv install --three&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;O comando criará um novo &lt;em&gt;virtualenv&lt;/em&gt;, dessa vez com a versão mais recente da linguagem. Não esqueça de atualizar o &lt;code class=&quot;language-text&quot;&gt;python_version&lt;/code&gt; do &lt;code class=&quot;language-text&quot;&gt;Pipfile&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;Considerações finais&lt;/h2&gt;
&lt;p&gt;Com o &lt;a href=&quot;https://devcenter.heroku.com/articles/python-support&quot; title=&quot;Python Support - Heroku&quot;&gt;&lt;em&gt;Heroku&lt;/em&gt; adotando &lt;em&gt;Pipfile&lt;/em&gt;&lt;/a&gt;, me senti mais motivado a migrar alguns projetos para o padrão.&lt;/p&gt;
&lt;p&gt;Como resultado, tenho simplificado a &lt;em&gt;stack&lt;/em&gt; dos mesmos. Antes, eu gerenciava os ambientes virtuais com um &lt;em&gt;mix&lt;/em&gt; de &lt;em&gt;virtualenvwrapper&lt;/em&gt; e &lt;em&gt;pyenv&lt;/em&gt;. Hoje, com apenas um utilitário de linha de comando, sou capaz de gerenciar dependências e virtualização. Além disso, acredito que o &lt;em&gt;setup&lt;/em&gt; de um projeto &lt;em&gt;Python&lt;/em&gt; fique mais homogêneo, uma vez que não há necessidade de um combo &lt;code class=&quot;language-text&quot;&gt;pip + {virtualenv,virtualenvwrapper,pyenv}&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Até a próxima.&lt;/p&gt;
&lt;h2&gt;Referências&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.mattlayman.com/2017/using-pipfile-for-fun-and-profit.html&quot;&gt;mattlayman - Using Pipfile for fun and profit&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://medium.com/grupy-rn/gerenciando-suas-depend%C3%AAncias-e-ambientes-python-com-pipenv-9e5413513fa6&quot;&gt;Medium - Gerenciando suas dependências e ambientes python com pipenv&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://docs.pipenv.org&quot;&gt;Pipenv - Python Dev Workflow for Humans&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://realpython.com/pipenv-guide/&quot;&gt;Real Python - Pipenv: A Guide to the New Python Packaging Tool&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[Como versionar projetos Django com o Mercurial - Parte 3]]></title><description><![CDATA[Dando continuidade a micro-série Como versionar projetos \Django_ com o
Mercurial (confira a parte 1 e a parte 2), vamos finalizar com
um exemplo prático de um projeto Django usando o Mercurial. Começando… Vamos reutilizar a estrutura dos posts anteriores. Para isso, inicie
um projeto com o…]]></description><link>https://klauslaube.com.br/2011/06/04/como-versionar-projetos-django-mercurial-parte-3.html</link><guid isPermaLink="false">https://klauslaube.com.br/2011/06/04/como-versionar-projetos-django-mercurial-parte-3.html</guid><dc:creator><![CDATA[Klaus Peter Laube]]></dc:creator><pubDate>Sat, 04 Jun 2011 10:27:00 GMT</pubDate><content:encoded>&lt;p&gt;Dando continuidade a micro-série &lt;em&gt;Como versionar projetos \&lt;/em&gt;Django_ com o
&lt;em&gt;Mercurial&lt;/em&gt; (confira a &lt;a href=&quot;/2011/05/10/como-versionar-projetos-django-mercurial-parte.html&quot;&gt;parte 1&lt;/a&gt; e a &lt;a href=&quot;/2011/05/22/como-versionar-projetos-django-mercurial-parte-2.html&quot; title=&quot;Como versionar projetos Django com o Mercurial - Parte 2&quot;&gt;parte 2&lt;/a&gt;), vamos finalizar com
um exemplo prático de um projeto &lt;a href=&quot;/tag/django.html&quot; title=&quot;Leia mais sobre Django&quot;&gt;&lt;em&gt;Django&lt;/em&gt;&lt;/a&gt; usando o &lt;a href=&quot;/tag/mercurial.html&quot; title=&quot;Leia mais sobre Mercurial&quot;&gt;&lt;em&gt;Mercurial&lt;/em&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Começando…&lt;/h2&gt;
&lt;p&gt;Vamos reutilizar a estrutura dos &lt;em&gt;posts&lt;/em&gt; anteriores. Para isso, inicie
um projeto com o &lt;a href=&quot;/tag/virtualenv.html&quot; title=&quot;Leia mais sobre virtualenv&quot;&gt;&lt;em&gt;virtualenv&lt;/em&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ cd ~/Projetos/
$ virtualenv DjangoComHG --no-site-packages
$ cd DjangoComHG/&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Vamos aproveitar os procedimentos descritos na [parte 2][1] deste
&lt;em&gt;post&lt;/em&gt;. Caso você ainda não tenha criado um repositório no
&lt;a href=&quot;http://www.bitbucket.org/&quot; title=&quot;Versione e compartilhe código com o Mercurial&quot;&gt;&lt;em&gt;Bitbucket&lt;/em&gt;&lt;/a&gt;, essa é uma boa oportunidade.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ hg clone &amp;lt;caminho&gt; django_com_hg&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Não esqueça de mudar o &lt;strong&gt;caminho&lt;/strong&gt; para o &lt;strong&gt;endereço do seu
repositório&lt;/strong&gt;.&lt;/p&gt;
&lt;h2&gt;Instalando o Django&lt;/h2&gt;
&lt;p&gt;Com o &lt;em&gt;virtualenv&lt;/em&gt; ativado, vamos instalar o &lt;em&gt;Django&lt;/em&gt; apenas para o
nosso ambiente &lt;em&gt;virtual&lt;/em&gt; através do &lt;em&gt;pip&lt;/em&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ source bin/activate
$ pip install django&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Só para ter certeza que ele instalou o &lt;em&gt;Django&lt;/em&gt; dentro do nosso ambiente
virtual, vamos abrir o terminal do &lt;a href=&quot;/tag/python.html&quot; title=&quot;Leia mais sobre Python&quot;&gt;&lt;em&gt;Python&lt;/em&gt;&lt;/a&gt; e digitar as seguintes
instruções:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; django
django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;__path__&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Você deverá obter como resposta uma &lt;em&gt;string&lt;/em&gt; semelhante a esta:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$HOME/Projetos/DjangoComHG/lib/python2.6/site-packages/django/&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Iniciando um projeto&lt;/h2&gt;
&lt;p&gt;Vamos fazer uma pequena brincadeira de troca de nomes de pastas, para
que possamos criar o nosso projeto &lt;em&gt;Django&lt;/em&gt; com o mesmo nome do
repositório &lt;em&gt;Mercurial&lt;/em&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ mv post_django_com_hg post_django_com_hg.bk&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Agora mandamos o &lt;code class=&quot;language-text&quot;&gt;django-admin.py&lt;/code&gt; iniciar o projeto:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ django-admin.py startproject post_django_com_hg&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Movemos os arquivos do nosso repositório para dentro de
&lt;code class=&quot;language-text&quot;&gt;post_django_com_hg&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ mv post_django_com_hg.bk/* post_django_com_hg/
$ mv post_django_com_hg.bk/.hg post_django_com_hg/
$ mv post_django_com_hg.bk/.hgignore post_django_com_hg/&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Entre no diretório &lt;code class=&quot;language-text&quot;&gt;post_django_com_hg&lt;/code&gt; e dê um &lt;code class=&quot;language-text&quot;&gt;hg status&lt;/code&gt;. Os
arquivos base do &lt;em&gt;Django&lt;/em&gt; não estão no projeto. Vamos adicioná-los,
comitá-los e dar um &lt;code class=&quot;language-text&quot;&gt;push&lt;/code&gt; deles para o repositório &lt;em&gt;Mercurial&lt;/em&gt; no
&lt;em&gt;Bitbucket&lt;/em&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ hg add .
$ hg commit -m &quot;Projeto Django iniciado&quot;
$ hg push&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Nos &lt;em&gt;changesets&lt;/em&gt; do repositório, veremos a contribuição enviada:&lt;/p&gt;
&lt;p&gt;&lt;figure class=&quot;gatsby-resp-image-figure&quot; style=&quot;&quot;&gt;
    &lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 568px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/c95e7c18e4f018ee5ab9d63faa63a129/10e91/changesets-no-bitbucket.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 29.166666666666668%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAyUlEQVQY03WPyXLDIBBE+f+fyyknp+LIElpZJFYJGJxOfHF5eXRRdNX0MMP6SXx8fjXdlFI6XkGJUqIdxAiLspyhTERM6g3JbTOQfyRYZ87yJNezNco7hyKt9TgLiKgw3rbNpRuFFtpcn6BKal+OrK61wOJnH4LQVq4WlnV8PH03SilrrTH2meCjc+H2ds5hnhgCbkzO5kU23bDIbZiVDxGb5FzuyTgFayYqBWEp1Q+f2mGptbK+vfSc69Xcku+p/33RJO3HnxD+BT9ZWF52uq1AAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;&amp;quot;Changeset no BitBucket&amp;quot;&quot;
        title=&quot;Changeset no BitBucket&quot;
        src=&quot;/static/c95e7c18e4f018ee5ab9d63faa63a129/10e91/changesets-no-bitbucket.png&quot;
        srcset=&quot;/static/c95e7c18e4f018ee5ab9d63faa63a129/8514f/changesets-no-bitbucket.png 192w,
/static/c95e7c18e4f018ee5ab9d63faa63a129/804b2/changesets-no-bitbucket.png 384w,
/static/c95e7c18e4f018ee5ab9d63faa63a129/10e91/changesets-no-bitbucket.png 568w&quot;
        sizes=&quot;(max-width: 568px) 100vw, 568px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
    &lt;figcaption class=&quot;gatsby-resp-image-figcaption&quot;&gt;Changeset no BitBucket&lt;/figcaption&gt;
  &lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Pronto!&lt;/strong&gt; Basicamente, para termos o &lt;em&gt;Mercurial&lt;/em&gt; versionando um
projeto &lt;em&gt;Django&lt;/em&gt;, são estes os procedimentos… mas eu sei como deixar a
coisa ainda mais interessante&lt;/p&gt;
&lt;h2&gt;Hora de congelar!&lt;/h2&gt;
&lt;p&gt;Digamos que você tenha um colaborador envolvido com o projeto. Quer
dizer que ele vai ter que criar um &lt;em&gt;virtualenv&lt;/em&gt;, clonar o repositório e
instalar as dependências do projeto? A resposta é “sim” – Mas podemos
facilitar esta última parte através do &lt;em&gt;pip&lt;/em&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ pip freeze

Django==1.3
wsgiref==0.1.2&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;O comando &lt;code class=&quot;language-text&quot;&gt;pip freeze&lt;/code&gt; vai coletar os pacotes &lt;em&gt;Python&lt;/em&gt; instalados
(nesse nosso caso, dentro do nosso ambiente virtual através do
&lt;em&gt;virtualenv&lt;/em&gt;) e exibir para a gente em formato de lista. Com isso,
podemos criar um arquivo que armazene as dependências do nosso projeto:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ pip freeze &gt; requirements.txt&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Vamos desativar o ambiente atual, criar um novo e instalar as
dependências listadas nesta arquivo &lt;code class=&quot;language-text&quot;&gt;requirements.txt&lt;/code&gt; neste novo
ambiente:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ deactivate
$ cd ~/Projetos/
$ virtualenv DjangoComHG-2 --no-site-packages
$ source DjangoComHG-2/bin/activate
$ pip install -r DjangoComHG/post_django_com_hg/requirements.txt&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Veja a mágica acontecendo… o &lt;em&gt;pip&lt;/em&gt; instalará todas as dependências
contidas em &lt;code class=&quot;language-text&quot;&gt;requirements.txt&lt;/code&gt; em nosso novo ambiente virtual.&lt;/p&gt;
&lt;p&gt;Podemos resumir os comandos acima em:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ pip install -E DjangoComHG-2 -r DjangoComHG/post_django_com_hg/requirements.txt&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;A instrução acima deverá ser escrita em um linha só.&lt;/p&gt;
&lt;h2&gt;Versionando dependências do projeto&lt;/h2&gt;
&lt;p&gt;Logo o &lt;code class=&quot;language-text&quot;&gt;requirements.txt&lt;/code&gt; sendo um arquivo de texto, pode ser
facilmente versionado pelo &lt;em&gt;Mercurial&lt;/em&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ cd ~/Projetos/DjangoComHG/post_django_com_hg
$ hg add requirements.txt
$ hg commit -m &quot;Adicionado arquivo de dependências do pip&quot;
$ hg push&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Finalmente, temos um projeto &lt;em&gt;Django&lt;/em&gt; versionado com &lt;em&gt;Mercurial&lt;/em&gt;,
disponível no &lt;em&gt;Bitbucket&lt;/em&gt;, e com dependências facilmente gerenciáveis
através do &lt;em&gt;pip&lt;/em&gt; em conjunto com o &lt;em&gt;virtualenv&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;E você… utiliza controle de versão com o &lt;em&gt;Django&lt;/em&gt; de uma outra forma?
Conte-nos através dos comentários abaixo.&lt;/p&gt;
&lt;p&gt;Até a próxima…&lt;/p&gt;</content:encoded></item></channel></rss>