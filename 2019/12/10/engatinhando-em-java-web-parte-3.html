<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.493e6315ef3a09bc2f74.css">code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><meta name="generator" content="Gatsby 2.20.12"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><style data-styled="" data-styled-version="5.1.0">.dQgIel{display:inline-block;vertical-align:middle;overflow:hidden;}/*!sc*/
data-styled.g1[id="sc-AxjAm"]{content:"dQgIel,"}/*!sc*/
.dLmtYS{color:rgba(0,0,0,0.84);height:24px;width:24px;}/*!sc*/
data-styled.g2[id="article-share__FacebookStyled-sc-1s9obkn-0"]{content:"dLmtYS,"}/*!sc*/
.cXEKcd{color:rgba(0,0,0,0.84);height:24px;width:24px;}/*!sc*/
data-styled.g3[id="article-share__LinkedinStyled-sc-1s9obkn-1"]{content:"cXEKcd,"}/*!sc*/
.kBgYvV{color:rgba(0,0,0,0.84);height:24px;width:24px;}/*!sc*/
data-styled.g4[id="article-share__TwitterStyled-sc-1s9obkn-2"]{content:"kBgYvV,"}/*!sc*/
.jVnceN{color:rgba(0,0,0,0.84);height:24px;width:24px;}/*!sc*/
data-styled.g5[id="article-share__WhatsappStyled-sc-1s9obkn-3"]{content:"jVnceN,"}/*!sc*/
.hUktyW{display:inline-block;margin-right:8px;}/*!sc*/
data-styled.g6[id="article-share__SocialLink-sc-1s9obkn-4"]{content:"hUktyW,"}/*!sc*/
.hKQQPE{clear:both;margin-bottom:32px;}/*!sc*/
@media (min-width:768px){.hKQQPE{clear:none;float:right;line-height:48px;}}/*!sc*/
data-styled.g7[id="article-share__SocialWrapper-sc-1s9obkn-5"]{content:"hKQQPE,"}/*!sc*/
.gKRNvs{margin-bottom:24px;}/*!sc*/
data-styled.g8[id="article-tags__Tags-lfitfk-0"]{content:"gKRNvs,"}/*!sc*/
.kdcwKK{background-color:#f4f4f4;color:rgba(0,0,0,0.54);display:inline-block;font-size:14px;margin:0 8px 8px 0;padding:8px 16px;-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
data-styled.g9[id="article-tags__Tag-lfitfk-1"]{content:"kdcwKK,"}/*!sc*/
.gfJCPa{color:rgba(0,0,0,0.84);margin-bottom:4px;}/*!sc*/
data-styled.g14[id="article__AuthorName-sc-1bof3w4-0"]{content:"gfJCPa,"}/*!sc*/
.cZgAvk{clear:both;font-family:Georgia,"Times New Roman",Times,serif;font-size:18px;font-weight:300;-webkit-letter-spacing:-0.054px;-moz-letter-spacing:-0.054px;-ms-letter-spacing:-0.054px;letter-spacing:-0.054px;line-height:28px;margin-bottom:48px;}/*!sc*/
@media (min-width:768px){.cZgAvk{font-size:20px;}}/*!sc*/
.cZgAvk *{margin:0;margin-block-end:0;margin-block-start:0;padding:0;}/*!sc*/
.cZgAvk h2,.cZgAvk h3,.cZgAvk h4{font-family:"Lucida Sans","Lucida Sans Regular","Lucida Grande","Lucida Sans Unicode",Geneva,Verdana,sans-serif;-webkit-letter-spacing:-0.66px;-moz-letter-spacing:-0.66px;-ms-letter-spacing:-0.66px;letter-spacing:-0.66px;margin-top:8px;margin-bottom:28px;}/*!sc*/
@media (min-width:768px){.cZgAvk h2,.cZgAvk h3,.cZgAvk h4{margin-bottom:16px;}}/*!sc*/
.cZgAvk figure,.cZgAvk iframe,.cZgAvk .gatsby-highlight{left:-24px;position:relative;width:100vw;}/*!sc*/
@media (min-width:768px){.cZgAvk figure,.cZgAvk iframe,.cZgAvk .gatsby-highlight{left:0;width:auto;}}/*!sc*/
.cZgAvk a{color:#c4170c;-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
.cZgAvk a:hover{-webkit-text-decoration:underline;text-decoration:underline;}/*!sc*/
.cZgAvk blockquote{color:rgba(0,0,0,0.54);font-style:italic;}/*!sc*/
.cZgAvk code{font-size:16px;}/*!sc*/
.cZgAvk figcaption{color:rgba(0,0,0,0.54);font-size:16px;line-height:20px;padding:16px 24px 0;text-align:center;}/*!sc*/
.cZgAvk h2{font-size:26px;font-weight:600;line-height:32px;margin-bottom:28px;}/*!sc*/
.cZgAvk h3{color:#333;font-size:22px;font-weight:300;line-height:28px;}/*!sc*/
.cZgAvk h4{color:rgba(0,0,0,0.54);font-size:16;font-weight:300;line-height:24px;}/*!sc*/
.cZgAvk iframe{display:block;margin:0 auto 28px auto;height:260px;}/*!sc*/
@media (min-width:768px){.cZgAvk iframe{margin-bottom:42px;height:315px;width:560px;}}/*!sc*/
.cZgAvk img{display:block;margin:0 auto;}/*!sc*/
.cZgAvk p{margin-bottom:28px;}/*!sc*/
@media (min-width:768px){.cZgAvk p{margin-bottom:42px;}}/*!sc*/
.cZgAvk pre{font-size:16px;margin-bottom:28px;padding:24px 16px;}/*!sc*/
@media (min-width:768px){.cZgAvk pre{margin-bottom:42px;}}/*!sc*/
.cZgAvk ol,.cZgAvk ul{margin-left:28px;}/*!sc*/
@media (min-width:768px){.cZgAvk ol,.cZgAvk ul{margin-bottom:42px;}}/*!sc*/
.cZgAvk li{margin-bottom:8px;}/*!sc*/
@media (min-width:768px){.cZgAvk li{margin-bottom:16px;}}/*!sc*/
data-styled.g15[id="article__Content-sc-1bof3w4-1"]{content:"cZgAvk,"}/*!sc*/
.lhlkLZ{border-top:1px solid #f4f4f4;margin-bottom:24px;padding-top:24px;}/*!sc*/
data-styled.g16[id="article__DiscussionWrapper-sc-1bof3w4-2"]{content:"lhlkLZ,"}/*!sc*/
.hnJNBS{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.54);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;float:left;font-size:14px;margin-bottom:32px;}/*!sc*/
data-styled.g17[id="article__Meta-sc-1bof3w4-3"]{content:"hnJNBS,"}/*!sc*/
.cTbbvU{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
data-styled.g18[id="article__MetaText-sc-1bof3w4-4"]{content:"cTbbvU,"}/*!sc*/
.lhqEXT{border-radius:60px;margin-right:16px;}/*!sc*/
data-styled.g19[id="article__StyledAvatar-sc-1bof3w4-5"]{content:"lhqEXT,"}/*!sc*/
.dtcUmd{color:rgba(0,0,0,0.84);font-weight:600;-webkit-letter-spacing:-0.93px;-moz-letter-spacing:-0.93px;-ms-letter-spacing:-0.93px;letter-spacing:-0.93px;margin:0 0 4px 0;font-size:30px;font-weight:400;margin-bottom:32px;}/*!sc*/
@media (min-width:768px){.dtcUmd{font-size:40px;}}/*!sc*/
data-styled.g20[id="article__StyledTitle-sc-1bof3w4-6"]{content:"dtcUmd,"}/*!sc*/
.bfwjqj{margin:0 auto;max-width:640px;padding:0 24px;}/*!sc*/
data-styled.g21[id="container-sc-1o2is99-0"]{content:"bfwjqj,"}/*!sc*/
.iyjQQp{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#c4170c;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-family:Arial,Helvetica,sans-serif;height:36px;width:36px;}/*!sc*/
data-styled.g22[id="page-header-brand__Brand-ofbkek-0"]{content:"iyjQQp,"}/*!sc*/
.hPHtvI{display:none;}/*!sc*/
@media (min-width:768px){.hPHtvI{display:block;}}/*!sc*/
data-styled.g23[id="page-header-brand__BrandFragment-ofbkek-1"]{content:"hPHtvI,"}/*!sc*/
.exgtKg{color:#333;display:inline-block;margin-left:4px;}/*!sc*/
.exgtKg:first-child{margin-left:0;margin-right:4px;}/*!sc*/
data-styled.g24[id="page-header-brand__Bracket-ofbkek-2"]{content:"exgtKg,"}/*!sc*/
.fUa-dQJ{color:#333;width:22px;}/*!sc*/
data-styled.g25[id="page-header__GreyMail-sc-1ef23a-0"]{content:"fUa-dQJ,"}/*!sc*/
.GBaPr{box-shadow:0 -8px 16px 0 rgba(0,0,0,0.54);font-size:1.1rem;margin-bottom:24px;}/*!sc*/
@media (min-width:768px){.GBaPr{margin-bottom:64px;}}/*!sc*/
data-styled.g26[id="page-header__Header-sc-1ef23a-1"]{content:"GBaPr,"}/*!sc*/
.ktLFvT{margin:0 auto;max-width:640px;padding:0 24px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:56px;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;max-width:974px;}/*!sc*/
data-styled.g27[id="page-header__HeaderContainer-sc-1ef23a-2"]{content:"ktLFvT,"}/*!sc*/
.gbnbN{-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
data-styled.g28[id="page-header__StyledLink-sc-1ef23a-3"]{content:"gbnbN,"}/*!sc*/
.hJnaIf{-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
data-styled.g29[id="page-header__StyledA-sc-1ef23a-4"]{content:"hJnaIf,"}/*!sc*/
.eZHcyp{border-top:1px solid #f4f4f4;color:rgba(0,0,0,0.54);font-size:14px;padding:24px 0;text-align:center;}/*!sc*/
@media (min-width:768px){.eZHcyp{text-align:right;}}/*!sc*/
data-styled.g30[id="page-footer__Footer-sc-1jesc4c-0"]{content:"eZHcyp,"}/*!sc*/
.hCZhVV{color:rgba(0,0,0,0.84);-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
.hCZhVV:hover{-webkit-text-decoration:underline;text-decoration:underline;}/*!sc*/
data-styled.g31[id="page-footer__Link-sc-1jesc4c-1"]{content:"hCZhVV,"}/*!sc*/
body{color:rgba(0,0,0,0.84);font-family:Arial,Helvetica,sans-serif;margin:0;}/*!sc*/
data-styled.g51[id="sc-global-eLbNMD1"]{content:"sc-global-eLbNMD1,"}/*!sc*/
</style><title data-react-helmet="true">Engatinhando em Java para a web - Parte 3 | Klaus Laube</title><meta data-react-helmet="true" name="description" content="No post anterior falamos sobre a especificação
Servlet, bem como sobre o uso de JavaServer Pages e Expression Language.
Para finalizar o…"/><meta data-react-helmet="true" property="og:title" content="Engatinhando em Java para a web - Parte 3"/><meta data-react-helmet="true" property="og:description" content="No post anterior falamos sobre a especificação
Servlet, bem como sobre o uso de JavaServer Pages e Expression Language.
Para finalizar o…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Klaus Peter Laube"/><meta data-react-helmet="true" name="twitter:title" content="Engatinhando em Java para a web - Parte 3"/><meta data-react-helmet="true" name="twitter:description" content="No post anterior falamos sobre a especificação
Servlet, bem como sobre o uso de JavaServer Pages e Expression Language.
Para finalizar o…"/><meta data-react-helmet="true" name="keywords" content="desenvolvimento-web,java,servlet"/><meta data-react-helmet="true" property="og:image" content="https://klauslaube.com.br/static/e846b900cea0f35a8b8be48ec64b70bf/java-mascot.png"/><link rel="icon" href="/icons/icon-48x48.png?v=36b7df61fef254bef7f8fee13b1f890b"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=36b7df61fef254bef7f8fee13b1f890b"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=36b7df61fef254bef7f8fee13b1f890b"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=36b7df61fef254bef7f8fee13b1f890b"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=36b7df61fef254bef7f8fee13b1f890b"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=36b7df61fef254bef7f8fee13b1f890b"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=36b7df61fef254bef7f8fee13b1f890b"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=36b7df61fef254bef7f8fee13b1f890b"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=36b7df61fef254bef7f8fee13b1f890b"/><link rel="alternate" type="application/rss+xml" title="Klaus Laube" href="/feed/rss.xml"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link as="script" rel="preload" href="/webpack-runtime-6406988644299c0f8a4c.js"/><link as="script" rel="preload" href="/framework-15c64f04ece7e16d9319.js"/><link as="script" rel="preload" href="/styles-72b9aca6a03bf971c27e.js"/><link as="script" rel="preload" href="/app-16cd99d438252d8b9706.js"/><link as="script" rel="preload" href="/commons-d19a5247b9c341fd9cf4.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-5ffdc932bc635b5de73e.js"/><link as="fetch" rel="preload" href="/page-data/2019/12/10/engatinhando-em-java-web-parte-3.html/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="page-header__Header-sc-1ef23a-1 GBaPr"><div class="container-sc-1o2is99-0 page-header__HeaderContainer-sc-1ef23a-2 ktLFvT"><a class="page-header__StyledLink-sc-1ef23a-3 gbnbN" href="/"><div class="page-header-brand__Brand-ofbkek-0 iyjQQp"><span class="page-header-brand__Bracket-ofbkek-2 exgtKg">{</span>k<span class="page-header-brand__BrandFragment-ofbkek-1 hPHtvI">laus</span>l<span class="page-header-brand__BrandFragment-ofbkek-1 hPHtvI">aube</span><span class="page-header-brand__Bracket-ofbkek-2 exgtKg">}</span></div></a><div><a href="https://about.me/klauslaube" title="Contato" class="page-header__StyledA-sc-1ef23a-4 hJnaIf"><svg viewBox="0 0 24 24" aria-hidden="true" focusable="false" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" class="sc-AxjAm dQgIel page-header__GreyMail-sc-1ef23a-0 fUa-dQJ"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg></a></div></div></div><div><div class="container-sc-1o2is99-0 bfwjqj"><h1 class="typograph__Title-sc-4kf6ch-1 article__StyledTitle-sc-1bof3w4-6 dtcUmd">Engatinhando em Java para a web - Parte 3</h1><div class="article__Meta-sc-1bof3w4-3 hnJNBS"><img src="https://en.gravatar.com/userimage/12163112/d3ae0c6239980b01ff1f1730b65c2ebe.jpg" width="48" height="48" alt="Avatar" class="avatar-sc-46srdf-0 article__StyledAvatar-sc-1bof3w4-5 lhqEXT"/><div class="article__MetaText-sc-1bof3w4-4 cTbbvU"><div class="article__AuthorName-sc-1bof3w4-0 gfJCPa">Klaus Peter Laube</div>10 de Dezembro de 2019<!-- --> - <!-- -->8 minutos<!-- --> de leitura</div></div><div class="article-share__SocialWrapper-sc-1s9obkn-5 hKQQPE"><a href="https://twitter.com/intent/tweet?url=https://klauslaube.com.br/2019/12/10/engatinhando-em-java-web-parte-3.html&amp;text=Engatinhando em Java para a web - Parte 3" target="_blank" rel="noreferrer" title="Compartilhe no Twitter" class="article-share__SocialLink-sc-1s9obkn-4 hUktyW"><svg viewBox="0 0 24 24" aria-hidden="true" focusable="false" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="sc-AxjAm dQgIel article-share__TwitterStyled-sc-1s9obkn-2 kBgYvV"><path d="M19.633 7.997c.013.175.013.349.013.523 0 5.325-4.053 11.461-11.46 11.461-2.282 0-4.402-.661-6.186-1.809.324.037.636.05.973.05a8.07 8.07 0 005.001-1.721 4.036 4.036 0 01-3.767-2.793c.249.037.499.062.761.062.361 0 .724-.05 1.061-.137a4.027 4.027 0 01-3.23-3.953v-.05c.537.299 1.16.486 1.82.511a4.022 4.022 0 01-1.796-3.354c0-.748.199-1.434.548-2.032a11.457 11.457 0 008.306 4.215c-.062-.3-.1-.611-.1-.923a4.026 4.026 0 014.028-4.028c1.16 0 2.207.486 2.943 1.272a7.957 7.957 0 002.556-.973 4.02 4.02 0 01-1.771 2.22 8.073 8.073 0 002.319-.624 8.645 8.645 0 01-2.019 2.083z"></path></svg></a><a href="https://www.facebook.com/sharer/sharer.php?u=https://klauslaube.com.br/2019/12/10/engatinhando-em-java-web-parte-3.html" target="_blank" rel="noreferrer" title="Compartilhe no Facebook" class="article-share__SocialLink-sc-1s9obkn-4 hUktyW"><svg viewBox="0 0 24 24" aria-hidden="true" focusable="false" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="sc-AxjAm dQgIel article-share__FacebookStyled-sc-1s9obkn-0 dLmtYS"><path d="M20 3H4a1 1 0 00-1 1v16a1 1 0 001 1h8.615v-6.96h-2.338v-2.725h2.338v-2c0-2.325 1.42-3.592 3.5-3.592.699-.002 1.399.034 2.095.107v2.42h-1.435c-1.128 0-1.348.538-1.348 1.325v1.735h2.697l-.35 2.725h-2.348V21H20a1 1 0 001-1V4a1 1 0 00-1-1z"></path></svg></a><a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://klauslaube.com.br/2019/12/10/engatinhando-em-java-web-parte-3.html&amp;title=Engatinhando em Java para a web - Parte 3" target="_blank" rel="noreferrer" title="Compartilhe no Linkedin" class="article-share__SocialLink-sc-1s9obkn-4 hUktyW"><svg viewBox="0 0 24 24" aria-hidden="true" focusable="false" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="sc-AxjAm dQgIel article-share__LinkedinStyled-sc-1s9obkn-1 cXEKcd"><path d="M20 3H4a1 1 0 00-1 1v16a1 1 0 001 1h16a1 1 0 001-1V4a1 1 0 00-1-1zM8.339 18.337H5.667v-8.59h2.672v8.59zM7.003 8.574a1.548 1.548 0 110-3.096 1.548 1.548 0 010 3.096zm11.335 9.763h-2.669V14.16c0-.996-.018-2.277-1.388-2.277-1.39 0-1.601 1.086-1.601 2.207v4.248h-2.667v-8.59h2.56v1.174h.037c.355-.675 1.227-1.387 2.524-1.387 2.704 0 3.203 1.778 3.203 4.092v4.71z"></path></svg></a><a href="https://api.whatsapp.com/send?text=https://klauslaube.com.br/2019/12/10/engatinhando-em-java-web-parte-3.html" target="_blank" rel="noreferrer" title="Compartilhe no Whatsapp" class="article-share__SocialLink-sc-1s9obkn-4 hUktyW"><svg viewBox="0 0 24 24" aria-hidden="true" focusable="false" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="sc-AxjAm dQgIel article-share__WhatsappStyled-sc-1s9obkn-3 jVnceN"><path fill-rule="evenodd" d="M18.403 5.633A8.919 8.919 0 0012.053 3c-4.948 0-8.976 4.027-8.978 8.977 0 1.582.413 3.126 1.198 4.488L3 21.116l4.759-1.249a8.981 8.981 0 004.29 1.093h.004c4.947 0 8.975-4.027 8.977-8.977a8.926 8.926 0 00-2.627-6.35m-6.35 13.812h-.003a7.446 7.446 0 01-3.798-1.041l-.272-.162-2.824.741.753-2.753-.177-.282a7.448 7.448 0 01-1.141-3.971c.002-4.114 3.349-7.461 7.465-7.461a7.413 7.413 0 015.275 2.188 7.42 7.42 0 012.183 5.279c-.002 4.114-3.349 7.462-7.461 7.462m4.093-5.589c-.225-.113-1.327-.655-1.533-.73-.205-.075-.354-.112-.504.112s-.58.729-.711.879-.262.168-.486.056-.947-.349-1.804-1.113c-.667-.595-1.117-1.329-1.248-1.554s-.014-.346.099-.458c.101-.1.224-.262.336-.393.112-.131.149-.224.224-.374s.038-.281-.019-.393c-.056-.113-.505-1.217-.692-1.666-.181-.435-.366-.377-.504-.383a9.65 9.65 0 00-.429-.008.826.826 0 00-.599.28c-.206.225-.785.767-.785 1.871s.804 2.171.916 2.321c.112.15 1.582 2.415 3.832 3.387.536.231.954.369 1.279.473.537.171 1.026.146 1.413.089.431-.064 1.327-.542 1.514-1.066.187-.524.187-.973.131-1.067-.056-.094-.207-.151-.43-.263" clip-rule="evenodd"></path></svg></a></div><div class="article__Content-sc-1bof3w4-1 cZgAvk"><p>No <a href="/2019/12/02/engatinhando-em-java-web-parte-2.html" title="Confira a parte 2"><em>post</em> anterior</a> falamos sobre a especificação
<em>Servlet</em>, bem como sobre o uso de <em>JavaServer Pages</em> e <em>Expression Language</em>.
Para finalizar o protótipo proposto, e encerrar essa introdução ao <a href="/tag/java.html" title="Leia mais sobre Java"><em>Java</em></a>,
precisamos implementar o método <code class="language-text">POST</code>, e durante esse percurso abordaremos os conceitos de <em>filters</em> e <em>listeners</em>.</p>
<h2>doGet e doPost</h2>
<p>Recaptulando o protótipo: Precisamos implementar a funcionalidade de adicionar uma tarefa ao <em>todo list</em>.</p>
<p><figure class="gatsby-resp-image-figure" style="">
    <span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 740px;"
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/7ca9804f928b464741517e0eb94c0810/07f3a/cypher-ignorance.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAUBBP/EABUBAQEAAAAAAAAAAAAAAAAAAAIB/9oADAMBAAIQAxAAAAGU58NsIwr/xAAYEAADAQEAAAAAAAAAAAAAAAAAAQIDEf/aAAgBAQABBQLXPjymXfMUOnQqaOs//8QAGBEAAgMAAAAAAAAAAAAAAAAAAAESMWH/2gAIAQMBAT8BVksP/8QAGBEAAgMAAAAAAAAAAAAAAAAAABEBEmH/2gAIAQIBAT8BUopp/8QAGhAAAgMBAQAAAAAAAAAAAAAAACEBAjEQEf/aAAgBAQAGPwL2MMQ61HIuf//EABoQAQADAAMAAAAAAAAAAAAAAAEAESExQXH/2gAIAQEAAT8hygE5NGkdMupZ9nNTUZtVFm1n/9oADAMBAAIAAwAAABAQz//EABURAQEAAAAAAAAAAAAAAAAAAAEA/9oACAEDAQE/EEAZCz//xAAYEQADAQEAAAAAAAAAAAAAAAAAASERYf/aAAgBAgEBPxBwbRdj/8QAHBABAAMAAgMAAAAAAAAAAAAAAQARQTFRIXHB/9oACAEBAAE/EAWmwD5fR1H1ACKLe3WcxAeHUfYoKIovImWkprqIEq8rP//Z'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Cypher em The Matrix"
        title="Se continuar no Python é ficar na Matrix, pode me deixar lá (filmfoodsafari.wordpress.com)"
        src="/static/7ca9804f928b464741517e0eb94c0810/07f3a/cypher-ignorance.jpg"
        srcset="/static/7ca9804f928b464741517e0eb94c0810/7809d/cypher-ignorance.jpg 192w,
/static/7ca9804f928b464741517e0eb94c0810/4ecad/cypher-ignorance.jpg 384w,
/static/7ca9804f928b464741517e0eb94c0810/07f3a/cypher-ignorance.jpg 740w"
        sizes="(max-width: 740px) 100vw, 740px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span>
    <figcaption class="gatsby-resp-image-figcaption">Se continuar no Python é ficar na Matrix, pode me deixar lá (filmfoodsafari.wordpress.com)</figcaption>
  </figure></p>
<p>Se inspecionarmos o método <code class="language-text">service</code> da classe <code class="language-text">HttpServlet</code>, veremos que ele já se encarrega de determinar qual verbo <em>HTTP</em>
está sendo utilizado pela requisição. Portanto, ao invés de sobrescrevê-lo, é mais eficiente implementarmos os métodos nos quais
queremos suportar.</p>
<p>Renomeie o método <code class="language-text">service</code> para <code class="language-text">doGet</code>, e crie um método vazio para o <code class="language-text">doPost</code>:</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OlaMundoServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Tarefa</span><span class="token punctuation">></span></span> tarefas <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">{</span>
            <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Tarefa</span><span class="token punctuation">(</span><span class="token string">"Tarefa A"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Tarefa</span><span class="token punctuation">(</span><span class="token string">"Tarefa B"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Tarefa</span><span class="token punctuation">(</span><span class="token string">"Tarefa C"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"tarefas"</span><span class="token punctuation">,</span> tarefas<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">RequestDispatcher</span> rd <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/WEB-INF/index.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rd<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Note a alteração em <code class="language-text">List&lt;Tarefa&gt; tarefas</code>.</p>
<p>Com a seguinte adição de código ao método <code class="language-text">doPost</code> temos um protótipo que atinge o seu objetivo:</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token keyword">final</span> <span class="token class-name">Tarefa</span> tarefa <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tarefa</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"nome"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    tarefas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>tarefa<span class="token punctuation">)</span><span class="token punctuation">;</span>

    req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"tarefas"</span><span class="token punctuation">,</span> tarefas<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">RequestDispatcher</span> rd <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/WEB-INF/index.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rd<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Executando o <em>Maven</em> (<code class="language-text">mvn clean tomcat7:run</code>), e através do endereço <code class="language-text">http://localhost:8080</code>, somos capazes de ver o resultado:</p>
<p><figure class="gatsby-resp-image-figure" style="">
    <span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 400px;"
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/5d23ead2544a53efb33934e0b7ae9c7a/e17e5/java-post-browser.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAABYlAAAWJQFJUiTwAAABd0lEQVQoz72S7UvCQBzH909FIk7Np3xCfBjqQutFEEn/WUEPSEIFQZqv3Gi1uanQpktlCBKZzrm5XWdqFEi1XvTle8dxx+d+v+9xyGYY3/Bha9aA1RFx+jB3IIW643ZP3OaKoe6Yw5tw+ZN2d9zpxVBXzIKGLWho3RacG8G3D1KZnCeQDkaz4fgOtrXvj2R8obQnmPKG8AS+l8rmosldeOoL4fA6+ycjl1fXh0fHJ6f5s3zhvHBxUywz1VqVq7Nsg+XqTJWjGW62w9ZZrsHVvhgRxVa5fFsqFUmSgPM9dQd+LcSYC4ApABq0Acaa8WFtanwjRJIkhn4QOr1HUeJbnZGqy5ohv5OvqvGi6J32U7fb1XV9RWVdNyaTiTxWes/D/kAeqsZoabjWdKBpmqqqq9uGQ1EUnueJSqXGcbI8MpF5DjebTYIgaJoeDAamYVEUKYpqt9srs/0AC4JAkmS/3wdmNIPhg0EMxjbV8wL+sxbw8qeA/6v8BnzyEiea5+ulAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Exemplo de POST"
        title="Exemplo de POST"
        src="/static/5d23ead2544a53efb33934e0b7ae9c7a/e17e5/java-post-browser.png"
        srcset="/static/5d23ead2544a53efb33934e0b7ae9c7a/8514f/java-post-browser.png 192w,
/static/5d23ead2544a53efb33934e0b7ae9c7a/804b2/java-post-browser.png 384w,
/static/5d23ead2544a53efb33934e0b7ae9c7a/e17e5/java-post-browser.png 400w"
        sizes="(max-width: 400px) 100vw, 400px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span>
    <figcaption class="gatsby-resp-image-figcaption">Exemplo de POST</figcaption>
  </figure></p>
<p>Ao analisar o código acima, além das possibilidades de melhoria de código (como reaproveitar o
<code class="language-text">req.getRequestDispatcher(&quot;/WEB-INF/index.jsp&quot;)</code> ao invés de duplicá-lo, ou fazer um <code class="language-text">redirect</code>),
há algo muito importante que precisa ser salientado: <em>Servlets</em> não são "thread safe".</p>
<h2>Don't repeat yourself</h2>
<p>Segundo o <a href="https://www.caelum.com.br/apostila-java-web/servlets/#uma-nica-instncia-de-cada-servlet" title="Leia mais na apostila da Caelum">material da <em>Caelum</em></a>:</p>
<blockquote>
<p>De acordo com a especificação de Servlets, por padrão, existe uma única instância de cada Servlet declarada. Ao chegar
uma requisição para a Servlet, uma nova Thread é aberta sobre aquela instância que já existe.</p>
</blockquote>
<blockquote>
<p>Isso significa que, se colocássemos em nossa Servlet uma variável de instância, ela seria compartilhada entre todas
as threads que acessam essa Servlet! Em outras palavras, seria compartilhado entre todas as requisições e todos os
clientes enxergariam o mesmo valor. Provavelmente não é o que queremos fazer.</p>
</blockquote>
<p>Nosso protótipo está pronto, e a brincadeira com o atributo de instância nos permitiu interagir com o método <code class="language-text">POST</code>.</p>
<p>Se quisermos seguir em frente e tornar a aplicação mais "production ready", outros
aspectos terão que ser considerados, como persistência, segurança, validação de dados, modularidade, e não podemos esquecer
desses detalhes como a natureza <em>multithreading</em> que envolve o <em>Java</em>.</p>
<p><figure class="gatsby-resp-image-figure" style="">
    <span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 740px;"
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/1a27dd338f27cf4defade1b51f89730c/50383/dodge-this.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVQozwGfAmD9ALXM3L3a6bnY5s7o8OD0+Or4+vL+/uTw8O/29fv//6eusXFuca3ByZ6utnVydtfZ2/////v8+v7///L8/ABCTV2Qpa/D3eXd+vrp/v74///g5ud5eXuqp6X///+3uLqMjo6wxsybrbV/e4K/xszh6e3t8/Tj7O3f7fEACAkXGh0tP0VReISHo7Gst728iYOIZ2FmgX196/Pvv8nIt8fCu8/On624g36HU01XRTxIrr7BhoqPmqCnABIRHycnMispLSQjJjs6OkZDQVRQT2dhXGFfV2htZXl9eJWdnoWGiouNkFM/PU88NDsvM4mNj3x9f391dQAQEBseHyQnJyknJickJSkhISQlIiUqKCZDQjpDQj49OjiFgn9wbXF4cWltUUJ3X0tCNDNLPEFTRUZtYFoAFhUaMzAuNS8tFhQYJCElJCAhJSIhPjYyMi0uJycqOTQyinp3r6emoKKanoFpmYZyamBjT0RCUERDdWpjADs3OFBKR1FNREVFNVBRPV1cTigkJm5jXW1OSxMQFRYUHGQ2MsOuo9jU1H9lUnttYJeSh7u8uLe6uLu8ugBwcF5naFJqbFiHiXugpaLM099gZWlRSkOBYVRWOTJHKCaUb1eslm6jjW4ZFBgAABY7ODrDwsG/wMO8vLoAcnFqlJKUsbO/x8zdy9PnytTqvsXWtLjHgnhzUzAlfU85kHRatLGkRkA4BAUODhEgOzw/srSxvLq4t7awAMTE1MrK3MnK3MbI2MPI2cHJ28jR5dXh+7W4wlU5LGA4JJWPhs3a7GJkZAoIDh0cIWZgTbazqLq7trO0rADBv8q/vsm8vMS7u8G8vMO/wMm/wcy+wc7DyNizs7muqq6+xM/N1d6ChoQAAQgPEBlkYFCpopS5urSwsqeEXVOjgX+zbAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Trinity em The Matrix"
        title="Fazer algo funcionar na plataforma JavaEE parece como a Trinity acertando um agente em Matrix (vulturehound.co.uk)"
        src="/static/1a27dd338f27cf4defade1b51f89730c/50383/dodge-this.png"
        srcset="/static/1a27dd338f27cf4defade1b51f89730c/8514f/dodge-this.png 192w,
/static/1a27dd338f27cf4defade1b51f89730c/804b2/dodge-this.png 384w,
/static/1a27dd338f27cf4defade1b51f89730c/50383/dodge-this.png 740w"
        sizes="(max-width: 740px) 100vw, 740px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span>
    <figcaption class="gatsby-resp-image-figcaption">Fazer algo funcionar na plataforma JavaEE parece como a Trinity acertando um agente em Matrix (vulturehound.co.uk)</figcaption>
  </figure></p>
<p>E se nesse momento você ainda está disposto a fazer isso "all by yourself", reconsidere. Para fins de aprendizado,
esse tipo de experimento é ótimo mas nada produtivo, portanto, considere o uso de algum <em>framework</em>.</p>
<h2>Para finalizar: Filters &#x26; Listeners</h2>
<p>Mas calma! Há dois tópicos que valem a pena ser compreendidos antes de pular para o uso de algum <em>framework</em>.</p>
<p>Diretamente de uma <a href="https://stackoverflow.com/questions/4720942/difference-between-filter-and-listener-in-servlet-java-ee" title="Difference between Filter and Listener"><em>thread</em> do <em>StackOverflow</em></a>:</p>
<blockquote>
<p>Servlet Filter is used for monitoring request and response from client to the servlet, or to modify the request and
response, or to audit and log.</p>
</blockquote>
<blockquote>
<p>Servlet Listener is used for listening to events in a web containers, such as when you create a session, or place an
attribute in an session or if you passivate and activate in another container, to subscribe to these events you can
configure listener in web.xml, for example HttpSessionListener.</p>
</blockquote>
<p>Em outras palavras:</p>
<ul>
<li><strong>Filtros:</strong> Usados para interagir com a requisição e com a resposta.</li>
<li><strong>Listeners:</strong> Usados para interagir com eventos que acontecem dentro de um <em>container</em>.</li>
</ul>
<h3>Filters</h3>
<p>Assim como a interface <code class="language-text">Servlet</code>, possuímos uma interface para a escrita de filtros. O propósito do filtro abaixo é
"logar" o endereço <em>IP</em> do usuário que está realizando a requisição:</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token comment">// src/main/java/webapp/LogFilter.java</span>
<span class="token keyword">package</span> webapp<span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io</span><span class="token punctuation">.</span><span class="token class-name">IOException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span><span class="token class-name">Date</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet</span><span class="token punctuation">.</span><span class="token class-name">Filter</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet</span><span class="token punctuation">.</span><span class="token class-name">FilterChain</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet</span><span class="token punctuation">.</span><span class="token class-name">FilterConfig</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet</span><span class="token punctuation">.</span><span class="token class-name">ServletException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet</span><span class="token punctuation">.</span><span class="token class-name">ServletRequest</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet</span><span class="token punctuation">.</span><span class="token class-name">ServletResponse</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">WebFilter</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebFilter</span><span class="token punctuation">(</span><span class="token string">"/*"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LogFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">FilterConfig</span> filterConfig<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
        <span class="token comment">// vazio</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span>
            <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> ipAddress <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRemoteAddr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"IP: %s; Time: %s"</span><span class="token punctuation">,</span> ipAddress<span class="token punctuation">,</span> now<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Com o uso da <em>annotation</em> <code class="language-text">WebFilter</code>, dizemos que queremos aplicar o filtro para todas as requisições (<code class="language-text">/*</code>). A <em>annotation</em> também é responsável por não precisarmos tocar no arquivo <code class="language-text">web.xml</code>, e temos o filtro funcionando a partir do momento que reiniciamos o <em>Tomcat</em>.</p>
<p>Com <code class="language-text">Filter</code> agora temos a capacidade de aplicar de uma maneira mais modular conceitos como <a href="/2012/05/14/o-cache-e-o-http.html" title="O cache e o HTTP"><em>cache</em></a>, compactação da
resposta, controle de sessão, <a href="/2012/04/15/problemas-de-seguranca-em-aplicacoes-web.html" title="Problemas comuns em aplicações web">segurança</a>, entre outros.</p>
<p><a href="https://www.caelum.com.br/apostila-java-web/recursos-importantes-filtros/" title="Recursos importantes: Filtros">Leia mais sobre filtros na apostila de desenvolvimento <em>web</em> em <em>Java</em>, da <em>Caelum</em></a>.</p>
<h3>Listeners</h3>
<p>A necessidade de filtros fica bem evidente, principalmente quando estamos acostumados com <a href="https://www.profissionaisti.com.br/2009/04/entendendo-o-django/" title="Entendendo o Django">estruturas como a do <em>Django</em></a>.
Possivelmente a necessidade dos <em>listeners</em> exija um pouco mais de criatividade de nossa parte. O <a href="https://www.javatpoint.com/ServletContextEvent" title="ServletContextEvent and ServletContextListener"><em>JavaTPoint</em> pode ajudar</a>:</p>
<blockquote>
<p>If you want to perform some action at the time of deploying the web application such as creating database connection,
creating all the tables of the project etc, you need to implement ServletContextListener interface and provide the
implementation of its methods.</p>
</blockquote>
<p>Perfeito! Para ilustrar como interagir com os (<em>context</em>) <em>listeners</em>, temos o código abaixo:</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token comment">// src/main/java/webapp/MyListener.java</span>
<span class="token keyword">package</span> webapp<span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet</span><span class="token punctuation">.</span><span class="token class-name">ServletContextEvent</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet</span><span class="token punctuation">.</span><span class="token class-name">ServletContextListener</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">WebListener</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebListener</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyListener</span> <span class="token keyword">implements</span> <span class="token class-name">ServletContextListener</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">contextInitialized</span><span class="token punctuation">(</span><span class="token class-name">ServletContextEvent</span> sce<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Imagine que estamos setando um pool de conexões com o banco de dados"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">contextDestroyed</span><span class="token punctuation">(</span><span class="token class-name">ServletContextEvent</span> sce<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Imagine que estamos fechando o pool de conexões com o banco de dados"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Ao iniciar a aplicação, temos:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">$ mvn tomcat7:run
[INFO] Scanning for projects...
(...)
INFO: Starting Servlet Engine: Apache Tomcat/7.0.47
Imagine que estamos setando um pool de conexões com o banco de dados</code></pre></div>
<p>E quando finalizamos a aplicação:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">Imagine que estamos fechando o pool de conexões com o banco de dados</code></pre></div>
<p>E além de fechar o <em>pool</em> de conexões, fechamos também a parte de <em>Servlets</em> dessa série. Fica uma clara impressão de
que grande parte do que precisamos para desenvolver uma plataforma <em>web</em> já é oferecida pela versão atual do
<em>Java Enterprise Edition</em>.</p>
<p><a href="https://www.caelum.com.br/apostila-java-web/apendice-topicos-da-servlet-api/#context-listener" title="Context Listener">Leia mais sobre context listener na apostilia de desenvolvimento <em>web</em> em <em>Java</em>, da <em>Caelum</em></a>.</p>
<h2>Antes de ir: O lado "agente Smith" da força</h2>
<p>E aqui chegamos ao fim dessa nossa saga cobrindo aspectos do <em>Java EE</em>. Ainda que faltem tópicos considerados relevantes, como o
<a href="https://docs.oracle.com/javaee/7/api/javax/ejb/package-summary.html" title="Enterprise JavaBeans"><em>EJB</em></a>, <a href="https://www.oracle.com/technetwork/java/javaee/javaserverfaces-139869.html" title="JavaServer Faces"><em>JSF</em></a>
ou <a href="https://www.oracle.com/technetwork/java/javaee/tech/persistence-jsp-140049.html" title="Java Persistence API"><em>JPA</em></a>,
cobrimos outros tantos que fazem parte da especificação.</p>
<p><figure class="gatsby-resp-image-figure" style="">
    <span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 740px;"
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/3a5585aa415ad19483f8d2da4dfbe857/07f3a/agent-smith.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAgADBP/EABYBAQEBAAAAAAAAAAAAAAAAAAEAAv/aAAwDAQACEAMQAAAB5SGZVlR//8QAHBAAAgEFAQAAAAAAAAAAAAAAAQIDABIhIjEz/9oACAEBAAEFAnl1BzI9zv5ij3//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAZEAACAwEAAAAAAAAAAAAAAAAAAgEQEWH/2gAIAQEABj8CXkGmi3//xAAcEAACAgIDAAAAAAAAAAAAAAAAASExEUFRYaH/2gAIAQEAAT8hzRzydj2iO2Oe0HmNyw//2gAMAwEAAgADAAAAEIg//8QAFREBAQAAAAAAAAAAAAAAAAAAEEH/2gAIAQMBAT8Qh//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EAB0QAQACAgIDAAAAAAAAAAAAAAEAESExcaFBsfD/2gAIAQEAAT8QSxSwVs2mJZbQ8S7bQrgnVe2AEgAa6mXx4n//2Q=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Agente Smith em The Matrix"
        title="Seja a resistência! Lute contra os engravatados (antagonist.wikia.com)"
        src="/static/3a5585aa415ad19483f8d2da4dfbe857/07f3a/agent-smith.jpg"
        srcset="/static/3a5585aa415ad19483f8d2da4dfbe857/7809d/agent-smith.jpg 192w,
/static/3a5585aa415ad19483f8d2da4dfbe857/4ecad/agent-smith.jpg 384w,
/static/3a5585aa415ad19483f8d2da4dfbe857/07f3a/agent-smith.jpg 740w"
        sizes="(max-width: 740px) 100vw, 740px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span>
    <figcaption class="gatsby-resp-image-figcaption">Seja a resistência! Lute contra os engravatados (antagonist.wikia.com)</figcaption>
  </figure></p>
<p>Especificação essa que, além de ter como proposta proporcionar tecnologias para um ambiente mais <em>enterprise</em>, possui outras vantagens,
como por exemplo, a premissa de evitar o <em>vendor lock-in</em>.</p>
<p>Mas ao contrário do que você possa pensar, e do que eu acreditava até pouco tempo atrás, não seguir essas especificações é uma possibilidade.
De fato, algumas comunidades vem desafiando essas "regras" e apresentando soluções elegantes e inovadoras dentro do ecossistema <em>Java</em> desde
muito tempo. <a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/overview.html#overview-history" title="History of Spring and the Spring Framework">Talvez a mais relevante delas sendo a do <em>Spring</em></a>:</p>
<blockquote>
<p>Spring came into being in 2003 as a response to the complexity of the early J2EE specifications. While some consider
Java EE and Spring to be in competition, Spring is, in fact, complementary to Java EE. The Spring programming model
does not embrace the Java EE platform specification; rather, it integrates with carefully selected individual
specifications from the EE umbrella.</p>
</blockquote>
<p>Inclusive, em um mundo cada vez mais "microservices-driven", seguir completamente essas especificações torna-se questionável,
como ilustra <em>Rod Johnson</em> em sua palestra <a href="https://www.infoq.com/presentations/principles-successful-frameworks/" title="Assista no InfoQ"><em>Eighteen Years of Spring</em></a>.</p>
<p>E é com o <em>Spring</em> que no próximo artigo experimentaremos esse lado "rebelde" e, sem dúvida, mais divertido, do desenvolvimento <a href="/tag/desenvolvimento-web.html" title="Leia mais sobre web"><em>web</em></a> com <em>Java</em>.
Mas se você quiser continuar em um ambiente mais <em>enterprise</em>: <a href="https://en.wikipedia.org/wiki/GlassFish" title="Open-source application server"><em>Glassfish</em></a>, <a href="https://en.wikipedia.org/wiki/WildFly" title="Antigo JBoss"><em>WildFly</em></a>
e <a href="https://en.wikipedia.org/wiki/Apache_Geronimo" title="Application server fornecido pela Apache Foundation"><em>Geronimo</em></a>; podem ser os próximos passos.</p>
<h2>Considerações finais</h2>
<p>E mais uma vez, embora possa ser tentador cair na discussão "Spring x Java EE", <em>Siva Prasad</em>
deixa essa pérola no artigo <a href="https://dzone.com/articles/developers-perspective-spring" title="Leia o artigo na íntegra">"A developer's perspective on Spring vs. Java EE"</a>:</p>
<blockquote>
<p>As an enthusiastic Java developer I read the Spring vs JavaEE discussions hoping there might be few things which I
don't know such as "in which areas one is better than the other". But I find 70% of discussions goes on lame
arguments which is not very interesting to me.</p>
</blockquote>
<p>Ter uma noção de como funciona a plataforma <em>EE</em> do <em>Java</em> é benéfico, embora eu admita que não seja lá muito divertido.</p>
<p>Até a próxima.</p>
<h2>Referências</h2>
<ul>
<li><a href="https://www.caelum.com.br/apostila-java-web/servlets/">Caelum: Apostila Java para Desenvolvimento Web - Servlets</a></li>
<li><a href="https://www.concretepage.com/java-ee/jsp-servlet/weblistener-annotation-example-in-servlet-3-with-servletcontextlistener">ConcretePage: @WebListener Annotation Example in Servlet 3 with ServletContextListener</a></li>
<li><a href="https://www.dineshonjava.com/what-is-dispatcherservlet-in-spring-and-its-uses/">Dinesh on Java: What is the DispatcherServlet in Spring and its uses?</a></li>
<li><a href="https://dzone.com/articles/developers-perspective-spring">DZone: A Developer's Perspective on Spring vs. JavaEE</a></li>
<li><a href="https://www.infoq.com/presentations/principles-successful-frameworks/">InfoQ: Eighteen Years of Spring</a></li>
<li><a href="https://www.javatpoint.com/ServletContextEvent">JavaTPoint: ServletContextEvent and ServletContextListener</a></li>
<li><a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/overview.html#overview-history">Spring: Spring Framework Overview</a></li>
<li><a href="https://stackoverflow.com/questions/4720942/difference-between-filter-and-listener-in-servlet-java-ee">StackOverflow: Difference between Filter and Listener in Servlet (Java EE)</a></li>
<li><a href="https://stackoverflow.com/questions/15774924/just-what-is-java-ee-really">StackOverflow: Just what is Java EE really?</a></li>
<li><a href="https://stackoverflow.com/questions/9555842/why-servlets-are-not-thread-safe">StackOverflow: Why Servlets are not thread safe?</a></li>
</ul></div><div class="article-tags__Tags-lfitfk-0 gKRNvs"><a class="article-tags__Tag-lfitfk-1 kdcwKK" href="/tag/desenvolvimento-web.html">desenvolvimento-web</a><a class="article-tags__Tag-lfitfk-1 kdcwKK" href="/tag/java.html">java</a><a class="article-tags__Tag-lfitfk-1 kdcwKK" href="/tag/servlet.html">servlet</a></div><div class="article__DiscussionWrapper-sc-1bof3w4-2 lhlkLZ"><div shortname="klauslaube" config="[object Object]" id="disqus_thread"></div></div></div></div><footer class="page-footer__Footer-sc-1jesc4c-0 eZHcyp"><div class="container-sc-1o2is99-0 bfwjqj"><p>O conteúdo desse blog está sob a licença<!-- --> <a href="http://creativecommons.org/licenses/by/3.0/deed.pt_BR" class="page-footer__Link-sc-1jesc4c-1 hCZhVV">Creative Commons Attribution</a>.</p><p><a href="https://github.com/kplaube/blog" class="page-footer__Link-sc-1jesc4c-1 hCZhVV">Fork me on Github</a>.</p></div></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-19657400-1', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2019/12/10/engatinhando-em-java-web-parte-3.html";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-16cd99d438252d8b9706.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-5ffdc932bc635b5de73e.js"],"component---src-templates-blog-list-js":["/component---src-templates-blog-list-js-17f3d72b40e932f3d20a.js"],"component---src-templates-tag-js":["/component---src-templates-tag-js-11f7506e832f69de8a81.js"],"component---src-pages-404-js":["/component---src-pages-404-js-bf5e10cca5c03eb48f60.js"]};/*]]>*/</script><script src="/component---src-templates-blog-post-js-5ffdc932bc635b5de73e.js" async=""></script><script src="/commons-d19a5247b9c341fd9cf4.js" async=""></script><script src="/app-16cd99d438252d8b9706.js" async=""></script><script src="/styles-72b9aca6a03bf971c27e.js" async=""></script><script src="/framework-15c64f04ece7e16d9319.js" async=""></script><script src="/webpack-runtime-6406988644299c0f8a4c.js" async=""></script></body></html>